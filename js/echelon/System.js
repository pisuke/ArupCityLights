Echelon.ErrorTable=function(){this.LEVEL_SYSTEM_INFO=0;this.LEVEL_FATAL_ERROR=1048576;this.LEVEL_ERROR=2097152;this.LEVEL_WARNING=3145728;this.LEVEL_INFO=4194304;this.LEVEL_DEBUG=5242880;this.ERR_NONE=0+this.LEVEL_INFO;this.ERR_WSSRV_BASE=0;this.ERR_WSSRV_UNKNOWN_FUNC=1+this.LEVEL_ERROR;this.ERR_WSSRV_PARAMETER_ERROR=2+this.LEVEL_ERROR;this.ERR_WSSRV_XML_PARSER=3+this.LEVEL_ERROR;this.ERR_WSSRV_TAG_MISSING=4+this.LEVEL_ERROR;this.ERR_WSSRV_INDEX_MISSING=5+this.LEVEL_ERROR;this.ERR_WSSRV_INDEX_NOT_FOUND=6+this.LEVEL_ERROR;this.ERR_WSSRV_INDEX_INVALID=7+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_CREATE=8+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_DELETE=9+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_SET=10+this.LEVEL_ERROR;this.ERR_WSSRV_FORMAT_ERROR=11+this.LEVEL_ERROR;this.ERR_WSSRV_COMMAND_FAILED=12+this.LEVEL_ERROR;this.ERR_WSSRV_WRONG_DP_INDEX=13+this.LEVEL_ERROR;this.ERR_WSSRV_DP_NAME_NOT_FOUND=14+this.LEVEL_ERROR;this.ERR_WSSRV_NO_DATA=15+this.LEVEL_ERROR;this.ERR_WSSRV_OUT_OF_MEMORY=16+this.LEVEL_ERROR;this.ERR_WSSRV_BUSY=17+this.LEVEL_ERROR;this.ERR_WSSRV_WRONG_VERSION=18+this.LEVEL_ERROR;this.ERR_WSSRV_MALLOC_FAILED=30+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_OPEN_FILE=31+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_WRITE_FILE=32+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_READ_FILE=33+this.LEVEL_ERROR;this.ERR_WSSRV_CANT_DELETE_FILE=34+this.LEVEL_ERROR;this.ERR_WSSRV_FATAL_ERROR=35+this.LEVEL_ERROR;this.ERR_WSSRV_INVALID_DP=36+this.LEVEL_ERROR;this.ERR_WSSRV_VERSION_ERROR=37+this.LEVEL_ERROR;this.ERR_WSSRV_FIELD_NAME_NOT_FOUND=38+this.LEVEL_ERROR;this.ERR_WSSRV_FAILED=39+this.LEVEL_ERROR;this.ERR_WSSRV_NOT_CONNECTED=40+this.LEVEL_ERROR;this.ERR_WSSRV_NOT_DISCONNECTED=41+this.LEVEL_ERROR;this.ERR_WSSRV_TIMED_OUT=48+this.LEVEL_ERROR;this.ERR_WSSRV_HTC_VERSION_MISMATCH=49+this.LEVEL_ERROR;this.ERR_WSSRV_ES_VERSION_MISMATCH=50+this.LEVEL_ERROR;this.ERR_WSSRV_ILON_CLOCK_MISMATCH=50+this.LEVEL_WARNING;this.ERR_WSSRV_INVALID_RESP=96+this.LEVEL_ERROR;this.ERR_WSSRV_ACCESS_DENIED=97+this.LEVEL_ERROR;this.ERR_WSSRV_XML_LOAD_FAILED_HOST=98+this.LEVEL_ERROR;this.ERR_WSSRV_XML_LOAD_FAILED_IP=99+this.LEVEL_ERROR;this.ERR_WSSRV_XML_LOAD_FAILED_FILE=100+this.LEVEL_ERROR;this.ERR_WSSRV_XML_LOAD_FAILED=101+this.LEVEL_ERROR;this.ERR_WSSRV_UNKNOWN_ERROR=255+this.LEVEL_ERROR;this.ERR_APP_BASE=512;this.ERR_SRVWARN_BASE=1024;this.ERR_SRVWARN_INVALID_INSTANCE=1025+this.LEVEL_WARNING;this.ERR_SRVWARN_INTERFACE_UNAVAIL=1026+this.LEVEL_WARNING;this.ERR_SRVWARN_DP_NAME_NOT_FOUND=1027+this.LEVEL_WARNING;this.ERR_APPWARN_BASE=1536;this.ERR_APPWARN_INTERFACE_UNAVAIL=1537+this.LEVEL_WARNING;this.ERR_WSCLI_BASE=2560;this.ERR_WSCLI_INVALID_ARG=2561+this.LEVEL_ERROR;this.ERR_WSCLI_SERVICE_UNAVAIL=2562+this.LEVEL_ERROR;this.ERR_WSCLI_UNKNOWN_FUNC=2563+this.LEVEL_ERROR;this.ERR_WSCLI_SOAP_UNAVAIL=2564+this.LEVEL_ERROR;this.ERR_WSCLI_INTERNAL_ERROR=2565+this.LEVEL_ERROR;this.ERR_WSCLI_INVALID_PORT=2566+this.LEVEL_ERROR;this.ERR_WSCLI_INVALID_HEADER=2567+this.LEVEL_ERROR;this.ERR_WSCLI_TIMEOUT=2568+this.LEVEL_ERROR;this.ERR_WSCLI_ACCESS_DENIED=2569+this.LEVEL_ERROR;this.ERR_WSCLI_OBJ_UNINITIALIZED=2570+this.LEVEL_ERROR;this.ERR_WSCLI_OUT_OF_SYNC=2571+this.LEVEL_ERROR;this.ERR_WSCLI_UNKNOWN_ENDPOINT=2572+this.LEVEL_ERROR;this.ERR_WSCLI_APP_UNINITIALIZED=2573+this.LEVEL_ERROR;this.ERR_WSCLI_OBJECT_NOT_FOUND=2574+this.LEVEL_ERROR;this.ERR_WSCLI_OBJECT_TYPE_NOT_FOUND=2575+this.LEVEL_ERROR;this.ERR_WSCLI_POST_MSG_VERSION=2576+this.LEVEL_ERROR;this.ERR_WSCLI_UNKNOWN_ERROR=2815+this.LEVEL_ERROR;this.ERR_JSXML_BASE=2816;this.ERR_JSXML_PARSE_ERROR=2817+this.LEVEL_ERROR;this.ERR_JSXML_BROWSER_UNSUPPORTED=2818+this.LEVEL_ERROR;this.ERR_JSXML_ACCESS_DENIED=2819+this.LEVEL_ERROR;this.ERR_JSXML_UNKNOWN_ERROR=3071+this.LEVEL_ERROR;this.ERR_COMMON_BASE=3072;this.ERR_COMMON_INIT_WS=3073+this.LEVEL_INFO;this.ERR_COMMON_SYNC_DATA=3074+this.LEVEL_INFO;this.ERR_COMMON_SUBMIT=3075+this.LEVEL_INFO;this.ERR_COMMON_GET_DP=3076+this.LEVEL_INFO;this.ERR_COMMON_ASK_DELETE_OBJ=3077+this.LEVEL_INFO;this.ERR_COMMON_WARN_LOG_CHANGE=3078+this.LEVEL_WARNING;this.ERR_COMMON_INVALID_ARG=3079+this.LEVEL_WARNING;this.ERR_COMMON_INVALID_ARG_STD=3080+this.LEVEL_ERROR;this.ERR_COMMON_ALL_DATAPOINTS_HIDDEN=3081+this.LEVEL_INFO;this.ERR_COMMON_DP_NOT_FOUND=3082+this.LEVEL_WARNING;this.ERR_COMMON_SELECT_FORMAT=3083+this.LEVEL_ERROR;this.ERR_COMMON_PRIORITY_TOO_LOW=3084+this.LEVEL_ERROR;this.ERR_COMMON_VALUE_FORMAT_ERROR=3085+this.LEVEL_ERROR;this.ERR_COMMON_PPP_DISCONNECT=3086+this.LEVEL_WARNING;this.ERR_COMMON_GPRS_PERSIST_DISCONNECT=3087+this.LEVEL_WARNING;this.ERR_COMMON_CANNOT_DELETE_DP=3088+this.LEVEL_ERROR;this.ERR_COMMON_GPRS_DISCONNECTING=3089+this.LEVEL_INFO;this.ERR_COMMON_SERIAL_CONFLICT_MBUS=3090+this.LEVEL_ERROR;this.ERR_COMMON_SERIAL_CONFLICT_MODBUS=3091+this.LEVEL_ERROR;this.ERR_COMMON_SERIAL_CONFLICT_DRIVERS=3092+this.LEVEL_ERROR;this.ERR_COMMON_SERIAL_CONFLICT_MBUSSES=3093+this.LEVEL_ERROR;this.ERR_COMMON_SERIAL_CONFLICT_MODBUSSES=3094+this.LEVEL_ERROR;this.ERR_COMMON_UNKNOWN_ERROR=3327+this.LEVEL_ERROR;this.ERR_STD_BASE=4096;this.ERR_STD_POLL_INTERVAL_INCREASE=4097+this.LEVEL_WARNING;this.ERR_STD_POLL_INTERVAL_DISPLAY=4098+this.LEVEL_INFO;this.ERR_TIS_BASE=4352;this.ERR_MOS_BASE=4608;this.ERR_SES_BASE=4864;this.ERR_SYS_BASE=5120;this.ERR_VES_BASE=5376;this.ERR_RES_BASE=5632;this.ERR_CUS_BASE=5888;this.ERR_LWN_BASE=6144;this.ERR_LON_BASE=6400;this.ERR_MBN_BASE=6656;this.ERR_AGC_BASE=6912;this.ERR_AGC_CONSTANT_FMT_ERROR=6913+this.LEVEL_ERROR;this.ERR_AGC_NON_SCALAR=6914+this.LEVEL_ERROR;this.ERR_ANC_BASE=7168;this.ERR_DLC_BASE=7424;this.ERR_DIC_BASE=7680;this.ERR_DOC_BASE=7936;this.ERR_ESC_BASE=8192;this.ERR_ESC_FINISHED_CONF_READ=8193+this.LEVEL_INFO;this.ERR_ESC_NO_SCHEDULER=8194+this.LEVEL_INFO;this.ERR_ESC_NO_CALENDAR=8195+this.LEVEL_INFO;this.ERR_ESC_BUILD_CALENDAR=8196+this.LEVEL_INFO;this.ERR_ESC_SCHEDULER_NOT_ACCESSIBLE=8197+this.LEVEL_INFO;this.ERR_ESC_ASK_DELETE_EXCEPTION=8198+this.LEVEL_INFO;this.ERR_ESC_ASK_CLEAN_UP_EXCEPTION=8199+this.LEVEL_INFO;this.ERR_ESC_ASK_CLEAN_UP_EXCEPTIONS=8200+this.LEVEL_INFO;this.ERR_ESC_ASK_DELETE_EXPIRED_EXCEPTION=8201+this.LEVEL_INFO;this.ERR_ESC_SCHEDULE_NOT_FOUND=8203+this.LEVEL_ERROR;this.ERR_ESC_READING_SCHEDULER_DAY=8207+this.LEVEL_INFO;this.ERR_ESC_READING_SCHEDULER=8208+this.LEVEL_INFO;this.ERR_ESC_READING_CALENDAR=8209+this.LEVEL_INFO;this.ERR_ESC_READING_SCHEDULER_FAILED=8210+this.LEVEL_ERROR;this.ERR_ESC_READING_CALENDAR_FAILED=8211+this.LEVEL_ERROR;this.ERR_ESC_DELETE_FAILED=8213+this.LEVEL_INFO;this.ERR_ESC_SEARCHING_SCHEDULE=8215+this.LEVEL_INFO;this.ERR_ESC_ASK_SEARCHING_SCHEDULE=8216+this.LEVEL_WARNING;this.ERR_ESC_ASK_EDIT_SCHEDULE=8217+this.LEVEL_WARNING;this.ERR_ESC_ASK_DELETE_SCHEDULE=8224+this.LEVEL_WARNING;this.ERR_ESC_UNKNOWN_ERROR=8218+this.LEVEL_ERROR;this.ERR_PCC_BASE=8448;this.ERR_DPC_BASE=8704;this.ERR_DPC_CANT_DELETE=8705+this.LEVEL_ERROR;this.ERR_DPC_REBUILD_TREE=8706+this.LEVEL_INFO;this.ERR_WBC_BASE=8960;this.ERR_ASV_BASE=9216;this.ERR_AHV_BASE=9472;this.ERR_DLV_BASE=9728;this.ERR_DPV_BASE=9984;this.ERR_DPV_PRIORITY_TOO_LOW=9985+this.LEVEL_ERROR;this.ERR_DPV_VALUE_FORMAT_ERROR=9986+this.LEVEL_ERROR;this.ERR_DPV_PRIORITY_FORMAT_ERROR=9987+this.LEVEL_ERROR;this.ERR_ESV_BASE=10240;this.ERR_MON_BASE=10496;this.ERR_MON_NETWORK_MAX=10497+this.LEVEL_ERROR;this.ERR_MON_RS232_MAX_LONG_MSG=10498+this.LEVEL_WARNING;this.ERR_MON_RS232_MAX_SHORT_MSG=10499+this.LEVEL_WARNING;this.ERR_MON_NO_DRIVER_ENTRIES=10500+this.LEVEL_INFO;this.ERR_AFC_BASE=10752;this.ERR_AFC_PRIORITY_TOO_LOW=10753+this.LEVEL_ERROR;this.ERR_AFC_WRONG_BASETYPE=10754+this.LEVEL_ERROR;this.ERR_AFC_COMP_FUNCTION_MISSING=10755+this.LEVEL_ERROR;this.ERR_VAL_BASE=12288;this.ERR_VAL_IP_SPACES=12289+this.LEVEL_ERROR;this.ERR_VAL_IPV4_SEGMENT=12290+this.LEVEL_ERROR;this.ERR_VAL_IP_ADDRESS=12291+this.LEVEL_ERROR;this.ERR_VAL_HOSTNAME_SPACES=12292+this.LEVEL_ERROR;this.ERR_VAL_FULL_HOSTNAME_TOO_SHORT=12293+this.LEVEL_ERROR;this.ERR_VAL_DOMAIN_SUFFIX_ENDING=12294+this.LEVEL_WARNING;this.ERR_VAL_DOMAIN_NAME=12295+this.LEVEL_ERROR;this.ERR_VAL_HOSTNAME=12296+this.LEVEL_ERROR;this.ERR_VAL_FIELDS_MARKED=12297+this.LEVEL_ERROR;this.ERR_VAL_IPV6_DISABLED=12304+this.LEVEL_WARNING;this.ERR_VAL_IPV6_PREFIX=12305+this.LEVEL_ERROR;this.ERR_VAL_IPV6_NOT_ALLOWED=12306+this.LEVEL_ERROR;this.ERR_VAL_IPV4_NOT_ALLOWED=12307+this.LEVEL_ERROR;this.ERR_VAL_FULL_HOSTNAMES_NOT_ALLOWED=12308+this.LEVEL_ERROR;this.ERR_VAL_SUBDOMAIN_NAMES_NOT_ALLOWED=12309+this.LEVEL_ERROR;this.ERR_CUSTOM_BASE=65280;this.ERR_ERR_MESSAGE=65281+this.LEVEL_ERROR;this.HTML_ERR_ERR_MESSAGE=65282+this.LEVEL_ERROR;this.ERR_WARN_MESSAGE=65281+this.LEVEL_WARNING;this.ERR_INFO_MESSAGE=65281+this.LEVEL_INFO;this.ERR_DEBUG_MESSAGE=65281+this.LEVEL_DEBUG};Echelon.ErrorTable.instance;Echelon.ErrorTable.getInstance=function(){if(Echelon.ErrorTable.instance==null){Echelon.ErrorTable.instance=new Echelon.ErrorTable()}return Echelon.ErrorTable.instance};Echelon.ErrorManager=function(){var g=Echelon.UtilObject.getInstance();var c=new Array();var h=new Array();var e=Echelon.ErrorTable.getInstance();var f=this;var d=15728640;this.setFaultVarString=function(j,i){var k=false;if(!isNaN(j)){c[j]=i;k=true}return k};this.buildFaultString=function(j,n){var m=h[e.LEVEL_ERROR]+"Unknown error";if(c[j]!=null){var i=f.getErrorLevel(j);if(h[i]!=null){m=h[i]}m+=c[j]}if(g.isSafe(n)){for(var k in n){var l=new RegExp("(%"+k+")","gi");m=m.replace(l,n[k])}}return m};var a=function(i,m){var l="Unknown error";if(c[i]!=null){l=c[i]}if(g.isSafe(m)){for(var j in m){var k=new RegExp("(%"+j+")","gi");l=l.replace(k,m[j])}}return l};this.createILonError=function(i){var j=null;if((g.isSafe(i))&&(g.isSafe(i.faultcode))&&(g.isSafe(i.faultstring))){var m=b(i.faultcode);switch(m){case e.ERR_WSSRV_FORMAT_ERROR:var k=i.faultstring.split(":");if(k.length>1){k=k[1].split("=");if(k.length>1){var l={prop:k[0],value:k[1]};j=Echelon.Error.getInstance(m,l)}}if(!g.isSafe(j)){j=Echelon.Error.getInstance(m);j.faultString=i.faultstring}break;case e.ERR_WSSRV_DP_NAME_NOT_FOUND:var k=i.faultstring.split(" ");if(k.length>1){var l={name:k[1]};j=Echelon.Error.getInstance(m,l)}break;case e.ERR_WSSRV_CANT_DELETE:var k=i.faultstring.split(": ");if(k.length>2){var l={ptName:i.UCPTpointName,appList:k[2]};j=Echelon.Error.getInstance(e.ERR_COMMON_CANNOT_DELETE_DP,l)}break;default:j=Echelon.Error.getInstance(m);j.faultString=a(m);break}}return j};this.getErrorLevel=function(i){return d&i};var b=function(i){var k=e.ERR_WSCLI_UNKNOWN_ERROR;var j=parseInt(i,10);if(!isNaN(j)){if(j==99999){k=e.ERR_WSCLI_UNKNOWN_ERROR}else{if(j==0){k=e.ERR_NONE}else{if(j==1024){k=e.ERR_AGC_NON_SCALAR}else{if(j<e.ERR_APP_BASE){k=e.LEVEL_ERROR+j}else{if(j<e.ERR_WSCLI_BASE){k=e.LEVEL_WARNING+j}}}}}}return k};h[e.LEVEL_SYSTEM_INFO]="SYSTEM INFO: ";h[e.LEVEL_FATAL_ERROR]="FATAL ERROR: ";h[e.LEVEL_ERROR]="ERROR: ";h[e.LEVEL_WARNING]="WARNING: ";h[e.LEVEL_INFO]="";h[e.LEVEL_DEBUG]="DEBUG: ";c[e.ERR_NONE]="No error";c[e.ERR_WSSRV_UNKNOWN_FUNC]="Unknown SmartServer function call";c[e.ERR_WSSRV_PARAMETER_ERROR]="Parameter error";c[e.ERR_WSSRV_XML_PARSER]="XML Parser error";c[e.ERR_WSSRV_TAG_MISSING]="XML Tag missing";c[e.ERR_WSSRV_INDEX_MISSING]="UCPTindex missing";c[e.ERR_WSSRV_INDEX_NOT_FOUND]="UCPTindex not found";c[e.ERR_WSSRV_INDEX_INVALID]="UCPTindex invalid";c[e.ERR_WSSRV_CANT_CREATE]="Cannot create item";c[e.ERR_WSSRV_CANT_DELETE]="Cannot delete item";c[e.ERR_WSSRV_CANT_SET]="Cannot set item";c[e.ERR_WSSRV_FORMAT_ERROR]="Invalid format for property%prop: %value";c[e.ERR_WSSRV_COMMAND_FAILED]="Command failed";c[e.ERR_WSSRV_WRONG_DP_INDEX]="Given Data Point name doesn't have the given UCPTindex";c[e.ERR_WSSRV_DP_NAME_NOT_FOUND]="Data Point %name not found";c[e.ERR_WSSRV_NO_DATA]="No Data";c[e.ERR_WSSRV_OUT_OF_MEMORY]="Server is out of memory";c[e.ERR_WSSRV_BUSY]="Server process is busy";c[e.ERR_WSSRV_WRONG_VERSION]="Incorrect SOAP version sent to server";c[e.ERR_WSSRV_MALLOC_FAILED]="Memory allocation operation failed on the server";c[e.ERR_WSSRV_CANT_OPEN_FILE]="Unable to open requested file on the server";c[e.ERR_WSSRV_CANT_WRITE_FILE]="Unable to write to specified file on the server";c[e.ERR_WSSRV_CANT_READ_FILE]="Unable to read specified file on the server";c[e.ERR_WSSRV_CANT_DELETE_FILE]="Unable to delete specified file from the server";c[e.ERR_WSSRV_FATAL_ERROR]="A fatal error occurred on the server";c[e.ERR_WSSRV_INVALID_DP]="Attempt to access an invalid or offline Data Point failed";c[e.ERR_WSSRV_VERSION_ERROR]="Version error";c[e.ERR_WSSRV_FIELD_NAME_NOT_FOUND]="Field name was not found";c[e.ERR_WSSRV_FAILED]="Server failure";c[e.ERR_WSSRV_NOT_CONNECTED]="Server cannot connect to remote resource";c[e.ERR_WSSRV_NOT_DISCONNECTED]="Server cannot disconnect from remote resource";c[e.ERR_WSSRV_TIMED_OUT]="Server timed out while performing requested operation";c[e.ERR_WSSRV_HTC_VERSION_MISMATCH]="A critical file used for communication with the SmartServer has an invalid version.\n\nTo correct this problem:\n1) Ensure that you have copied the complete web directory to your SmartServer.\n\n2) Clear the cache of Internet Explorer by following these steps:\n  -- Go to the Tools menu\n  -- Select Internet Options...\n  -- Click on the Delete Files... button in the General tab\n  -- Click OK in the Delete Files dialog\n  -- Close all instances of Internet Explorer and start it again";c[e.ERR_WSSRV_ES_VERSION_MISMATCH]="The version number of this SmartServer does not match the version number of the installed web pages.\n\nTo correct this problem:\n1) Ensure that you have copied the complete web directory and embedded image to your SmartServer.\n\n2) After installing the SmartServer software make sure that you reboot the device.\n\n3) Clear the cache of Internet Explorer by following these steps:\n  -- Go to the Tools menu\n  -- Select Internet Options...\n  -- Click on the Delete Files... button in the General tab\n  -- Click OK in the Delete Files dialog\n  -- Close all instances of Internet Explorer and start it again";c[e.ERR_WSSRV_ILON_CLOCK_MISMATCH]="The clock of this SmartServer is more than one hour different than\nyour PC. It is recommended that you synchronize the clocks of these devices. All\nfunctionality of the SmartServer clock may be configured on the Setup Time web page.\n\nPC Time:\t\t%pcTime\nSmartServer Time:\t%ilonTime\n\nPC Time (UTC):\t\t%UtcPcTime\nSmartServer Time (UTC):\t%UtcIlonTime";c[e.ERR_WSSRV_INVALID_RESP]="Invalid response from server";c[e.ERR_WSSRV_ACCESS_DENIED]="Access is denied by server";c[e.ERR_WSSRV_XML_LOAD_FAILED_HOST]="Unable to contact %hostname, host name could be invalid or unreachable";c[e.ERR_WSSRV_XML_LOAD_FAILED_IP]="Unable to contact %hostname, IP address could be invalid or unreachable";c[e.ERR_WSSRV_XML_LOAD_FAILED_FILE]="The Web Service interface of %hostname was not recognized";c[e.ERR_WSSRV_XML_LOAD_FAILED]="Unable to contact %hostname, %error";c[e.ERR_WSSRV_UNKNOWN_ERROR]="Web Service Server-side unknown error";c[e.ERR_SRVWARN_INVALID_INSTANCE]="Current configuration for this instance is invalid";c[e.ERR_SRVWARN_INTERFACE_UNAVAIL]="Requested application interface is unavailable";c[e.ERR_SRVWARN_DP_NAME_NOT_FOUND]="Data Point name not found; Data Point has been created with the given name";c[e.ERR_APPWARN_INTERFACE_UNAVAIL]="Requested application interface is unavailable";c[e.ERR_WSCLI_INVALID_ARG]="Invalid argument to SOAP client";c[e.ERR_WSCLI_SERVICE_UNAVAIL]="Web Service unavailable";c[e.ERR_WSCLI_UNKNOWN_FUNC]="Function not defined in WSDL file";c[e.ERR_WSCLI_SOAP_UNAVAIL]="SOAP unavailable";c[e.ERR_WSCLI_INTERNAL_ERROR]="IE internal web service error";c[e.ERR_WSCLI_INVALID_PORT]="Invalid SOAP port specified";c[e.ERR_WSCLI_INVALID_HEADER]="Invalid SOAP Header";c[e.ERR_WSCLI_TIMEOUT]="Client timed out waiting for response from server";c[e.ERR_WSCLI_ACCESS_DENIED]="Access to remote resource denied by web browser";c[e.ERR_WSCLI_OBJ_UNINITIALIZED]="JavaScript application object is not initialized";c[e.ERR_WSCLI_OUT_OF_SYNC]="Configuration is out of sync, resyncing data...";c[e.ERR_WSCLI_UNKNOWN_ENDPOINT]="The SOAP endpoint for this host is not supported";c[e.ERR_WSCLI_APP_UNINITIALIZED]="The requested application object is uninitialized";c[e.ERR_WSCLI_OBJECT_NOT_FOUND]="The requested object was not found";c[e.ERR_WSCLI_OBJECT_TYPE_NOT_FOUND]="The requested object type is unknown";c[e.ERR_WSCLI_POST_MSG_VERSION]="Client can't reach cross domain host, possibly due to version conflict; make sure remote host is at least SmartServer 2";c[e.ERR_WSCLI_UNKNOWN_ERROR]="Web Service Client-side unknown error";c[e.ERR_JSXML_PARSE_ERROR]="General XML parse error";c[e.ERR_JSXML_BROWSER_UNSUPPORTED]="Browser components must be updated to support a built in XML parser";c[e.ERR_JSXML_ACCESS_DENIED]="Browser preferences must be changed to allow creation of XML parser object";c[e.ERR_JSXML_UNKNOWN_ERROR]="JavaScript XML Parser Engine unknown error";c[e.ERR_COMMON_INIT_WS]="Please wait, connecting to SmartServer web service...";c[e.ERR_COMMON_SYNC_DATA]="Please wait, synchronizing data...";c[e.ERR_COMMON_SUBMIT]="Please wait, submitting changes...";c[e.ERR_COMMON_GET_DP]="Please wait, getting Data Point information...";c[e.ERR_COMMON_ASK_DELETE_OBJ]="Are you sure you want to delete %obj ?";c[e.ERR_COMMON_WARN_LOG_CHANGE]="Changing the log format or size may cause data loss!";c[e.ERR_COMMON_INVALID_ARG]="Passed argument '%arg'' = '%val' cannot be selected, using default value.";c[e.ERR_COMMON_INVALID_ARG_STD]="Passed argument '%arg' = '%val' not availible, cannot select instance";c[e.ERR_COMMON_SELECT_FORMAT]="You must select a Data Point using the '%format' format";c[e.ERR_COMMON_ALL_DATAPOINTS_HIDDEN]="All Data Points are currently hidden";c[e.ERR_COMMON_DP_NOT_FOUND]="One or more Data Point(s) may have been deleted";c[e.ERR_COMMON_PRIORITY_TOO_LOW]="This page does not have sufficient priority to write to some of these Data Points";c[e.ERR_COMMON_VALUE_FORMAT_ERROR]="Marked Data Point values were not formatted properly";c[e.ERR_COMMON_PPP_DISCONNECT]="In order for changes to the SmartServer network configuration to take\neffect, any open modem connections must be closed manually.";c[e.ERR_COMMON_GPRS_PERSIST_DISCONNECT]="In order for changes to the SmartServer network configuration to take effect,\nyour Persistent GPRS connection must be temporarily disconnected.\n\nClick OK, to force the modem to disconnect now.\n\nClick Cancel to leave the modem in its current state.\n\nPlease note that if you click Cancel now, you must reboot for the changes to take effect.";c[e.ERR_COMMON_CANNOT_DELETE_DP]="Cannot delete %ptName, because it is used by: %appList";c[e.ERR_COMMON_GPRS_DISCONNECTING]="Persistent GPRS connection will now be disconnected for up to two minutes";c[e.ERR_COMMON_SERIAL_CONFLICT_MBUS]="Resource conflict: External modem and M-Bus driver configured";c[e.ERR_COMMON_SERIAL_CONFLICT_MODBUS]="Resource conflict: External modem and MODBUS driver RS-232 configured";c[e.ERR_COMMON_SERIAL_CONFLICT_DRIVERS]="Resource conflict: MODBUS driver RS-232 mode and M-Bus driver configured";c[e.ERR_COMMON_SERIAL_CONFLICT_MBUSSES]="Resource conflict: Two or more M-Bus drivers are configured to use the RS-232 port.";c[e.ERR_COMMON_SERIAL_CONFLICT_MODBUSSES]="Resource conflict: Two or more MODBUS drivers are configured to use the RS-232 port.";c[e.ERR_COMMON_UNKNOWN_ERROR]="Unknown error";c[e.ERR_STD_POLL_INTERVAL_INCREASE]="Communication problems have been detected; new polling interval is %pollInt seconds";c[e.ERR_STD_POLL_INTERVAL_DISPLAY]="Polling interval: %pollInt s";c[e.ERR_AGC_CONSTANT_FMT_ERROR]="Invalid value entered for %fbName constant";c[e.ERR_AGC_NON_SCALAR]="Input data points must be both scalar types when using limits. Using FN_EQ instead now!";c[e.ERR_ESC_FINISHED_CONF_READ]="Finished reading Event Scheduler configuration";c[e.ERR_ESC_NO_SCHEDULER]="No Schedulers defined";c[e.ERR_ESC_NO_CALENDAR]="No Calendar defined";c[e.ERR_ESC_BUILD_CALENDAR]="Please wait, building Calendar...";c[e.ERR_ESC_SCHEDULER_NOT_ACCESSIBLE]="Scheduler application not accessible";c[e.ERR_ESC_ASK_DELETE_EXCEPTION]="The Exception '%name' might be used in a Schedule! Do you really want to delete it from the Calendar?";c[e.ERR_ESC_ASK_CLEAN_UP_EXCEPTION]="Do you want references to Exception '%name' to be cleaned up in all Schedules?\n (Warning: This could take several minutes!)";c[e.ERR_ESC_ASK_CLEAN_UP_EXCEPTIONS]="Your Calendar configuration changed! Do you want references to be cleaned up in all Schedules?\n (Warning: This could take several minutes!)";c[e.ERR_ESC_ASK_DELETE_EXPIRED_EXCEPTION]="The Exception '%name' will never occur again. Do you want to delete it from the Calendar?";c[e.ERR_ESC_SCHEDULE_NOT_FOUND]="Specified Event Scheduler not found, please reload page";c[e.ERR_ESC_READING_SCHEDULER_DAY]="Please wait, getting Scheduler information for this day ...";c[e.ERR_ESC_READING_SCHEDULER]="Please wait, getting Scheduler information ...";c[e.ERR_ESC_READING_CALENDAR]="Please wait, getting Calendar information ...";c[e.ERR_ESC_READING_SCHEDULER_FAILED]="Problem reading Scheduler: %error";c[e.ERR_ESC_READING_CALENDAR_FAILED]="Problem reading Calendar: %error";c[e.ERR_ESC_DELETE_FAILED]="No %obj left to delete";c[e.ERR_ESC_SEARCHING_SCHEDULE]="Please wait, searching from %start until %stop ...";c[e.ERR_ESC_ASK_SEARCHING_SCHEDULE]="Schedule not active in the months currently displayed. Should the next occurance be determined?\n (Note: This could take several minutes)";c[e.ERR_ESC_ASK_EDIT_SCHEDULE]="This Schedule will never be executed again, do you want to edit it?";c[e.ERR_ESC_ASK_DELETE_SCHEDULE]="This Schedule will never be executed again, do you want to delete it?";c[e.ERR_ESC_UNKNOWN_ERROR]="Event Scheduler Configuration unknown error";c[e.ERR_DPC_CANT_DELETE]="The following Data Points could not be deleted:\n";c[e.ERR_DPC_REBUILD_TREE]="Please wait, rebuilding tree...";c[e.ERR_DPV_PRIORITY_TOO_LOW]="Marked Data Point priority values were too low";c[e.ERR_DPV_VALUE_FORMAT_ERROR]="Marked Data Point values were not formatted properly";c[e.ERR_DPV_PRIORITY_FORMAT_ERROR]="Marked Data Point priorities were not formatted properly";c[e.ERR_MON_NETWORK_MAX]="Only one network node is supported in the MODBUS driver";c[e.ERR_MON_RS232_MAX_LONG_MSG]="The MODBUS protocol only supports one device under RS-232 mode. Configured\ndevices may remain in the driver, but it is recommended that you remove all\nunused devices or save them in the Template library.";c[e.ERR_MON_RS232_MAX_SHORT_MSG]="Communication with some devices may fail, only one device is supported under RS-232 mode.";c[e.ERR_MON_NO_DRIVER_ENTRIES]="No driver entries defined";c[e.ERR_AFC_WRONG_BASETYPE]="All Points have to have a scalar format or the same base type (if you want to use structs)";c[e.ERR_AFC_PRIORITY_TOO_LOW]="This page does not have sufficient priority to write to the AFBDropOut Data Point";c[e.ERR_AFC_COMP_FUNCTION_MISSING]="You have to define a Compare function";c[e.ERR_VAL_IP_SPACES]="Spaces are not permitted in IP addresses.";c[e.ERR_VAL_IPV4_SEGMENT]="Each IP address segment must be between 0 and 255.";c[e.ERR_VAL_IP_ADDRESS]="The IP address is not valid.";c[e.ERR_VAL_HOSTNAME_SPACES]="Spaces are not permitted in Hostnames.";c[e.ERR_VAL_FULL_HOSTNAME_TOO_SHORT]="The hostname is too short. To use this hostname, you must enter a domain name suffix on the LAN / WAN page using the i.LON SmartServer node.";c[e.ERR_VAL_DOMAIN_SUFFIX_ENDING]="Domain names should typically end in a well-known domain suffix or two letter country code.";c[e.ERR_VAL_DOMAIN_NAME]="The domain name is invalid.";c[e.ERR_VAL_HOSTNAME]="The hostname is invalid.";c[e.ERR_VAL_FIELDS_MARKED]="Invalid data entered in marked fields";c[e.ERR_VAL_IPV6_DISABLED]="An IPv6 address was found in the configuration, but the IPv6 protocol stack has been disabled.";c[e.ERR_VAL_IPV6_PREFIX]="Prefix values for IPv6 addresses must be between 0 and 128.";c[e.ERR_VAL_IPV6_NOT_ALLOWED]="IPv6 addresses are not allowed in this context.\nEither the IPv6 protocol stack has been disabled\nor you try to use IPv6 over PPP.";c[e.ERR_VAL_IPV4_NOT_ALLOWED]="IPv4 addresses are not allowed in this context.";c[e.ERR_VAL_FULL_HOSTNAMES_NOT_ALLOWED]="Full hostnames are not allowed in this context.";c[e.ERR_VAL_SUBDOMAIN_NAMES_NOT_ALLOWED]="Subdomain names are not allowed in this context.";c[e.ERR_ERR_MESSAGE]="%msg";c[e.HTML_ERR_ERR_MESSAGE]="%msg";c[e.ERR_WARN_MESSAGE]="%msg";c[e.ERR_INFO_MESSAGE]="%msg";c[e.ERR_DEBUG_MESSAGE]="%msg"};Echelon.ErrorManager.instance;Echelon.ErrorManager.getInstance=function(){if(Echelon.ErrorManager.instance==null){Echelon.ErrorManager.instance=new Echelon.ErrorManager()}return Echelon.ErrorManager.instance};Echelon.View=elon.Class({constructor:function(a){if(a==null){throw new Error('Tried to instantiate "View" without arguments')}if(a.domObj==null){this.f_createDomObj(a)}if(a.parentView){this.parentView=a.parentView;if(!a.nls){a.nls=a.parentView.argObj.nls}if(!a.elon_soap_url){a.elon_soap_url=a.parentView.argObj.elon_soap_url}}if(a.hrefParamsIncluded==null&&!a.elon_soap_url){a.elon_soap_url=elon.getSoapUrl(a,window)}this.argObj=a;this.domObj=a.domObj;this.doc=a.domObj.ownerDocument;this.Obj=a.domObj;this.eventFunctionsArr=new Array();this.m_disableRange=(this.argObj.elon_disable_range!=null)?this.argObj.elon_disable_range.toLowerCase():"everything";this.f_sso=Echelon.SoapServerObject.getInstance(this.f_getSoapIp());if(a.auth){elon.util.auth(this.f_sso.getUrl(),a.auth)}},"public":{setID:function(a){this.Obj.id=a},webDpName:function(b,a){var e;var c;switch(b){case"global":break;case"frame":c=elon.dom.getDefaultView(this.domObj);break;case"container":break;case"unique":c=this.domObj;if(!this.m_idCounter){this.m_idCounter=0}var d=this.m_idCounter++;break;case"this":c=this.domObj;break;default:throw new Error('Unsupport WebDp scope "'+b+'"')}if(c){e=c.id||(c.id="ViewAutoId_"+(Echelon.View.m_idCounter++))}return"#Web/"+b+"/"+a+(e?("/"+e):"")+(d?(","+d):"")},inverseWebDpName:function(b,a){switch(this.argObj.webDpNameScope){case"global":return a.match(/^#Web\/global\/([^\/]*)$/)[1];case"container":return a.match(/^#Web\/container\/([^\/]*)$/)[1];case"frame":return a.match(/^#Web\/frame\/([^\/]*)\/\w+$/)[1];case"this":return a.match(/^#Web\/this\/([^\/]*)\/\w+$/)[1];case"unique":return a.match(/^#Web\/unique\/([^\/]*)\/\w+,\w+$/)[1];default:throw new Error('Unsupport WebDp scope "'+b+'"')}},f_registerWebDps:function(d){for(var b=0;b<d.length;b++){var f=d[b][0];var c=d[b][1];var e=d[b][2];var a=this.argObj[f];if(a){this["m_"+f]=this.f_sso.getItem({Item:a,type:c});if(e){this.f_sso.subscribe({type:c,Item:a,callback:e})}}}},hide:function(){this.Obj.style.display="none"},show:function(){this.Obj.style.display=""},setDisabled:function(a){this.f_disableUI(a,"External")},f_getSoapIp:function(){return this},getWindow:function(){return elon.dom.getDefaultView(this.argObj.domObj.ownerDocument)},moveTo:function(a,b){this.Obj.style.left=elon.util.addPx(a);this.Obj.style.top=elon.util.addPx(b)},catchEvent:function(a){a=(a)?a:window.event;if(a.returnValue){a.returnValue=false}else{if(a.preventDefault){a.preventDefault()}else{return false}}},"callback:translate":function(a,b){return(b&&this.argObj.nls&&this.argObj.nls[a])?elon.util.substitutePlaceholders(this.argObj.nls[a],b):((this.argObj.nls&&this.argObj.nls[a])||a)},addEvent:function(a,b){var c=elon.UtilObject.getInstance();if(c.isUndf(this["on"+a])){c.addEvent(this.Obj,a,this.defaultEventHandler,false);this["on"+a]="defaultEventHandler"}if(!c.isSafe(this.eventFunctionsArr)){this.eventFunctionsArr=new Array()}if(!c.isSafe(this.eventFunctionsArr[a])){this.eventFunctionsArr[a]=new Array()}this.eventFunctionsArr[a][this.eventFunctionsArr[a].length]=b},removeEvent:function(b,c){var d=elon.UtilObject.getInstance();if(this.eventFunctionsArr&&this.eventFunctionsArr[b]){for(var a=0;a<this.eventFunctionsArr[b].length;a++){if(this.eventFunctionsArr[b][a]==c){this.eventFunctionsArr.splice(a,1);if(this.eventFunctionsArr.length==0){d.removeEvent(this.Obj,b,c,false);delete this["on"+b]}return true}}}return false},callEventFunctions:function(a){a=(a)?a:window.event;if(this.eventFunctionsArr[a.type]!=null){for(var b=0;b<this.eventFunctionsArr[a.type].length;b++){elon.ExceptionHandler().call(this.eventFunctionsArr[a.type][b],[a],this)}}},"callback:defaultEventHandler":"callEventFunctions",loadNls:function(b,c,a){Echelon.NlsManagerObject.getInstance(this.f_sso,this).loadNls(elon.rootUrl("nls/echelon/"+b),c,a)},f_enableUI:function(b,c,a){if(b==false){this.f_disableUI(true,c)}else{elon.elon.enableUI(this,a||this.m_disableRange,c)}},f_disableUI:function(b,c,a){if(b==false){this.f_enableUI(true,c)}else{elon.elon.disableUI(this,a||this.m_disableRange,c)}},disableSpecifics:function(a){},f_createPopup:function(a){a.elon_no_scrolling=true;this.m_addSoapURL(a);return elon.Popup.getInstance(a)},f_followLink:function(a){this.m_addSoapURL(a);a.sourceWindow=elon.dom.getDefaultView(this.domObj);return elon.elon.followLink(a)},f_confirm:function(c,j,h,d,b,f){var g={name:"Confirm",type:"BoolItem",callback:this.m_confirmCallback(j),callOnCancel:true,elon_args_obj:{elon_symbol:d||elon.imgUrl("Confirm.gif"),elon_nls_title:h||"CONFIRM"}};if(b){g.elon_args_obj.elon_yes_no=true}if((typeof(c)=="object")&&c.UCPTname){g.elon_args_obj.elon_msg_dp=c.UCPTname.get()}else{var a=this.webDpName("unique","confirmMsg");this.f_sso.getItem({type:"StringItem",Item:a,"volatile":true}).value.set(c);g.elon_args_obj.elon_msg_dp=a}for(var e in f){g.elon_args_obj[e]=f[e]}this.f_createCbPopup(g)},f_createCbPopup:function(b){var a={elon_url:elon.htmUrl("")+b.name+".htm",elon_args_obj:b.elon_args_obj||{}};if(!a.elon_args_obj.elon_name){a.elon_args_obj.elon_name=this.webDpName("unique",name)}a.elon_args_obj.elon_cancel_type=b.type;this.f_createPopup(a);this.f_sso.subscribe({type:b.type,Item:a.elon_args_obj.elon_name,callback:b.callOnCancel?b.callback:this.m_CancelCB(b.callback),callOnCancel:b.callOnCancel,noInitialCallback:true,mute:true,clear:!b.noClear,unmute:true,singular:true})},f_resize:function(){var b=elon.dom.getDefaultView(this.domObj.ownerDocument);if(b&&b.frameElement&&b.frameElement.tagName&&b.frameElement.tagName.toUpperCase()=="IFRAME"){var a=elon.Popup.getExistingInstance(this.domObj.ownerDocument);if(a){a.adjust()}}},createDomObj:function(a){return a.createElement("span")}},"protected":{f_createDomObj:function(a){if(a.parentDomObj){a.domObj=this.createDomObj(a.parentDomObj.ownerDocument,a);if(elon.browser.IE678||(!a.domObj.parentNode&&(a.domObj!=a.parentDomObj))){a.parentDomObj.appendChild(a.domObj)}}else{if(a.document){a.domObj=this.createDomObj(a.document,a)}else{throw new Error('Tried to instantiate "View" without argObj.domObj.\nMaybe v3.0 syntax?\nUse View.call(this, {"domObj": domObj})')}}}},"private":{"static:m_idCounter":0,"nest:m_CancelCB":elon.Class({constructor:["m_cb"],closure:function(a){if(!a.cancelled.get()){this.m_cb(a)}}}),m_confirmCallback:elon.Class({constructor:["m_cb"],closure:function(a){this.m_cb(a.cancelled.get()?null:a.value.get())}}),m_addSoapURL:function(a){if(a.elon_args_obj==null){a.elon_args_obj=new Object()}if(this.argObj.elon_lang&&!a.elon_args_obj.elon_lang){a.elon_args_obj.elon_lang=this.argObj.elon_lang}if(this.argObj.elon_soap_url){if(a.elon_args_obj.elon_soap_url==null){a.elon_args_obj.elon_soap_url=this.argObj.elon_soap_url}}}}});Echelon.viewObject=new elon.Class.Backport(elon.View);elon.filter.nullToBoolStr=function(a){return(a==null)?"false":"true"};elon.filter.boolStrToNull=function(b,a){return(b=="true")?a:null};elon.filter.boolStrToBool=function(a){return(a=="true")?true:false};elon.filter.notBoolStr=function(a){return(a=="true")?"false":"true"};elon.filter.not=function(a){return !a};elon.filter.isNull=function(a){return a==null};Echelon.ComplexView=elon.Class({base:{m_view:Echelon.View},prerequisites:{style:["echelon/Table"]},constructor:function(a){this.m_view(a);this.f_cb=new (elon.CallbackManager)(this);this.f_webDpPrefix=this.argObj.webDpNameScope?this.webDpName(this.argObj.webDpNameScope,""):"#Web/global/"+(this.argObj.webDpPrefix||"dpc")},"protected":{f_but:function(c,a,b){return this.m_formObj("Button",c,a,{elon_options:b})},f_box:function(c,a,b){return this.m_formObj("Checkbox",c,a,{elon_options:b})},f_rad:function(c,a,b,d){return this.m_formObj("Radiobutton",c,a,{elon_options:b,elon_inline:(d==false)?false:true})},f_val:function(c,a,b){return this.m_formObj("ShowValue",c,a,{elon_options:b})},f_sel:function(c,a,b){return this.m_formObj("Selection",c,a,{elon_options:b})},f_csl:function(c,a,b){return this.m_formObj("ComboBox",c,a,{elon_options:b,selectOnly:true})},f_lsl:function(b,a,c){return this.m_formObj("LazySelection",b,a,{optionsCB:c})},f_lcb:function(b,a,c){return this.m_formObj("LazyComboBox",b,a,{optionsCB:c})},f_pwd:function(b,a,c){return this.m_formObj("Passwordfield",b,a,{elon_value_type:c})},f_ipe:function(b,a){return this.m_formObj("IpEntry",b,a)},f_tar:function(b,a,c,d){return this.m_formObj("Textarea",b,a,{rows:c,elon_value_type:d})},f_img:function(b,a){return this.m_formObj("Image",b,a)},f_ims:function(c,b,a){return this.m_formObj("ImageSwapper",c,b,{m_height:a})},f_bit:function(b,a){return this.m_formObj("Bitfield",b,null,a)},f_com:function(c,a,b,d){return this.m_formObj("ComboBox",c,a,{elon_options:b,valType:d})},f_cop:function(c,a,b,d){return this.m_formObj("ComboBoxPopup",c,a,{elon_options:b,popupStarter:d})},f_pop:function(b,a,d,c){return this.m_formObj("PopupSelector",b,a,{popupStarter:d,valType:c})},f_dvt:function(c,b,d,a){if(!a){a={elon_value_type:d}}else{a.elon_value_type=d}return this.m_formObj("DpValueTextfield",c,b,a)},f_txt:function(c,b,e,a,f,d){return this.m_formObj("Textfield",c,b,{elon_value_type:e,maxLength:a,defaultValue:f,rewriter:d})},f_lbr:function(){return this.argObj.domObj.ownerDocument.createElement("br")},f_pwb:function(b,a){return this.f_controlButton("CHANGE_PASSWORD",this.m_PasswordButtonHandler(b),b)},f_controlButton:function(b,d,a){var c=elon.viewButtonObject.getInstance({document:this.domObj.ownerDocument,elon_webdpname:a&&this.f_webDpName(a)});c.setLabel(this.translate(b));c.detachLableFromValue();c.domObj.className="ControlButton";c.addEvent("click",d);return c},f_bind:function(j,b,g,e,f,h,a,i,c,d){this.f_sso.createBinding({source:{type:j,Item:this.f_webDpName(b),field:g},target:{type:f,Item:this.f_webDpName(h),field:a},filter:e});if(c){this.f_sso.createBinding({source:{type:f,Item:this.f_webDpName(h),field:a},target:{type:j,Item:this.f_webDpName(b),field:g},filter:i,conditional:d})}},f_bindBoxTxt:function(b,a,c){this.f_bind("FormObj_Data",a,"value","nullToBoolStr","FormObj_Data",b,"value",this.m_BoolStrToNull(c),true);this.f_sso.createBinding({source:this.f_bindingArg(a),target:this.f_bindingArg(a,"disabled"),filter:"isNull"})},f_bindValue:function(c,d,b,a){this.f_bind("FormObj_Data",c,"value",d,"FormObj_Data",b,"value",a,true);this.f_bind("FormObj_Data",c,"value.multiple",null,"FormObj_Data",b,"value.multiple",null,true)},f_webDpName:function(a){return this.argObj.webDpNameScope?this.webDpName(this.argObj.webDpNameScope,a):(this.f_webDpPrefix+a)},f_inverseWebDpName:function(a){if(this.argObj.webDpNameScope){return this.inverseWebDpName(this.argObj.webDpNameScope,a)}else{return a.replace(this.f_webDpPrefix,"")}},m_fieldObj:function(d,a,c){var e={type:"FormObj_"+d,Item:this.f_webDpName(a)};for(var b in c){e[b]=c[b]}return e},f_fieldArg:function(a,b){return this.m_fieldObj("Data",a,b)},f_fieldCfgArg:function(a,b){return this.m_fieldObj("Cfg",a,b)},f_fieldItem:function(a){return this.f_sso.getItem(this.f_fieldArg(a))},f_fieldCfg:function(a){return this.f_sso.getItem(this.f_fieldCfgArg(a))},f_bindingArg:function(a,b){return{type:"FormObj_Data",Item:this.f_webDpName(a),field:b||"value"}},f_append:function(a,b){return(b||this.argObj.canvas||this.domObj).appendChild(a.domObj||a)},f_elem:function(c,b){var d=this.domObj.ownerDocument.createElement(c);if(b){b=b.split(" ");for(var a=0;a<b.length;a++){elon.util.addClassName((this.argObj.classNamePrefix||"")+b[a],d)}}return d},f_elemApp:function(c,b,a){return this.f_append(this.f_elem(c,b),a)},f_text:function(a,c){var b=this.f_elem("span",c);b.innerHTML=a;return b},f_textApp:function(b,c,a){return this.f_append(this.f_text(b,c),a)},f_nlsText:function(c,a,b){return this.f_text(this.translate(c,a),b)},f_nlsTextApp:function(d,b,c,a){return this.f_append(this.f_nlsText(d,b,c),a)},f_vSpace:function(a){for(var b=0;b<a;b++){this.f_append(this.f_elem("br"))}},f_table:function(b,e,d,c){var a=new Echelon.dom.getDefaultView(this.argObj.domObj.ownerDocument).Echelon.ArrayTable(this.argObj.canvas||this.argObj.domObj,b,[[e,this.translate("VALUE")]].concat(d));if(!this.m_f_tables){this.m_f_tables=[]}if(c){this.m_f_tables[c]=a}else{this.m_f_tables.push(a)}return a},f_hideRow:function(b,a){this.m_rowVisibility(b,a,"none")},f_showRow:function(b,a){this.m_rowVisibility(b,a,"")},"callback:f_localizeOpts":function(e){var a=this.argObj.nls;var c={};for(var d in e){c[d]={};for(var b in e[d]){c[d][this.translate(b)]=e[d][b]}}return c},"callback:f_changeTypeCB":function(){if(this.m_seoColl&&this.m_seoColl.Item&&this.m_seoColl.Item.length){this.argObj.typeSelectorArgs.elon_soap_url=this.m_seoColl.Item[0].r_proxy_url}this.argObj.typeSelectorArgs.elon_symbol=elon.filter.qualifierToMediumIcon(this.f_fieldItem("UCPTannotation").value.get(),this.argObj.typeSelectorArgs.elon_item_type);this.f_createPopup({elon_url:elon.htmUrl("TypeSelector.htm"),elon_args_obj:this.argObj.typeSelectorArgs})},"callback:f_getFormatVariants":function(a){var b=this.f_fieldItem("UCPTformatDescription").value.get().match(/^#?[^#]+/)[0];if(!this.m_formatOpts){this.m_formatOpts={}}if(this.m_formatOpts[b]){return a(this.m_formatOpts[b])}this.f_sso.List({xSelect:'//Item[@xsi:type="TemplateManager_Cfg"][starts-with(UCPTname,"'+b+'")][UCPTformatType="'+(this.f_formatType||"NV")+'T"]',callback:this.m_ListFormatVariantsCB(a,b)})},f_startField:function(a){elon.util.fireQuickCallback(function(){try{a.focus()}catch(b){}})}},"private":{m_rowVisibility:function(b,a,c){((a&&a.domObj)||this.m_f_tables[a||0].domObj).tBodies[0].rows[b].style.display=c;((a&&a)||this.m_f_tables[a||0]).fixTableColor()},m_formObj:function(f,d,c,b){var g={type:f,document:this.domObj.ownerDocument,elon_webdpname:this.f_webDpName(d),elon_inline:true,nls:this.argObj.nls,id:this,mode:(b&&b.elon_options&&b.elon_options.mode)||"DP",elon_soap_url:this.f_sso.getUrl()};if(this.argObj.elon_highlight_submit!=null){g.elon_highlight_submit=this.argObj.elon_highlight_submit}if(this.argObj.elon_lang){g.elon_lang=this.argObj.elon_lang}for(var e in b){g[e]=b[e]}if(c==null||typeof c=="number"){g.style={};if(c){g.style.width=elon.util.addPx(c)}if(b&&b.m_height){g.style.height=elon.util.addPx(b.m_height)}var a=elon.Form.factory(g);if(b&&b.maxLength){a.domObj.maxLength=b.maxLength}return a}var a=elon.Form.factory(g);if(typeof c=="object"){this.m_applyProps(a.Obj,c)}if(b&&b.maxLength){a.domObj.maxLength=b.maxLength}if(f=="Button"){a.domObj.className="ControlButton"}return a},m_applyProps:function(a,c){for(var b in c){if(typeof c[b]=="object"){this.m_applyProps(a[b],c[b])}else{a[b]=c[b]}}},"nest:m_BoolStrToNull":elon.Class({constructor:["m_default"],closure:function(c,a){var b=null;if(c=="true"){b=(a==null)?this.m_default:a}if(a!=null){this.m_default=a}return b}}),"nest:m_ListFormatVariantsCB":elon.Class({constructor:["m_cb","m_format"],closure:function(c){var b={};var d=new RegExp(elon.util.escapeRegExp(this.m_format)+"(#.*)?$");if(c){for(var a=0;a<c.Item.length;a++){if(c.Item[a].UCPTname.get().match(d)){b[c.Item[a].UCPTname.get()]=c.Item[a].UCPTname.get()}}}this.parent.m_formatOpts[this.m_format]=b;this.m_cb(b)}}),"nest:m_PasswordButtonHandler":elon.Class({constructor:function(a){this.m_webDpName=a;this.m_pwDpName=this.parent.webDpName("unique","Password")},closure:function(){var a=this.parent.f_sso.getItem({type:"Dp_Data",Item:this.m_pwDpName});if(!a.UCPTvalue.length){a.UCPTvalue.push("",this.parent)}a.UCPTvalue[0].set(this.parent.f_fieldItem(this.m_webDpName).value.get(),this.parent);this.parent.f_sso.subscribe({Item:a,callback:this.m_pwCB,noInitialCallback:true,singular:true});this.parent.f_createPopup({elon_url:elon.htmUrl("ChangePassword.htm"),elon_args_obj:{elon_lang:this.parent.argObj.elon_lang,elon_title:this.parent.translate("CHANGE_PASSWORD"),elon_value_type:"UserPass",elon_name:this.m_pwDpName}})},"private":{"callback:m_pwCB":function(a){this.parent.f_fieldItem(this.m_webDpName).value.set(a.UCPTvalue[0].get())}}})}});Echelon.ViewSoapEditorUtilObject=new elon.Class.Backport(elon.ComplexView);Echelon.AutoScrollDiv=elon.Class({constructor:function(a){if(a.domObj.tagName=="DIV"){this.div=a.domObj}else{this.div=a.domObj.ownerDocument.createElement("div");a.domObj.appendChild(this.div)}this.m_boundingBox=elon.dom.getDefaultView(this.div.ownerDocument);this.argObj=a;elon.UtilObject.getInstance().addEvent(this.div,"scroll",this.m_scrollCB);if(!this.m_boundingBox.frameElement||this.m_boundingBox.frameElement.tagName.toUpperCase()!="IFRAME"){elon.UtilObject.getInstance().addEvent(this.m_boundingBox,"resize",this.m_resize)}else{this.m_popup=elon.Popup.getExistingInstance(this.div.ownerDocument);this.m_popup.registerAutoScroller(this)}},"public":{m_prepareResize:function(){this.div.style.width="";this.div.style.height="";this.div.style.overflow="hidden"},"callback:resizeCB":function(){this.m_ignoreScrolling=true;this.m_resize(this.m_popup?true:false)},m_size:function(a,d,b){if(d<5){return""}var c=a-d;return(c>0)?(elon.util.addPx(c)):""},m_requestScrollbarWidth:function(){if(this.m_scrollbarWidthRequested){return 0}this.m_scrollbarWidthRequested=true;return elon.dom.scrollBarSize()},m_requestScrollbarHeight:function(){if(this.m_scrollbarHeightRequested){return 0}this.m_scrollbarHeightRequested=true;return elon.dom.scrollBarSize()},m_resetScrollBarRequest:function(){delete this.m_scrollbarWidthRequested;delete this.m_scrollbarHeightRequested},"callback:m_resize":function(c){var a,e;if(!c){this.m_resetScrollBarRequest()}this.m_ignoreScrolling=true;if(!this.argObj.elon_noexpand){this.m_prepareResize();var b=elon.dom.docScrollWidth(this.div)-elon.dom.docClientWidth(this.div);var d=elon.dom.docScrollHeight(this.div)-elon.dom.docClientHeight(this.div);if(c&&(b>1)){d+=this.m_requestScrollbarHeight()}if(c&&(d>1)){b+=this.m_requestScrollbarWidth()}if(b&&c){b-=this.m_popup.requestWidth(b)}if(d&&c){d-=this.m_popup.requestHeight(d)}a=this.m_size(this.div.clientWidth,b,d);e=this.m_size(this.div.clientHeight,d,b);this.div.style.width=elon.util.addPx(a);this.div.style.height=elon.util.addPx(e)}this.div.style.overflow="auto";if(this.m_scrollTop!=null){this.div.scrollTop=this.m_scrollTop}if(this.m_scrollLeft!=null){this.div.scrollLeft=this.m_scrollLeft}delete this.m_ignoreScrolling},"callback:m_scrollCB":function(a){if(this.m_ignoreScrolling){return}var b=elon.util.evt.sourceObj(a);this.m_scrollTop=b.scrollTop;this.m_scrollLeft=b.scrollLeft},scrollTo:function(a){return a.scrollIntoView()}}});Echelon.HiderDiv=elon.Class({constructor:function(a,b,c){this.m_div=this.domObj=a.style?a:(a.argObj.canvas||a.argObj.domObj).ownerDocument.createElement("div");(a.argObj.canvas||a.argObj.domObj).appendChild(this.m_div);if(b){elon.SoapServerObject.getInstance(a.f_getSoapIp()).getItem({Item:a.f_webDpName(b),type:c||"BoolItem"}).value.set(true);elon.SoapServerObject.getInstance(a.f_getSoapIp()).subscribe({Item:a.f_webDpName(b),type:c||"BoolItem",callback:this.m_cb})}},"public":{"callback:show":function(){this.m_div.style.display=""},"callback:hide":function(){this.m_div.style.display="none"}},"private":{"callback:m_cb":function(a){this.m_div.style.display=(a.value.get()=="true"||a.value.get()==true)?"none":""}}});Echelon.MultiHider=elon.Class({constructor:function(a,b,d){this.m_hiders={};this.m_viewObj=a;if(b){elon.SoapServerObject.getInstance(a.f_getSoapIp()).subscribe({Item:a.f_webDpName(b),type:"StringItem",callback:this.m_cb})}if(d){for(var c=0;c<d.length;c++){this.addHider(d[c])}}},"public":{addHider:function(a){var c=(typeof(a)=="string")?a:a[0];this.m_hiders[c]=Echelon.HiderDiv(this.m_viewObj);this[c]=this.m_hiders[c].domObj;if(typeof(a)!="string"){for(var b=1;b<a.length;b++){this.addKey(c,a[b])}}return this[c]},addKey:function(b,a){this.m_hiders[a]=this.m_hiders[b];this[a]=this[b];return this[b]},show:function(a){for(var b in this.m_hiders){this.m_hiders[b].hide()}if(this.m_hiders[a]){this.m_hiders[a].show()}},"callback:m_cb":function(a){this.show(a.value.get())}}});Echelon.AppTable=function(f){elon.include("echelon/Global",f.viewObj.domObj.ownerDocument,"STYLE");this.m_cb=new (elon.CallbackManager)(this);this.argObj=f;this.m_sso=elon.SoapServerObject.getInstance(f.viewObj);this.m_parent=f.viewObj.domObj;this.m_doc=this.m_parent.ownerDocument;this.m_appTable=this.m_parent.appendChild(this.m_doc.createElement("table"));this.m_appTable.className="InfoText";this.m_appTable.style.width="100%";this.m_appTable.style.paddingRight="5px";var m=this.m_appTable.insertRow(0);var j=this.m_appTable.insertRow(0);var d=this.m_appTable.insertRow(0);d.style.height="27px";var i=null;this.m_translate=f.viewObj?f.viewObj.translate:function(o){return o};for(var k in f.head){var n=f.head[k];var c=null;var h=null;var g=null;var b=null;switch(k){case"NAME":h=d.insertCell(0);c=d.insertCell(0);h.style.width="100%";break;case"DESCRIPTION":h=i=j.insertCell(0);c=j.insertCell(0);g="Textarea";h.style.width="100%";break;default:b=d.insertCell(d.cells.length);var l=b.appendChild(this.m_doc.createElement("span"));l.style.width="30px";c=d.insertCell(d.cells.length);h=d.insertCell(d.cells.length)}c.style.whiteSpace="nowrap";h.style.whiteSpace="nowrap";if(!g){g="Textfield"}if((k=="NAME")||(n=="UCPThandle")||(n=="UCPTfbIndex")||(n=="UCPTnvIndex")){g="ShowValue"}c.innerHTML=this.m_translate(k);var e=elon.Form.factory({elon_lang:f.elon_lang,nls:f.nls,type:g,parentDomObj:h,elon_webdpname:this.getWebDpName(n)});if((k=="NAME")||(n=="UCPThandle")||(n=="UCPTfbIndex")||(n=="UCPTnvIndex")){h.style.textAlign="left";h.style.whiteSpace="nowrap"}if(k=="DESCRIPTION"){e.domObj.style.width="100%";e.domObj.rows=(elon.browser.IE||elon.browser.WebKit)?2:1}e.addEvent("change",this.m_handleUserInput(this,n,e));c.innerHTML=this.m_translate(k)+":"}this.imageCell=d.insertCell(0);this.imageCell.rowSpan=2;this.imageCell.style.width="80px";var a=this.m_parent.appendChild(this.m_doc.createElement("div"));a.style.position="absolute";a.style.top="9px";a.style.left="3px";this.m_synchImg=a.appendChild(this.m_doc.createElement("img"));this.m_synchImg.src=elon.imgUrl("noSynch.gif");this.m_synchImg.className="transparent";this.m_synchImg.style.display="none";if(i){i.colSpan=Math.max(d.cells.length-2,j.cells.length-2)}this.m_canvasDiv=this.m_parent.appendChild(this.m_doc.createElement("div"));this.m_canvasDiv.className="AppTable";this.m_canvasDiv.style.position="absolute";this.m_canvasDiv.style.width="100%";this.m_canvasDiv.style.top=elon.util.addPx(this.m_appTable.clientHeight);this.m_canvasDiv.style.overflow="visible";if(f.viewObj.argObj.elon_background_image){this.setBgImg(f.viewObj.argObj.elon_background_image,0,{defaultVal:3,IE67:1},true)}};Echelon.AppTableMethods={getCanvas:function(){return this.m_canvasDiv},setBgImg:function(b,e,d){var a=e;if(typeof(a)=="object"){a=e.defaultVal||0;for(var c in e){if(elon.browser[c]){a=e[c]}}}var f=d;if(typeof(f)=="object"){var f=d.defaultVal||0;for(var c in d){if(elon.browser[c]){f=d[c]}}}this.createDomObj("img",{src:b},{position:"absolute",left:elon.util.addPx(a),top:elon.util.addPx(f)})},handleCfg:function(a){if(a){if(!this.subscribed){this.subscribed=true;a.y_proxy_subscribe(this.m_cb.create("handleCfg"),this.argObj.viewObj)}this.handleImgCfg(a);if(!a.r_proxy_fromIlon||a.r_proxy_tainted){this.setSync(false);this.m_appTableCfg=a;this.m_sso.addPostSubmitCallback(this.m_cb.create("m_postSubmitCB"))}else{this.setSync(true)}for(var b in this.argObj.head){var c=this.argObj.head[b];var d=this.getWebDp(c);d.value.set(a[c].get())}}else{elon.elon.setErrMsg("No such instance defined!")}},handleImgCfg:function(a){this.m_cfg=a;this.setImg(elon.filter.qualifierToMediumIcon(a.UCPTannotation.get(),a.y_proxy_getNameType()))},setImg:function(a){if(!this.m_img){this.m_img=this.imageCell.appendChild(this.m_doc.createElement("img"));this.m_img.style.width=this.m_img.style.height="80px"}this.m_img.src=a},m_postSubmitCB:function(){if(this.m_appTableCfg){this.setSync(this.m_appTableCfg.r_proxy_fromIlon&&!this.m_appTableCfg.r_proxy_tainted)}delete this.m_appTableCfg},setSync:function(a){this.m_synchImg.style.display=a?"none":""},getWebDp:function(a){return this.m_sso.getItem({type:"FormObj_Data",Item:this.getWebDpName(a)})},getWebDpName:function(a){return"#Web/global/dpc"+a},createDomObj:function(a,c,b){var d=this.m_canvasDiv.appendChild(this.m_doc.createElement(a));for(var e in c){d[e]=c[e]}for(var e in b){d.style[e]=b[e]}return d},createLabel:function(b,a,e,c){var d=this.createDomObj("div",{innerHTML:this.m_translate(b)},{position:"absolute",left:elon.util.addPx(a),top:elon.util.addPx(e)});if(c){d.style.width=elon.util.addPx(c);d.style.textAlign="center"}d.className="InfoText";return d},createFatLabel:function(b,a,e,d){var c=this.createLabel(b,a,e,d);c.className="BoldText";return c},m_handleUserInput:elon.Class({closure:function(a){if(!this.m_this.argObj.noWrite){this.m_this.m_cfg[this.m_soapProp].set(this.m_formObj.getValue(),this.m_this.argObj.viewObj)}},constructor:["m_this","m_soapProp","m_formObj"]})};elon.initPrototype(Echelon.AppTable,Echelon.AppTableMethods);Echelon.AppTable.getInstance=function(a){return new Echelon.AppTable(a)};Echelon.WrapperTable=function(g){var b=g.domObj.ownerDocument;var f=g.domObj.appendChild(b.createElement("table"));var a=f.insertRow(0);var e=a.insertCell(0);var c=f.insertRow(0);var d=c.insertCell(0);f.className="SubTable";f.cellPadding=0;f.cellSpacing=0;a.style.height="100%";c.style.height="25px";c.className="Background";d.className="FrameTitle";f.style.width="100%";f.style.height="100%";e.style.verticalAlign="top";this.getMainCell=function(){return e};this.addRadio=function(j,m,h){var l=new Object();for(var k=0;k<j.length;k++){l[h?h(j[k]):j[k]]=j[k]}return elon.viewRadiobuttonObject.getInstance({parentDomObj:d,elon_options:l,elon_inline:true,onchange:m})};this.addButton=function(h,j){var i=elon.viewButtonObject.getInstance({parentDomObj:d,onchange:j});i.domObj.className="ControlButton";i.setLabel(h);return i};this.addCheckbox=function(i,j){var h=elon.viewCheckboxObject.getInstance({parentDomObj:d,onchange:j});d.appendChild(b.createElement("span")).innerHTML=i;return h};this.addLineBreak=function(){d.appendChild(b.createElement("br"))}};Echelon.FbCfgBase=function(f,a){elon.viewObject.call(this,f);this.f_init=function(i,h,g){if(this.argObj.elon_item&&i){e.m_treeMarkSelected.Item.push(i)}e.f_appTable.handleCfg(i);e.f_handleCfg(i);e.f_enableUI(true,"FbCfgBase.constructor")};var c=function(i,h,g){d.fireQuickCallback(e.f_init,e,i,h,g)};var e=this;var d=elon.UtilObject.getInstance();var b=elon.SoapServerObject.getInstance(this);this.f_disableUI(true,"FbCfgBase.constructor");this.m_treeMarkSelected=e.f_sso.getItem({type:"DpTree_Data",Item:e.webDpName("global","treeMarkSelected")});e.f_appTable=elon.AppTable.getInstance({viewObj:this,head:{NAME:"UCPTname",DESCRIPTION:"UCPTdescription"}});this.subscribed=true;b.subscribe({type:a,Item:f.elon_name,callback:c,id:this})};Echelon.TTBase=function(f,b){elon.FbCfgBase.call(this,f,b);this.f_getControlDiv=function(){e.f_appTable.getCanvas().appendChild(e.argObj.domObj.ownerDocument.createElement("br"));var h=e.f_appTable.getCanvas().appendChild(e.argObj.domObj.ownerDocument.createElement("div"));h.className="InfoText";h.style.textAlign="left";h.style.width="100%";return h};this.f_prompt=function(i){var h=e.webDpName("global","UFPTtypeTranslator_Cfg-PromptDp");a=i.callback;e.f_createPopup({closeCB:g,elon_url:elon.htmUrl("Prompt.htm"),elon_args_obj:{elon_symbol:i.icon,elon_name:h,elon_msg:i.question,elon_value:i.defaultAnswer,elon_validation:i.validation,elon_title:i.title||""}});e.f_sso.subscribe({type:"StringItem",Item:h,callback:d,noInitialCallback:true,mute:true,clear:true,unmute:true,singular:true,callOnCancel:true})};this.f_addRuleRequiredFields=function(h){h.UCPTcompFunction.LonFormat.set("UCPTcompFunction");h.UCPTcompFunction.set("FN_NUL");h.UCPTinputPath.set("");h.UCPToutputPath.set("")};this.f_addCaseRequiredFields=function(h){h.UCPTcompFunction.LonFormat.set("UCPTcompFunction");h.UCPTcompValue.LonFormat.set("UCPTcompValue");h.UCPTcompFunction.set("FN_NUL");h.UCPTcompValue.set("0")};this.renameNick=function(j,n,m){if(j.Case){for(var i=0;i<j.Case.length;i++){var l=j.Case[i];c(l.UCPTinputPath,n,m);for(var k=0;k<l.Rule.length;k++){var h=l.Rule[k];c(h.UCPTinputPath,n,m);c(h.UCPToutputPath,n,m)}}}};var c=function(h,j,i){if(e.f_isValidString(h.get())){if(e.f_stripXPath(h.get())==j){h.set(e.f_addXPath(i))}}};var g=function(){if(a){a(false)}a=null};var d=function(h){if(a){a(h.value.get())}a=null};this.f_stripXPath=function(i){var h=i.match(new RegExp('UCPTnickName=["\']([^"]+)["\']'));return(h&&h.length)?h[1]:""};this.f_isValidString=function(h){return(h!=null&&h!="")};this.f_addXPath=function(h){return'DataPointFormat[UCPTnickName="'+h+'"]'};var e=this;var a};Echelon.DiDoPcBase=function(e,g){elon.FbCfgBase.call(this,e,g);var i=function(k,n,m){var l=b.f_absPosFormObj(k,n,{type:"ShowValue",elon_webdpname:b.f_getWebDpName(m)});b.f_getWebDp(m).value.set(m);return l};var j=function(k){var m=new Object();for(var l=0;l<k.length;l++){m[b.translate(k[l])]=k[l]}return m};this.f_handleCfg=function(m,l,k){b.f_DiDoPcBase_handleCfg(m,l,k)};this.f_addTrueFormObj=function(l,k){if(!c[l]){c[l]=new Array()}c[l].push(k)};this.f_DiDoPcBase_handleCfg=function(k,m,t){var r,l;if(k.DataPoint==null){r="Configuration missing"}else{if(k.r_proxy_fromScratch){l=b.translate("SUBMIT_REQUIRED_FB")}else{if(k.DataPoint.length==0){r="Config is invalid: it does not contain any data point references"}}}if(r||l){elon.elon[r?"setErrMsg":"setInfMsg"](r||l);b.f_disableUI("true","DiDoPcBase.f_DiDoPcBase_handleCfg","frame");b.m_clearMsgBarOnSuccess=true}else{if(b.m_clearMsgBarOnSuccess){elon.elon.clearMsg();b.f_enableUI("true","DiDoPcBase.f_DiDoPcBase_handleCfg","frame")}for(var q=0;q<k.DataPoint.length;q++){var n=k.DataPoint[q];var p=n.UCPTname.get();var s=false;var u=false;var v=n.dpType.get();f[v]=p;if(c[v]){for(var o=0;o<c[v].length;o++){if(c[v][o].init){c[v][o].init("DP",p)}else{c[v][o].setPointName(p)}}}if(b.f_arrowLabels[v]){h.subscribe({type:b.f_arrowLabels[v],Item:p,callback:b.f_handleDp_Cfg(b,v)})}if(b.f_pollDp_Data[v]){a.pollDp({sso:b.f_sso,dpName:p,callback:b.f_handleDp_Data(b,v)})}}}};this.f_labelArrow=function(n,k,p,m){var l=i(k,p,n+"Name");var o=i(k+10,p+20,n+"Format");l.domObj.className="DPText";o.domObj.className="DPText";b.f_arrowLabels[n]=m||"Dp_Cfg"};this.f_handleDp_Cfg=elon.Class({closure:function(m){if(m){var l=this.m_this.f_getWebDp(this.m_dpType+"Name");var n=this.m_this.f_getWebDp(this.m_dpType+"Format");var k=m.UCPTname.get().split("/");l.value.set(k[k.length-1]);n.value.set("("+elon.UtilObject.getInstance().beautifyLonFormat(m.UCPTformatDescription.get())+")")}},constructor:["m_this","m_dpType"]});this.f_handleDp_Data=elon.Class({closure:function(m,l,k){if(m&&m.UCPTvalue&&m.UCPTvalue.length>0){this.m_this.f_getWebDp(this.m_dpType).value.set(m.UCPTvalue[0].get())}},constructor:["m_this","m_dpType"]});this.f_handleUserInput=elon.Class({closure:function(l){var k=elon.SoapServerObject.getInstance(this.m_this);var m=this.m_this.f_getWriteDp(this.m_dpType,this.m_lonformat);m.UCPTvalue[0].set(l);k.Write({Item:m,callback:function(){}})},constructor:["m_this","m_dpType","m_lonformat"]});this.f_absPosFormObj=function(l,p,o,m,n){var k={left:elon.util.addPx(l),top:elon.util.addPx(p),color:"black",display:"block",zIndex:"1",position:"absolute"};if(m){k.style.width=elon.util.addPx(m)}if(n){k.style.height=elon.util.addPx(n)}o.parentDomObj=b.f_appTable.createDomObj("div",null,k);return elon.Form.factory(o)};this.f_getWebDpName=function(k){return b.webDpName("global",b.argObj.elon_name+"-"+k)};this.f_getWebDp=function(k){return h.getItem({type:"FormObj_Data",Item:b.f_getWebDpName(k)})};this.f_getWriteDp=function(l,m){if(f[l]){var k=h.getItem({type:"Dp_Data",Item:f[l],unmanaged:true});if(k.UCPTvalue.length==0){k.UCPTvalue.push()}k.UCPTvalue[0].LonFormat.set(m);return k}};this.f_getCombo=function(m,k,p,l){var o=b.f_appTable.createDomObj("div",null,{left:elon.util.addPx(k),top:elon.util.addPx(p),zIndex:"1",position:"absolute"});var n=elon.viewComboBoxObject.getInstance({parentDomObj:o,elon_show_value_def:true,elon_show_unit:false,elon_priority:100});if(l){n.setWidth(l)}b.f_addTrueFormObj(m,n);return n};this.f_getRadio=function(k,p,m,o,n){var l=b.f_absPosFormObj(k,p,{type:"Radiobutton",onchange:b.f_handleUserInput(b,m,n),elon_inline:false,elon_space:5,elon_max_elements:2,elon_webdpname:this.f_getWebDpName(m),elon_options:j(o)});b.f_pollDp_Data[m]=l;return l};var h=elon.SoapServerObject.getInstance(this);var d=elon.elon;var b=this;var a=Echelon.UtilObject.getInstance();var f=new Object();var c=new Object();this.f_pollDp_Data=new Object();this.f_arrowLabels=new Object()};Echelon.MessageHelper=elon.Class({constructor:function(){this.m_visibility={};for(var b in this.m_msgTypes){var a="#Web/global/msgVisibility"+b;this.f_sso.subscribe({type:"BoolItem",Item:a,callback:this.m_visibilityCB,noInitialCallback:true});this.m_visibility[b]=this.f_sso.getItem({type:"BoolItem",Item:a}).value.get()}},"private":{m_msgTypes:{_error:1,_warning:1,_info:1,_debug:1},m_stylist:function(a,c){var b=c.fault.faultcode.faultType.get();if(b){b=b.replace("_html","")}a.style.color=elon.filter.msgColor(b);a.parentNode.style.display=this.m_visibility[b]?"":"none"},m_fillDom:function(a,b){if(b.fault.faultcode.faultType.get()=="_html_error"){a.innerHTML=b.fault.faultstring.get()}else{a.innerHTML="";a.appendChild(a.ownerDocument.createTextNode(b.fault.faultstring.get()))}this.m_stylist(a,b)},"callback:m_stylistCB":"m_stylist",m_getType:function(a){return a.UCPTname.get().match(/_\w+$/)[0]},"callback:m_visibilityCB":function(a){this.m_visibility[this.m_getType(a)]=a.value.get()}}});Echelon.viewMessageBarObject=elon.Class({base:{m_view:elon.View,m_msgHelper:elon.MessageHelper},constructor:function(e){this.m_view(e);this.m_msgHelper();if(!e.elon_aux_msg_bar){elon.msgbar=this}for(var b in this.m_msgTypes){var a="#Web/global/msgVisibility"+b;this.f_sso.subscribe({type:"BoolItem",Item:a,callback:this.m_visCB,noInitialCallback:true})}var c=e.domObj.appendChild(e.domObj.ownerDocument.createElement("span"));c.style.verticalAlign="bottom";c.style.cursor="pointer";c.title="Show Message History";elon.util.addEvent(c,"click",this.m_showMsgHistory);var d=e.domObj.appendChild(e.domObj.ownerDocument.createElement("span"));d.style.width="10";this.m_textSpan=e.domObj.appendChild(e.domObj.ownerDocument.createElement("span"));this.m_textSpan.className="ErrorText";this.m_img=c.appendChild(e.domObj.ownerDocument.createElement("img"));this.clearIcon();this.f_sso.subscribe({Item:this.webDpName("global","errorDP"),type:"DpTree_Data",callback:this.m_msgCB,noInitialCallback:true})},"public":{clear:function(a){if(!this.m_lastUpdate){return}if(!a){var b=(new Date()).getTime()-this.m_lastUpdate;if(b>3000){this.m_textSpan.innerHTML=""}else{elon.util.fireDelayedFunction(this.clear,3000-b,this,this.m_lastUpdate)}}else{if(a==this.m_lastUpdate){this.m_textSpan.innerHTML=""}}},clearIcon:function(){this.m_img.src=elon.imgUrl("clear.gif");this.m_textSpan.innerHTML=""},cleanSlate:function(){if(this.m_lastUpdate&&((new Date()).getTime()-this.m_lastUpdate)>3000){this.clear()}},getValue:function(){return this.m_textSpan.innerHTML}},"private":{"callback:m_showMsgHistory":function(){this.m_img.src=elon.imgUrl("arrowhide.gif");elon.elon.showErrMsgHistory()},"callback:m_visCB":function(a){if(this.m_type==this.m_getType(a)){this.m_textSpan.style.display=a.value.get()?"":"none";if(!a.value.get()){this.m_img.src=elon.imgUrl("arrowhide.gif")}}},"callback:m_msgCB":function(a){if(!a||!a.Item.length){return}var b=a.Item[a.Item.length-1];if(this.m_visibility[b.fault.faultcode.faultType.get()]){this.m_img.src=elon.imgUrl("")+({_error:"Bellred",_warning:"Bellorange"}[b.fault.faultcode.faultType.get()]||"arrowhide")+".gif"}else{this.m_img.src=elon.imgUrl("arrowhide.gif")}this.m_fillDom(this.m_textSpan,b);this.m_type=b.fault.faultcode.faultType.get();this.m_lastUpdate=(new Date()).getTime()}}});Echelon.MessageMaster=elon.Class({base:{m_msgHelper:Echelon.MessageHelper},constructor:function(a){this.f_sso=a;this.f_sso.syncTime();this.m_msCount=0;this.m_errTab=Echelon.ErrorTable.getInstance();this.m_errMan=Echelon.ErrorManager.getInstance();this.m_msgHelper()},"public":{setErrMsg:function(a){if(a){if(typeof a=="string"){this.m_setMsgString(a,"ERR_ERR_MESSAGE")}else{this.setMsg(a)}}},clearMsg:function(a){if(Echelon.msgbar&&(!a||(Echelon.msgbar.getValue()==a))){Echelon.msgbar.clear()}},setHtmlErrMsg:function(a){if(a){this.m_setMsgString(a,"HTML_ERR_ERR_MESSAGE")}},setWarnMsg:function(a){if(a){this.m_setMsgString(a,"ERR_WARN_MESSAGE")}},setInfMsg:function(a){if(a){this.m_setMsgString(a,"ERR_INFO_MESSAGE")}},setDbgMsg:function(a){if(a){this.m_setMsgString(a,"ERR_DEBUG_MESSAGE")}},setMsg:function(e,d,b){if(this.m_filterMsg(e)){return}var c={};c[this.m_errTab.LEVEL_FATAL_ERROR]=c[this.m_errTab.LEVEL_ERROR]="_error";c[this.m_errTab.LEVEL_WARNING]="_warning";c[this.m_errTab.LEVEL_INFO]="_info";c[this.m_errTab.LEVEL_DEBUG]="_debug";var a=c[this.m_errMan.getErrorLevel(e.faultCode)];if(!Echelon.msgbar&&this.m_visibility[a]){this.showErrMsgHistory()}this.f_sso.getItem({Item:"#Web/global/errorDP",type:"DpTree_Data"}).Item.push(this.f_sso.convertFromSimple({type:"UFPTdataLogger_Data",Item:{UCPTname:"#SystemLogger",UCPTlastUpdate:this.m_timeStamp(),fault:{faultcode:{y_proxy_value:0,faultType:(e.faultCode&&(e.faultCode==this.m_errTab.HTML_ERR_ERR_MESSAGE))?"_html_error":a},faultstring:e.faultString},UCPTannotation:"Web-Interface"},unmanaged:true,mute:true}))},showErrMsgHistory:function(){if(this.m_msgHistoryOpen){return}this.m_msgHistoryOpen=true;elon.Popup.getInstance({elon_url:elon.rootUrl("/user/shared/SystemLogger.htm"),elon_modal:false,elon_no_scrolling:true})},msgHistoryClosed:function(){this.m_msgHistoryOpen=false}},"private":{m_setMsgString:function(b,a){if(b==""){this.clearMsg()}else{if(elon.elon.initialized()){this.setMsg(Echelon.Error.getInstance(this.m_errTab[a],{msg:b}))}else{alert(b)}}},m_timeStamp:function(){var a=this.f_sso.ilonTime()||new Date();var b=new elon.DateTimeObject();b.setTimezoneOffset(-a.getTimezoneOffset());b.setTime(a.getTime());return b.toFormattedString([elon.DateObject.isoFormat,"T","%2h:%2m:%2s.",this.m_msCounter(),"%+%o2h:%o2m"].join(""))},m_msCounter:function(){return elon.util.addLeadingZeros((this.m_msCount>999)?(this.m_msCount=0):this.m_msCount++,3)},m_filterMsg:function(a){if(!a&&!a.faultString){return}if(this.m_filterCodeStr(a,2162433," The base name cannot be found.")){return true}},m_filterCodeStr:function(c,a,b){return(c.faultCode==a)&&c.faultString.match(new RegExp(b+"$"))}}});Echelon.PageProperties=function(a){if(a.elon_background){a.domObj.ownerDocument.body.style.backgroundImage=a.elon_background}if(a.elon_title){elon.elon.getTopLevelSSO().getItem({Item:"#Web/global/titleDP",type:"FormObj_Data",id:"volatile"}).value.set(a.elon_title)}};Echelon.PageProperties.getInstance=function(a){return new Echelon.PageProperties(a)};Echelon.MotionTracker=elon.Class({constructor:function(a){this.m_doc=a.ownerDocument;elon.dynIncludeStyle("echelon/dragger",this.m_doc);elon.util.addEvent(a,"mousedown",this.m_trackstart,true)},"protected":{f_trackCB:function(b,a){},f_trackStopCB:function(){}},"private":{m_leftButtonPressed:function(a){return((elon.browser.IE&&a.button==1)||a.button==0)},"callback:m_trackstart":function(a){if(!a){a=window.event}if(!this.m_leftButtonPressed(a)){return}this.m_lastX=a.screenX;this.m_lastY=a.screenY;this.m_trackLayer=this.m_doc.body.appendChild(this.m_doc.createElement("div"));elon.util.addClassName("DragLayer",this.m_trackLayer);elon.util.addEvent(this.m_trackLayer,"mousemove",this.m_track,true);elon.util.addEvent(this.m_trackLayer,"mouseup",this.m_trackstop);elon.util.addEvent(this.m_trackLayer,"mouseout",this.m_trackstop)},"callback:m_trackstop":function(){elon.util.removeEvent(this.m_trackLayer,"mousemove",this.m_track,true);elon.util.removeEvent(this.m_trackLayer,"mouseup",this.m_trackstop);elon.util.removeEvent(this.m_trackLayer,"mouseout",this.m_trackstop);this.m_doc.body.removeChild(this.m_trackLayer);delete this.m_trackLayer;this.f_trackStopCB()},"callback:m_track":function(a){if(!a){a=window.event}if(this.m_trackLayer){this.f_trackCB(a.screenX-this.m_lastX,a.screenY-this.m_lastY)}this.m_lastX=a.screenX;this.m_lastY=a.screenY}}});Echelon.Dragger=elon.Class({base:{m_tracker:Echelon.MotionTracker},constructor:function(b,a,c){this.m_tracker(a||b);this.m_obj=b;this.m_cb=c},"protected":{"callback:f_trackCB":function(b,a){this.m_obj.style.left=(this.m_obj.offsetLeft+b)+"px";this.m_obj.style.top=(this.m_obj.offsetTop+a)+"px";if(this.m_cb){this.m_cb(b,a)}}}});Echelon.Resizer=elon.Class({base:{m_tracker:Echelon.MotionTracker},constructor:function(b,d,e,c,a){this.m_tracker(e||b);elon.util.addClassName("Resizer"+c,e||b);this.m_dir=c;this.m_resized=b;this.m_resizeCB=a;this.m_moved=d;this.m_x=c.match(/W/)?-1:(c.match(/E/)?1:0);this.m_y=c.match(/N/)?-1:(c.match(/S/)?1:0);this.m_mX=c.match(/W/)?1:0;this.m_mY=c.match(/N/)?1:0},"protected":{"callback:f_trackCB":function(b,a){this.m_resized.style.width=this.m_min(this.m_resized.clientWidth+this.m_x*b)+"px";this.m_resized.style.height=this.m_min(this.m_resized.clientHeight+this.m_y*a)+"px";this.m_moved.style.left=(this.m_moved.offsetLeft+this.m_mX*b)+"px";this.m_moved.style.top=(this.m_moved.offsetTop+this.m_mY*a)+"px"},m_min:function(a){return(a<1)?1:a},"callback:f_trackStopCB":function(b,a){if(this.m_resizeCB){this.m_resizeCB()}}}});Echelon.DivFactory=elon.Class({constructor:["m_classNamePrefix","m_classNamePostfix"],template:elon.Class({constructor:function(a,d){elon.dynIncludeStyle("echelon/boxDeco/boxDeco",a.ownerDocument);for(var b=0;b<this.parent.m_classNamePostfix.length;b++){var c=a.appendChild(a.ownerDocument.createElement("div"));elon.util.addClassName(this.parent.m_classNamePrefix+this.parent.m_classNamePostfix[b],c);if(d){d(c,this.parent.m_classNamePostfix[b])}}}})});Echelon.BoxDeco=elon.Class({constructor:function(b,c,a){this.m_container=b;this.m_resized=c;this.m_resizeCB=a;this.m_DivFactory(b,this.m_domHandler);delete this.m_container;delete this.m_resized;delete this.m_resizeCB},"private":{m_DivFactory:Echelon.DivFactory("WindowDeco",["N","S","W","E","NW","NE","SW","SE"]),"callback:m_domHandler":function(b,a){Echelon.Resizer(this.m_resized,this.m_container,b,a,this.m_resizeCB)}}});Echelon.WindowShadow=Echelon.DivFactory("WindowDeco",["ShadowA","ShadowB","ShadowCornerA","ShadowCornerB","ShadowCornerC"]);Echelon.MenuShadow=Echelon.DivFactory("MenuDeco",["ShadowA","ShadowB","ShadowCornerA","ShadowCornerB","ShadowCornerC"]);Echelon.FbDeco=Echelon.DivFactory("FbDeco",["N","S","W","E","NW","NE","SW","SE"]);Echelon.PopupFrame=elon.Class({constructor:function(e){this.m_content=e.content;var d=EchelonTop.document;elon.dynIncludeStyle("echelon/popup",d);this.container=d.body.appendChild(d.createElement("div"));elon.util.addClassName("PopupFrame",this.container);var b=this.container.appendChild(d.createElement("div"));elon.util.addClassName("PopupHead",b);if(e.headerDom){for(var a=0;a<e.headerDom.length;a++){b.appendChild(e.headerDom[a])}}var c=this.container.appendChild(d.createElement("div"));elon.util.addClassName("PopupContent",c);c.appendChild(e.content);elon.Dragger(this.container,b,e.moveCB);if(!elon.browser.IE678){elon.BoxDeco(this.container,e.content,e.resizeCB);elon.WindowShadow(this.container)}if(elon.browser.IE678){var g=this.container.appendChild(d.createElement("iframe"));elon.util.addClassName("PopupIEBugshield",g);elon.util.addClassName("PopupIEBugshield",this.container);elon.util.addClassName("PopupIEBugshieldDeco",e.content);var f=this.container.appendChild(d.createElement("div"));elon.util.addClassName("PopupIEResizer",f);Echelon.Resizer(e.content,this.container,f,"SE",e.resizeCB)}},"public":{getContainer:function(){return this.container},"callback:destroy":function(){EchelonTop.document.body.removeChild(this.container)},centerX:function(){var a=(EchelonTop.document.body.clientWidth-this.container.clientWidth)/2;a=Math.min(a,EchelonTop.document.body.scrollWidth-this.container.clientWidth);a=Math.max(a,0);this.container.style.left=elon.util.addPx(a)},centerY:function(){var a=(elon.dom.getBodyClientHeight()-this.container.clientHeight)/2;a=Math.min(a,elon.dom.getBodyClientHeight()-this.container.clientHeight);this.container.style.top=elon.util.addPx(a)},center:function(){this.centerX();this.centerY()},show:function(){delete this.m_hidden;if(this.m_hideX&&this.m_hideY){this.container.style.left=elon.util.addPx(this.m_hideX);this.container.style.top=elon.util.addPx(this.m_hideY)}else{this.center()}},hide:function(){if(!this.m_hidden){this.m_hideX=this.container.offsetLeft}if(!this.m_hidden){this.m_hideY=this.container.offsetTop}this.container.style.left="-10000px";this.container.style.top="-10000px";this.m_hidden=true}}});elon.provide("System",document);