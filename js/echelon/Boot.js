EchelonTop=window;if(window.Echelon==null){Echelon={};Echelon.thisIsJustAProxy=true}elon=Echelon;elon.window=window;elon.doc=window.document;elon.rootUrl=function(a){return +"./"+a};elon.imgUrl=function(a){return elon.rootPath+"./img/"+a};elon.htmUrl=function(a){return elon.rootPath+"./"+a};Echelon.instantiatorCommon=function(b,a){if(b.m_elonClass.initCBs){b.m_elonClass.initCBs.call(b)}if(b.m_elonClass.constructor){b.m_elonClass.constructor.apply(b,a)}return b.m_elonClassClosure?b.m_elonClassClosure:b};Echelon.DefaultInstantiator=function(b){var a=b;this.instantiator=function(){return Echelon.instantiatorCommon(new a(),arguments)};this.instantiator.elonClass=b};Echelon.NestedInstantiator=function(b){var a=b;this.instantiator=function(){var c=new a();c.parent=this;return Echelon.instantiatorCommon(c,arguments)};this.instantiator.elonClass=b};Echelon.SingletonInstantiator=function(b){var a=b;this.instantiator=function(){if(a.instance==null){a.instance=Echelon.instantiatorCommon(new a(),arguments)}return a.instance};this.instantiator.elonClass=b};Echelon.CPerServerInstantiator=function(b){var a=b;a.instances={};this.instantiator=function(c){if(c==null){throw new Error("Called PerServerInstantiator without passing url")}var d=(typeof(c)=="string")?c:Echelon.getSoapUrl(c.argObj,c.getWindow());d=elon.util.normalizeUrl(d);if(a.instances[d]==null){a.instances[d]=Echelon.instantiatorCommon(new a(),arguments)}return a.instances[d]};this.instantiator.elonClass=b};elon.CallbackManager=function(d){var c=d;var b=function(f){var g=f;this.method=function(){return c[g].apply(c,arguments)}};var a=function(f){var g=f;this.method=function(){return g.apply(c,arguments)}};this.create=function(f){return(new ((typeof(f)=="string")?b:a)(f)).method}};Echelon.Class=function(d){var g=new Function();if((d.constructor==null)||(d.constructor==Object)||d.constructor.toString().match(new RegExp("\\[native code]"))){g.prototype.m_elonClass=new Object();g.prototype.m_elonClass.constructor=new Function()}else{if(typeof(d.constructor)=="function"){g.prototype.m_elonClass={constructor:d.constructor}}else{if(d.constructor.length){g.prototype.m_elonClass={constructor:function(){for(var q=0;q<this.m_elonClass.constructorArgs.length;q++){this[this.m_elonClass.constructorArgs[q]]=arguments[q]}}};g.prototype.m_elonClass.constructorArgs=d.constructor}else{throw new Error('Constructor type "'+typeof(d.constructor)+'" not supported in Echelon.Class')}}}var o={};var n;var c=d.base;if(c&&c.elonClass){c=d.base.elonClass.prototype;n=Echelon.Class.m_iniPrerequisites(n,d.base.elonClass);if(c&&c.m_elonClass.callback){a=true}}else{if(c){for(var h in c){if(!c[h]){throw new Error('Cannot find base class "'+h+'"')}n=Echelon.Class.m_iniPrerequisites(n,c[h].elonClass);c[h]=c[h].elonClass.prototype;if(c[h].m_elonClass.callback){a=true}}}}if(a){g.prototype.m_elonClass.callback=o}if(c){if(c.m_elonClass){Echelon.Class.m_iniBaseClass(c,g)}else{for(var h in c){Echelon.Class.m_iniBaseClass(c[h],g,h)}}}n=Echelon.Class.m_iniPrerequisites(n,d);if(n){g.prerequisites=n}var j={};for(var p in {"public":0,"protected":0,"private":0}){for(var f in d[p]){var b=f.split(":");var m=false;if(b.length>1){m=b[0]}b=m?b[1]:b[0];if(elon.debugWebUi&&g.prototype.m_elonClass.constructor[b]&&b.match(/^m_/)){elon.elon.setWarnMsg("elon.Class is overwriting private member "+b+'"')}switch(m){case"callback":o[b]=d[p][f];var a=true;break;case"nest":g.prototype[b]=new Echelon.NestedInstantiator(d[p][f].elonClass).instantiator;g.prototype[b].getInstance=g.prototype[b];break;case"template":o[b]=new Echelon.NestedInstantiator(d[p][f].elonClass).instantiator;o[b].getInstance=o[b];var a=true;break;case"static":j[b]=d[p][f];break;default:g.prototype[b]=d[p][f]}g.prototype.m_elonClass.constructor[b]=g.prototype[b]||o[b]}}if(d.closure){g.prototype.m_elonClass.closure=d.closure;o.m_elonClassClosure=d.closure;var a=true}if(d.template){if(d.closure){throw new Error('elon.Class supports either "closure" OR "template"')}var l=function(){return this.m_elonClass.template.apply(this,arguments)};l.elonClass=d.template.elonClass;g.prototype.m_elonClass.closure=l;o.m_elonClassClosure=l;g.prototype.m_elonClass.template=new Echelon.NestedInstantiator(d.template.elonClass).instantiator;var a=true}if(a){g.prototype.m_elonClass.initCBs=Echelon.Class.m_initCBs;g.prototype.m_elonClass.callback=o}if(d.extraClassInit){d.extraClassInit(g.prototype)}switch(d.instantiator){case"singleton":var k=new Echelon.SingletonInstantiator(g).instantiator;break;case"perServer":var k=new Echelon.CPerServerInstantiator(g).instantiator;break;case undefined:var k=new Echelon.DefaultInstantiator(g).instantiator;break;default:throw new Error("Invalid ElonClass instantiator "+d.instantiator)}for(var h in j){k[h]=j[h]}k.getInstance=k;return k};Echelon.Class.m_iniBaseClass=function(c,d,a){for(var b in c.m_elonClass.callback){d.prototype.m_elonClass.callback[b]=d.prototype.m_elonClass.constructor[b]=c.m_elonClass.callback[b]}for(var b in c){if(b!="m_elonClass"){d.prototype[b]=d.prototype.m_elonClass.constructor[b]=c[b]}}if(a){d.prototype[a]=c.m_elonClass.constructor}else{d.prototype.f_base=c.m_elonClass.constructor}if(c.m_elonClass.constructorArgs){if(d.prototype.m_elonClass.constructorArgs){alert("Deep inheritance of simple constructors not supported")}d.prototype.m_elonClass.constructorArgs=c.m_elonClass.constructorArgs}};Echelon.Class.m_iniPrerequisites=function(c,a){if(!a.prerequisites){return c}for(var b in a.prerequisites){if(!c){c=new Object()}if(!c[b]){c[b]=new Array()}c[b]=c[b].concat(a.prerequisites[b])}return c};Echelon.Class.m_initCBs=function(){if(!this.m_elonClassCallbackManager){this.m_elonClassCallbackManager=new elon.CallbackManager(this)}for(var a in this.m_elonClass.callback){this[a]=this.m_elonClassCallbackManager.create(this.m_elonClass.callback[a]);if(this.m_elonClass.callback[a].getInstance){this[a].getInstance=this[a]}}if(this.m_elonClass.callback.m_elonClassClosure){this.m_elonClassClosure.elonClass=this.m_elonClass.callback.m_elonClassClosure.elonClass;this.m_elonClassClosure.getInstance=this.m_elonClassClosure}};Echelon.util={};Echelon.util.callback={m_delayedCB:function(j,k,f,g,a){var b=function(){window.clearInterval(d);var m=new Array();for(var n=c;n<i.length;n++){m.push(i[n])}elon.ExceptionHandler().call(h,m,l)};if(j==null){throw new Error("Invalid callback in delayed CB")}var h=j;var l=k;var c=g;var i=f;var d=this.key=window.setInterval(b,a)},fireQuickCallback:function(c,b,a){return new elon.util.callback.m_delayedCB(c,b,arguments,2,1).key},fireDelayedFunction:function(d,b,c,a){return new elon.util.callback.m_delayedCB(d,c,arguments,3,b).key},abortCallback:function(a){window.clearInterval(a)}};Echelon.util.countProps=function(c){var b=0;if(typeof(c)=="string"){return b}for(var a in c){++b}return b};Echelon.util.serialize=function(a){switch(typeof a){case"object":var b="";for(var d in a){if(a[d]!=null){var c=Echelon.util.serialize(a[d]);if(c!=null){b+='"'+d+'":'+c+","}}}return b?("{"+b.slice(0,-1)+"}"):null;break;case"string":return'"'+a+'"';break;default:return a;break}};Echelon.util.obj2str=function(a){switch(typeof a){case"object":var b="";for(var d in a){if(a[d]!=null){var c=Echelon.util.obj2str(a[d]);if(c!=null){b+='"'+encodeURIComponent(d)+'":'+c+","}}}return b?("{"+b.slice(0,-1)+"}"):null;break;case"string":return'"'+encodeURIComponent(a)+'"';break;default:return a;break}};Echelon.util.decodeURIComponent=function(a){if(elon.browser.IE){a=a.replace(/%20/g," ").replace(/%22/g,'"').replace(/%2C/g,",").replace(/%2F/g,"/").replace(/%3A/g,":").replace(/%3C/g,"<").replace(/%3D/g,"=").replace(/%3E/g,">")}return decodeURIComponent(a)};Echelon.util.str2obj=function(f,c,a){if(!f){return"}"}var b,d;switch(f.charAt(0)){case"{":b={};f=f.slice(1);while(f.charAt(0)!="}"){f=f.slice(1);d=f.indexOf('"');f=Echelon.util.str2obj(f.slice(d+2),b,Echelon.util.decodeURIComponent(f.slice(0,d)))}f=f.slice(1);break;case'"':f=f.slice(1);var d=f.indexOf('"');b=Echelon.util.decodeURIComponent(f.slice(0,d));f=f.slice(d+1);break;default:var d=f.search(new RegExp("}|,"));b=f.slice(0,d);f=f.slice(d);if(b=="true"){b=true}else{if(b=="false"){b=false}else{b=Number(b)}}}if(f.indexOf(",")==0){f=f.slice(1)}if(c){c[a]=b;return f}else{return b}};elon.util.normalizeUrl=function(a){a=elon.Url(a);return a.protocol()+"://"+a.ip()+(a.isDefaultPort()?"":(":"+a.port()))};elon.Url=elon.Class({constructor:function(a){this.m_url=a.match(this.m_ipvFourExp)||a.match(this.m_ipvSixExp)||[]},"public":{protocol:function(){return this.m_url[1]||"http"},ip:function(){return this.m_url[2]},port:function(){return this.m_url[3]||{http:80,https:443}[this.protocol()]},fullPath:function(){return this.m_url[4]},path:function(){return this.m_url[5]},file:function(){return this.m_url[6]},parameters:function(){return this.m_url[7]},mark:function(){return this.m_url[8]},isDefaultPort:function(){return{http:80,https:443}[this.protocol()]==this.port()}},"private":{m_ipvFourExp:/^(?:(http[s]?|ftp):\/\/)?([^:\/\s]+)(?::(\d+))?(\/(?:((?:\w+\/)*))?([\w\-\.]+[^#?\s]+)(\?[^#]*)?(#[\w\-]+)?)?$/,m_ipvSixExp:/^(?:(http[s]?|ftp):\/\/)?(\[[^\]]+\])(?::(\d+))?(\/(?:((?:\w+\/)*))?([\w\-\.]+[^#?\s]+)(\?[^#]*)?(#[\w\-]+)?)?$/}});elon.browser={WebKit:(navigator.userAgent.match(/AppleWebKit/)?true:false),FF:(navigator.userAgent.match(/Firefox/)?true:false),Moz:(navigator.appCodeName=="Mozilla"),IE:((navigator.appName=="Microsoft Internet Explorer")||(navigator.appVersion.search("Trident")>-1)),IE6:(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search("MSIE 6.0")>-1),IE7:(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search("MSIE 7.0")>-1),IE8:(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search("MSIE 8.0")>-1),IE9:(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search("MSIE 9.0")>-1)};elon.browser.IE67=elon.browser.IE6||elon.browser.IE7;elon.browser.IE678=elon.browser.IE67||elon.browser.IE8;try{if(elon.browser.IE&&(document.documentMode=="7")){alert('Please turn off compatibility mode to view these pages.\nGo to the "Tools" menu of your Internet Explorer and\nuncheck "Compatibility View".')}}catch(e){}try{if(elon.browser.IE&&navigator.appVersion.match(/MSIE [1-6]\./)){alert("These web pages support Internet Explorer (version 7.0 and above) and Firefox (version 3.6 and above). Most things also work on WebKit based browsers (e.g. Safari, Chrome, iPhone, Android). We recommend Firefox. Please use an appropriate browser.")}}catch(e){}Echelon.XmlHttp=elon.Class({constructor:["m_type","m_timeOut"],"protected":{f_init:function(h,b,c,k,d){this.m_translator=d;this.m_callback=k;this.m_port=c;var a=elon.Url(c);var g=elon.Url(window.location.href);if(((a.protocol()!=g.protocol())||(a.ip()!=g.ip())||(a.port()!=g.port()))&&window.postMessage){this.m_usePostMessageProxy=true}if(!elon.thisIsJustAProxy){this.m_queue=Echelon.XmlHttp.Queue(c||"127.0.0.1")}this.m_instantiate();if(elon.auth&&elon.auth[c]){var i=elon.auth[c].userName;var j=elon.auth[c].userPassword}try{this.f_xmlHttp.open(b,c,true,i,j)}catch(f){if(!Echelon.XmlHttp[c]){elon.Popup.getInstance({elon_url:elon.htmUrl("Alert.htm"),elon_no_scrolling:"true",elon_args_obj:{elon_symbol:elon.imgUrl("Warning.gif"),elon_nls_msg:"CANNOT_ACCESS_REMOTE_HOST_MSG",elon_placeholder_url:c,elon_placeholder_local:elon.window.location.host,elon_placeholder_remote:c.match(new RegExp("^(http://)?([^/:]+)"))[2],elon_nls_title:"CANNOT_ACCESS_REMOTE_HOST_TITLE"}});Echelon.XmlHttp[c]=true}this.f_cb(undefined,this.f_errObj("ERR_WSCLI_ACCESS_DENIED"));return}try{this.f_xmlHttp.onreadystatechange=this.m_readyStateChangeCb}catch(f){this.f_cb(undefined,this.f_errObj("ERR_WSCLI_ACCESS_DENIED"));return}if(elon.thisIsJustAProxy){this.m_call(h)}else{this.m_queue.add(this.m_call,h)}},m_instantiator:[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},function(){return new XMLHttpRequest()}],m_instantiate:function(){if(this.m_usePostMessageProxy){return this.f_xmlHttp=Echelon.CrossDomainXmlHttp(this.m_port,this.m_xcb,this.m_type,this.m_timeOut,this.m_translator)}if(Echelon.XmlHttp.m_instantiator){return this.f_xmlHttp=Echelon.XmlHttp.m_instantiator()}for(var a=0;a<this.m_instantiator.length;a++){try{this.f_xmlHttp=this.m_instantiator[a]();return Echelon.XmlHttp.m_instantiator=this.m_instantiator[a]}catch(b){}}this.f_cb(undefined,this.f_errObj("ERR_WSCLI_SOAP_UNAVAIL"))},f_errObj:function(a){return elon.Error.getInstance(elon.ErrorTable?elon.ErrorTable.getInstance()[a]:1048576)},m_timeout:function(){if(this.m_ready){return}if(this.m_waitingToComplete){return}this.m_timedout=true;this.f_xmlHttp.abort();if(!elon.thisIsJustAProxy){this.m_queue.next()}this.f_cb(null,this.f_errObj("ERR_WSCLI_TIMEOUT"))},"callback:m_readyStateChangeCb":function(){if(this.f_xmlHttp.readyState==3){this.m_waitingToComplete=true}else{if(this.f_xmlHttp.readyState==4){this.m_responseCb(this.f_xmlHttp[this.m_type],this.f_xmlHttp.status)}}},"callback:m_responseCb":function(b,a){this.m_ready=true;if(!this.m_timedout){if(!elon.thisIsJustAProxy){this.m_queue.next()}if(this.m_callback){this.f_cb(b,a)}delete this.f_xmlHttp.onreadystatechange;delete this.f_xmlHttp}},"callback:m_xcb":function(b,a){if(!elon.thisIsJustAProxy){this.m_queue.next()}this.f_cb(b,a)},"callback:f_cb":function(c,b){var a=this.m_callback;delete this.m_callback;a(c,b)}},"private":{"callback:m_call":function(a){if(!this.m_usePostMessageProxy){Echelon.util.callback.fireDelayedFunction(this.m_timeout,this.m_timeOut||(elon.elon.getVal("IntItem","soapTimeout")*1000),this)}this.f_call.apply(this,a)}}});Echelon.XmlHttp.Queue=elon.Class({instantiator:"perServer",constructor:function(a){this.m_url=a;this.m_queue=[];this.m_cbs=[];this.m_active=0},"public":{delaying:function(a){return(this.m_active+(a||0))>=this.m_maxSyncCalls},add:function(a,b){if(this.delaying()){this.m_queue.push({cb:a,args:b})}else{this.m_active++;a(b)}},next:function(){if(this.m_queue.length){var a=this.m_queue.shift();a.cb(a.args)}else{this.m_active--}if(this.m_cbs.length&&!this.delaying()){this.callCbs()}},addCB:function(a){this.m_cbs.push(a)},callCbs:function(){var a=this.m_cbs;this.m_cbs=[];for(var b=0;b<a.length;b++){a[b]()}}},"private":{m_maxSyncCalls:3}});Echelon.PostMessageProxyFarSide=elon.Class({base:{m_xmlHttp:Echelon.XmlHttp},constructor:function(a){this.m_request=a.content;this.m_uid=a.uid;if(a.user){if(!elon.auth){elon.auth={}}elon.auth[a.content.port]={userName:a.user,userPassword:a.password}}this.m_xmlHttp("responseText",this.m_request.timeOut);this.m_table=Echelon.FarSideCrossDomainCommunicator().msgTable},"public":{call:function(){var a=this.m_request;if(this.m_table){if(this.m_table.rows.length>5){this.m_table.deleteRow(0)}this.m_row=this.m_table.insertRow(this.m_table.rows.length);this.m_row.insertCell(this.m_row.cells.length).innerHTML=this.m_uid}this.f_init([a],a.httpMethod,a.port,this.m_postMessage)}},"protected":{f_call:function(a){for(var c in a.header){this.f_xmlHttp.setRequestHeader(c,a.header[c])}var b=a.content;if(this.m_row){this.m_row.insertCell(this.m_row.cells.length).innerHTML=b.split("<Body>")[1].split(" ")[0].slice(1)}this.f_xmlHttp.send(b)},f_errObj:function(a){return"ERROR:"+a}},"private":{"callback:m_postMessage":function(b,a){if(this.m_row){this.m_row.insertCell(this.m_row.cells.length).innerHTML=a}var c={response:b,status:a};Echelon.FarSideCrossDomainCommunicator().send(this.m_uid,c)}}});Echelon.CrossDomainListener=elon.Class({instantiator:"singleton",constructor:function(){elon.util.addEvent(window,"message",this.m_route);this.m_callbackQueue=[];this.m_msgCounter=0},"public":{register:function(b){var a=this.m_msgCounter++;this.m_callbackQueue.push({uid:a,callback:b});return a}},"private":{"callback:m_route":function(d){var a=elon.util.str2obj(d.data);for(var b=0;b<this.m_callbackQueue.length;b++){if(this.m_callbackQueue[b].uid==a.uid){this.m_callbackQueue[b].callback(a.content);var c=this.m_callbackQueue.splice(b,1);break}}}}});Echelon.PostMessageProxy=elon.Class({instantiator:"perServer",constructor:function(d,g,c){this.m_url=d;this.m_translator=c;this.m_iframe=elon.doc.createElement("iframe");if(!this.m_debug){this.m_iframe.style.display="none"}var a=400;var f=200;this.m_iframe.style.left=elon.doc.body.clientWidth-a+"px";this.m_iframe.style.top=Echelon.PostMessageProxy.instanceCounter++*f+"px";this.m_iframe.style.zIndex=10;this.m_iframe.style.position="absolute";this.m_iframe.style.width=a+"px";this.m_iframe.style.height=f+"px";var b=(g=="LnsProxy/LnsProxyService")?"/EES/LnsProxyService/v4.0":"";this.m_finalPath=this.m_iframe.src=this.m_url+b+"/user/shared/PostMessageProxy.htm"+(this.m_debug?"?debug":"");elon.doc.body.insertBefore(this.m_iframe,elon.doc.body.firstChild);elon.util.addEvent(this.m_iframe,"error",this.m_frameErrorCb);elon.util.addEvent(this.m_iframe,"load",this.m_frameLoadedCb);elon.util.fireDelayedFunction(this.m_delayLoadPopup,2500,this);this.m_queue=[]},"public":{send:function(c,d,a,b){if(this.m_broken){return d({status:elon.Error.getInstance(elon.ErrorTable?elon.ErrorTable.getInstance().ERR_WSCLI_POST_MSG_VERSION:1048576)})}if(this.m_verified){return this.m_send(c,d,a,b)}this.m_queue.push([c,d,a,b])}},"private":{m_send:function(c,f,a,b){var d=elon.util.obj2str({content:c,user:a,password:b,uid:Echelon.CrossDomainListener().register(f)});this.m_iframe.contentWindow.postMessage(d,"*")},m_processQueue:function(){while(this.m_queue.length){this.send.apply(this,this.m_queue.shift())}},"callback:m_frameErrorCb":function(){this.m_loaded=true;this.m_closePopup();this.m_verificationTimeout()},"callback:m_frameLoadedCb":function(){this.m_loaded=true;this.m_closePopup();this.m_send("init",this.m_frameVerifiedCb);elon.util.fireDelayedFunction(this.m_verificationTimeout,3000,this)},"callback:m_frameVerifiedCb":function(){this.m_verified=true;this.m_processQueue()},"callback:m_verificationTimeout":function(){if(!this.m_verified){this.m_broken=true}this.m_processQueue()},m_webDpName:function(){if(!this.m_dpName){this.m_dpName=(this.m_tranlator&&this.m_translator.webDpName&&this.m_translator.webDpName("unique",name))||("#Web/global/"+name)}return this.m_dpName},"callback:m_delayLoadPopup":function(){elon.util.fireDelayedFunction(this.m_loadPopup,2500,this)},"callback:m_loadPopup":function(){if(this.m_loaded){return}this.m_popup=true;var a=(this.m_translator&&this.m_translator.argObj&&this.m_translator.argObj.elon_lang)||"en";var b={elon_url:elon.htmUrl("AbortPopup.htm"),ignoreDisableLayer:true,elon_target:"popup",elon_popup_width:400,elon_modal:false,elon_args_obj:{elon_lang:a,elon_nls_title:"ABORT_REMOTE_TITLE",elon_nls_msg:"ABORT_REMOTE_MSG",elon_align:"left",elon_name:this.m_webDpName(),elon_popup_remote:this.m_webDpName(),elon_placeholder_url:this.m_url}};if(elon.Url(this.m_url).protocol()=="https"){b.elon_args_obj.elon_nls_msg="ABORT_REMOTE_MSG_SSL"}elon.Popup.getInstance(b);elon.elon.getTopLevelSSO().subscribe({type:"FormObj_Data",Item:this.m_webDpName(),noInitialCallback:true,callback:this.m_abort})},"callback:m_abort":function(){if(this.m_loaded){return}this.m_verificationTimeout()},"callback:m_closePopup":function(){if(!this.m_popup){return}var a=elon.elon.getTopLevelSSO().getItem({type:"PopupRemote_Data",Item:this.m_webDpName()});a.close.set(true);a.y_proxy_touch();if(this.m_closedPopup){delete this.m_popup;delete this.m_closedPopup}else{this.m_closedPopup=true;elon.util.fireDelayedFunction(this.m_closePopup,3000,this)}}}});Echelon.PostMessageProxy.instanceCounter=0;Echelon.CrossDomainXmlHttp=elon.Class({constructor:function(d,i,g,h,f){var a=d.split("/");var b=a.shift()+"//";a.shift();var c=a.shift();var j=a.join("/");this.pmp=Echelon.PostMessageProxy(b+c,j,f);this.m_cb=i;this.m_type=g;this.request={header:{},timeOut:h||(elon.elon.getVal("IntItem","soapTimeout")*1000)}},"private":{"callback:m_contentProcessor":function(c){var b=c.response;var a=c.status;if(a.search&&a.search("ERROR:")==0){a=elon.Error.getInstance(elon.ErrorTable?elon.ErrorTable.getInstance()[a.slice(6)]:1048576)}else{if(this.m_type=="responseXML"&&b){b=Echelon.XmlParser.getInstance().xml2Dom(b)}}this.m_cb(b,a)}},"public":{open:function(a,c,f,b,d){this.request.httpMethod=a;this.request.port=c;this.user=b;this.password=d},setRequestHeader:function(a,b){this.request.header[a]=b},send:function(a){this.request.content=a;this.pmp.send(this.request,this.m_contentProcessor,this.user,this.password)},abort:function(){}}});Echelon.TextFetcher=elon.Class({base:{m_xmlHttp:Echelon.XmlHttp},constructor:function(a){this.m_xmlHttp("responseText",a)},"public":{get:function(a,b){this.f_init(arguments,"GET",a,b)}},"protected":{f_call:function(a,c){try{this.f_xmlHttp.send(null)}catch(b){this.f_cb(undefined,this.f_errObj("ERR_WSCLI_ACCESS_DENIED"))}}}});Echelon.getTextFromServer=function(b,c,a){Echelon.TextFetcher(a).get(b,c)};Echelon.Class.Backport=function(b){var a=b;return function(){var g=a.elonClass.prototype;for(var f in g){switch(f){case"m_elonClass":continue;break;default:this[f]=g[f]}}var c=new (elon.CallbackManager)(this);var d=g.m_elonClass.callback;for(var f in d){this[f]=c.create((typeof(d[f])=="string")?g[d[f]]:d[f])}a.elonClass.prototype.m_elonClass.constructor.apply(this,arguments)}};Echelon.Error=function(){};Echelon.Error.getInstance=function(b,c){var a=new Echelon.Error();if(b!=null){a.setFault(b,c)}return a};Echelon.Error.prototype.faultCode=4194304;Echelon.Error.prototype.faultString="";Echelon.Error.prototype.setFault=function(a,b){this.faultCode=a;if(Echelon.ErrorManager){this.faultString=Echelon.ErrorManager.getInstance().buildFaultString(a,b)}else{this.faultString="Unknown error - error manager not loaded yet."}};elon.Dom=function(){this.getEventOffsetX=function(evt){if(elon.browser.IE){return evt.screenX-window.screenLeft+elon.window.document.body.scrollLeft}else{return evt.clientX+elon.dom.getWindowOffsetX(elon.dom.getDefaultView(elon.util.sourceObj(evt)))}};this.getEventOffsetY=function(evt){if(elon.browser.IE){return evt.screenY-window.screenTop+elon.window.document.body.scrollTop}else{return evt.clientY+elon.dom.getWindowOffsetY(elon.dom.getDefaultView(elon.util.sourceObj(evt)))}};this.pageX=function(evt){if(elon.browser.IE7||elon.browser.IE6){return evt.clientX}if(elon.browser.IE){return evt.clientX+elon.dom.getDefaultView(elon.util.sourceObj(evt)).document.documentElement.scrollLeft}return evt.pageX};this.pageY=function(evt){if(elon.browser.IE7||elon.browser.IE6){return evt.clientY}if(elon.browser.IE){return evt.clientY+elon.dom.getDefaultView(elon.util.sourceObj(evt)).document.documentElement.scrollTop}return evt.pageY};this.getWindowOffsetX=function(win){return elon.dom.m_getWindowOffset(win,"X")},this.getWindowOffsetY=function(win){return elon.dom.m_getWindowOffset(win,"Y")},this.m_getWindowOffset=function(win,dim){try{if(win==win.parent){return 0}for(var i in {FRAME:1,IFRAME:1,FRAMESET:1}){var children=win.parent.document.getElementsByTagName(i);for(var j=0;j<children.length;j++){if(children[j].contentDocument==win.document){return elon.dom["getWindowOffset"+dim](win.parent)+elon.dom["getAbsolute"+dim+"Offset"](children[j])}}}}catch(e){return 0}throw new Error("Failed to determine window offset")};this.getTopWindow=function(win){try{if(win==win.parent){return win}for(var i in {FRAME:1,IFRAME:1,FRAMESET:1}){var children=win.parent.document.getElementsByTagName(i);for(var j=0;j<children.length;j++){try{if(children[j].contentDocument==win.document){return elon.dom.getTopWindow(win.parent)}}catch(e){}}}}catch(e){return win}};this.getDefaultView=function(domObj){try{if(elon.browser.IE678){return domObj.parentWindow||domObj.ownerDocument.parentWindow}else{return domObj.defaultView||domObj.ownerDocument.defaultView}}catch(e){throw"Tried to determine inaccessible default view"}};this.getDocumentOffsetX=function(doc){if(elon.browser.IE){return doc.parentWindow.screenLeft-EchelonTop.window.screenLeft}else{return elon.dom.getWindowOffsetX(doc.defaultView)}};this.getDocumentOffsetY=function(doc){if(elon.browser.IE){return doc.parentWindow.screenTop-EchelonTop.window.screenTop}else{return elon.dom.getWindowOffsetY(doc.defaultView)}};this.getAbsoluteXOffset=function(obj,ignoreScroll){if(elon.browser.WebKit&&(obj.name=="appFrame")){var sid=elon.elon.getFrameByName("sidebarFrame");if(sid){return sid.offsetWidth}return 0}return elon.dom.m_getAbsoluteOffset(obj,ignoreScroll,"Left")};this.getAbsoluteYOffset=function(obj,ignoreScroll){if(elon.browser.WebKit&&((obj.name=="sidebarFrame")||(obj.name=="appFrame"))){var men=elon.elon.getFrameByName("menuFrame");if(men){return men.offsetHeight}return 0}return elon.dom.m_getAbsoluteOffset(obj,ignoreScroll,"Top")};this.m_getAbsoluteOffset=function(obj,ignoreScroll,dim){var x=0;var scroll=0;if(!ignoreScroll){var scrollObj=obj;do{scroll+=scrollObj["scroll"+dim]||0}while(scrollObj=scrollObj.parentNode)}do{x+=obj["offset"+dim]}while(obj=obj.offsetParent);return x-scroll};this.getBrowserX=function(obj){return thisObj.getAbsoluteXOffset(obj,false)+thisObj.getDocumentOffsetX(obj.ownerDocument)};this.getBrowserY=function(obj){return thisObj.getAbsoluteYOffset(obj,false)+thisObj.getDocumentOffsetY(obj.ownerDocument)};this.appendOption=function(selectObj,option){if(elon.browser.IE){selectObj.add(option)}else{selectObj.add(option,null)}};this.removeOption=function(selectObj,idx){if(elon.browser.IE){selectObj.remove(idx)}else{selectObj.options[idx]=null}};this.appendRow=function(table){return table.insertRow(table.rows.length)};this.appendCell=function(row){return row.insertCell(row.cells.length)};this.getAttr=function(domObj,attrName){if(domObj.getAttributeNode==null){return null}var attrNode=domObj.getAttributeNode(attrName);return(attrNode==null)?null:thisObj.m_correctVal(attrNode.value)};this.m_correctVal=function(val){if(val=="true"||val=="false"){return(val=="true")}return val};this.attachSimpleParams=function(attrObj,domObj){var attr,attrName,val,postFix;for(var i=0;i<domObj.attributes.length;i++){attr=domObj.attributes[i];attrName=attr.nodeName.toLowerCase();if(attrName.slice(0,4)!="elon"||attrName=="elon_arg_type"||attrName=="elon_arg_name"||attrName=="elon_arg_val"){continue}val=attr.value;postFix=attrName.slice(attrName.length-4);if(postFix=="_arr"){try{eval("elon.m_tmpEvalObj="+attr.value);var val=elon.m_tmpEvalObj;if(val&&val.length){for(var j=0;j<val.length;j++){if(typeof val[j]=="object"){val[j]=thisObj.m_elonize(val[j])}}}}catch(e){}}else{if(postFix=="_obj"){try{eval("elon.m_tmpEvalObj="+attr.value);var temp=elon.m_tmpEvalObj;var val=new Object();for(var prop in temp){val["elon_"+prop]=temp[prop]}}catch(e){}}else{val=thisObj.m_correctVal(val)}}attrObj[attrName]=val}return attrObj};this.m_elonize=function(obj){var val=new Object();for(var prop in obj){val["elon_"+prop]=obj[prop]}return val};this.vAlignCenter=function(domObj){domObj.parentNode.style.height="100%";if(elon.browser.IE){domObj.style.position="relative";domObj.style.top=(100*(0.5-((domObj.offsetHeight/domObj.parentNode.offsetHeight)/2))).toString()+"%"}else{domObj.style.display="table-cell";domObj.style.verticalAlign="middle";domObj.parentNode.style.display="table"}};this.hAlignCenter=function(domObj){domObj.style.width="100%";domObj.parentNode.style.width="100%";domObj.style.textAlign="center"};this.alignCenter=function(domObj){thisObj.vAlignCenter(domObj);thisObj.hAlignCenter(domObj);return domObj};this.docScrollWidth=function(domObj){return domObj.ownerDocument.documentElement.scrollWidth};this.docClientWidth=function(domObj){return domObj.ownerDocument.documentElement.clientWidth};this.docScrollHeight=function(domObj){return domObj.ownerDocument.documentElement.scrollHeight};this.docClientHeight=function(domObj){return domObj.ownerDocument.documentElement.clientHeight};this.scrollBarSize=function(){return 18};this.scrollBarWidth=function(domObj){return(elon.dom.docScrollWidth(domObj)-elon.dom.docScrollWidth(domObj))&&elon.dom.scrollBarSize()};this.scrollBarHeight=function(domObj){return(elon.dom.docScrollHeight(domObj)-elon.dom.docScrollHeight(domObj))&&elon.dom.scrollBarSize()};var thisObj=this};elon.dom=new elon.Dom();elon.dom.getBodyClientHeight=function(a){a=a||EchelonTop.document;if(!elon.browser.IE||EchelonTop.document.body.elon_frameset){return a.body.clientHeight}else{if(a.documentElement.clientHeight){return a.documentElement.clientHeight}else{return a.documentElement.scrollHeight}}};elon.dom.getBodyScrollHeight=function(a){a=a||EchelonTop.document;if(EchelonTop.document.body.elon_framseset){return a.body.scrollHeight}else{return a.documentElement.scrollHeight}};elon.webDpPrefix="#Web/global/";Echelon.provide=function(b,a){};Echelon.include=function(b,f,k){if(!b){return}var g=b;var j=f;try{j&&j.foo}catch(h){return}var i=k;j=j||elon.doc;var c=(i==null)||(i=="SCRIPT");i=(i==null)?"SCRIPT":i;var a=(c?"scripts/":"styles/")+g+(c?".js":".css");if(j.elonInclude){var d=j.elonInclude[(c?"js":"css")];if(d){if(d.Available&&d.Available[a]){elon.util.callback.fireQuickCallback(Echelon.callCBs,Echelon,j,c?"js":"css");return}if(d.Requested&&d.Requested[a]){return d.Requested[a]}}}return Echelon[(c?"Javascript":"Css")+"Parser"](j,a)};Echelon.orderedInclude=function(a){var d,c;for(var b=0;b<a.length;b++){d=Echelon.include(a[b]);if(c&&!c.done){d.addMissing(c)}c=d}};Echelon.dynInclude=function(b,a){Echelon.include(b,a,"SCRIPT")};Echelon.dynIncludeStyle=function(b,a){Echelon.include(b,a,"STYLE")};Echelon.includeCB=function(d,c,b){var a=elon.dom.getDefaultView(c).Echelon;b=b||"js";if(!a.m_includeCBs){a.m_includeCBs={}}if(!a.m_includeCBs[b]){a.m_includeCBs[b]=[]}a.m_includeCBs[b].push(d)};Echelon.callCBs=function(g,c){var f=elon.dom.getDefaultView(g);if(!f.Echelon.m_includeCBs||!f.Echelon.m_includeCBs[c]||elon.util.countProps(g.elonInclude[c].Requested)){return}var h=(g!=elon.doc&&elon.util.countProps(elon.doc.elonInclude[c].Requested)!=0);while(f.Echelon.m_includeCBs[c].length){try{var a=f.Echelon.m_includeCBs[c].shift()}catch(d){var a=f.Echelon.m_includeCBs[c][0];for(var b=1;b<f.Echelon.m_includeCBs[c].length;b++){f.Echelon.m_includeCBs[c][b-1]=f.Echelon.m_includeCBs[c][b]}f.Echelon.m_includeCBs[c].length=f.Echelon.m_includeCBs[c].length-1}if(h){elon.includeCB(a,elon.doc,c)}else{elon.util.callback.fireQuickCallback(a)}}delete f.Echelon.m_includeCBs[c]},Echelon.LibParser=elon.Class({constructor:function(c,a){if(c.elonInclude==null){c.elonInclude=new Object()}if(c.elonInclude[this.f_type]==null){c.elonInclude[this.f_type]=new Object()}var b=c.elonInclude[this.f_type];if(b.Requested==null){b.Requested=new Object()}if(b.Available==null){b.Available=new Object()}this.f_doc=c;this.f_file=a;this.f_win=elon.dom.getDefaultView(this.f_doc);if(this.f_checkAvailability){this.f_checkAvailability(c,a)}b.Requested[a]=this;this.m_requests=0;Echelon.util.callback.fireQuickCallback(this.m_request,this)},"protected":{f_done:function(){this.done=true;var a=this.f_doc.elonInclude[this.f_type];a.Available[this.f_file]=true;delete a.Requested[this.f_file];Echelon.callCBs(this.f_doc,this.f_type)}},"private":{"callback:m_cb":function(a){if(!a){return this.f_retry()}try{this.f_doc.getElementById("foo")}catch(b){return}this.f_parse(a)},m_request:function(){this.m_requests++;elon.getTextFromServer(elon.rootUrl(this.f_file),this.m_cb,60000)},f_retry:function(a){this.m_requests=10;if(a&&(this.m_requests==1)&&elon.debugWebUi){alert('Eval error in "'+this.f_file+'":\n'+a.message)}if((this.m_requests>9)&&elon.debugWebUi){alert('The file "'+this.f_file+'" could not be loaded.\nEither the file is missing on the server or there is a connection problem.\nYou might try to reload the page.')}else{Echelon.util.callback.fireDelayedFunction(this.m_request,20000,this)}}}});Echelon.JavascriptParser=elon.Class({base:{m_libParser:Echelon.LibParser},constructor:function(a,b){this.m_libParser(a,b,"scripts/"+b+".js");this.m_missing=[];this.m_dependent=[]},"public":{addDependent:function(a){this.m_dependent.push(a)},removeMissing:function(b){for(var a=0;a<this.m_missing.length;a++){if(b==this.m_missing[a]){this.m_missing.splice(a--,1)}}if(!this.m_missing.length&&this.preparsed){this.m_realParse()}},addMissing:function(a){a.addDependent(this);this.m_missing.push(a)}},"protected":{f_type:"js",f_parse:function(a){if(elon.debugWebUi){a=this.m_debug(a)}this.f_txt=a;this.m_includeMissingLibraries();this.preparsed=true}},"private":{m_includeExtractorExp:new RegExp("(Ech)?elon\\.include\\s*\\([^\\)]+\\)","g"),m_includeAnalyserExp:new RegExp('\\(\\s*\\"([^\\"]+)\\"\\s*(?:,\\s*([^\\s,\\)]+)\\s*)?(?:,\\s*\\"SCRIPT\\"\\s*)?\\)'),m_rewriteFuncExp:new RegExp("(\\W|^)(function[ \\t]+)([\\w\\.]+)","g"),m_breakExp:new RegExp("elon_breakpoint=([^&]+)"),m_editExp:function(a){return new RegExp("("+a+"[\"']?\\s*(?:=|:)\\s*(?:this?\\.?\\w+\\.create\\()?\\s*function\\s*\\([^)]*\\)\\s*{)","g")},m_editPosExp:function(a){return new RegExp("((?:[^\\n]*\\n){"+a+"})")},m_libName:function(){return this.f_file.match(/[^\/]+$/)[0]},m_alert:function(a){elon.m_breakpoints[a]="k";return"$1try{if(elon.m_breakpoints['"+a+"'] && !((elon.m_breakpoints['"+a+"'].length > 1) && !eval(elon.m_breakpoints['"+a+"']))) elon.m_evalBreakpoint('"+a+"');} catch(e) {} if(elon.m_breakpoints['"+a+"'] == 't') throw {elon_uncatchable:true};"},m_debug:function(a){var d=elon.window.location.search.match(this.m_breakExp);if(!d){return a}if(!elon.m_breakpoints){elon.m_breakpoints={}}d=d[1].split(",");for(var c=0;c<d.length;c++){if(this.m_libName().match(/^[^\.]+/)[0]==d[c].match(/^[^\.]+/)[0]){var b=d[c].match(/[^\.]+$/)[0];var f=(b.match(/^\d+$/)&&"\n")||"";a=a.replace(f?this.m_editPosExp(b):this.m_editExp(b),this.m_alert(d[c])+f)}}return a},m_includeMissingLibraries:function(){var d=this.f_txt.match(this.m_includeExtractorExp);if(d){for(var c=0;c<d.length;c++){var g=false;var a=d[c].match(this.m_includeAnalyserExp);if(!a){continue}var b="scripts/"+a[1]+".js";var f=(a[2]=="document")?this.f_doc:elon.doc;var h=Echelon.include(a[1],f);if(h&&!h.done){this.addMissing(h)}}}if(!this.m_missing.length){this.m_realParse()}},m_realParse:function(){if(typeof(window.console)!=""){try{this.f_win.eval(this.f_txt+"//@ sourceURL="+this.f_file)}catch(e){return this.f_retry(e)}}else{var callMethod=elon.browser.IE678?"missingApplyWorkaroundCall":"call";var evalMethod=elon.browser.IE678?this.f_win.execScript:this.f_win.eval;if(!elon.ExceptionHandler()[callMethod](evalMethod,[this.f_txt],this.f_win)){return this.f_retry()}}while(this.m_dependent.length){this.m_dependent.shift().removeMissing(this)}this.f_done()}}});Echelon.CssParser=elon.Class({base:{m_libParser:Echelon.LibParser},constructor:function(a,b){this.m_libParser(a,b,"styles/"+b+".css")},"protected":{f_type:"css","callback:f_parse":function(){var c=this.f_doc.getElementsByTagName("HEAD");var f;if(c.length==0){var b=this.f_doc.createElement("HEAD");var d=this.f_doc.getElementsByTagName("HTML");f=d[0].appendChild(b)}else{f=c[0]}var a=this.f_doc.createElement("LINK");a.type="text/css";f.appendChild(a);a.href=elon.rootUrl(this.f_file);a.rel="stylesheet";this.f_done()},f_checkAvailability:function(f,d){var g=this.f_doc.getElementsByTagName("head");for(var c=0;c<g.length;c++){var a=g[c].getElementsByTagName("link");for(var b=0;b<a.length;b++){if(a[b].href&&a[b].href.match(new RegExp(d+"$"))){return f.elonInclude[this.f_type].Available[d]=true}}}}}});elon.m_evalBreakpoint=function(a){var c='elon_breakpoint: "'+a+'" - <k>eep, <d>isable (also cancel), <t>hrow an exception, or enter an expression';var b;switch(b=prompt(c,elon.m_breakpoints[a])){case"k":elon.m_breakpoints[a]=b;break;case"d":elon.m_breakpoints[a]=null;break;case"t":elon.m_breakpoints[a]=b;break;default:elon.m_breakpoints[a]=b}};Echelon.provideLock=false;Echelon.filter={};Echelon.GetFilter=function(b){var a=b;this.filter=function(c){if(c==null){return null}else{return a(c)}}};Echelon.filter.imgToAnnotation=function(b,a){if((a==null)&&((b=="Default")||(b==""))){return null}return((b||"").replace(/^\s*/,"")+(a||"").match(/(;.+)?$/)[0])||null};Echelon.filter.annotationToImg=function(a){return a?a.match(/^[^;]*/)[0]:"Default"};Echelon.qualifierToIcon=function(c,b,f){if(b&&b.UCPTannotation){f=b.y_proxy_getNameType();b=b.UCPTannotation.get()}b=(b||"").replace(new RegExp(";local"),"").replace(new RegExp(";xsi:type.*"),"").replace(/^#/,"");var a=b.match(/\[\w+=(\w+)]/);var g=f?("Default"+f.replace(/^LON/,"")):"Default";var d=b||g;if(d=="?"){d=g}return elon.imgUrl("")+c+"/"+d+".gif"};Echelon.filter.qualifierToTinyIcon=function(a,b){return Echelon.qualifierToIcon("tree",a,b)};Echelon.filter.qualifierToMediumIcon=function(a,b){return Echelon.qualifierToIcon("app",a,b)};Echelon.filter.annotationType=function(a){a=a&&a.match(Echelon.filter.annotationType.m_annoTypeRegExp);return a&&a[2]};Echelon.filter.annotationType.m_annoTypeRegExp=new RegExp(";xsi:type=('|\")(\\w*)\\1");Echelon.filter.annotationInternal=function(a){return Echelon.filter.annotationInternal.m_annoIntExp.test(a)};Echelon.filter.annotationInternal.m_annoIntExp=new RegExp(';local(;xsi:type="\\w*")?$');Echelon.filter.driverType=function(a){return a&&{LON:true,MBS:true,MOD:true,Virtual:true}[a.match(/^[^_]*/)[0]]||false};Echelon.filter.driverAnnotation=function(a){return Echelon.filter.driverType(Echelon.filter.annotationType(a))};Echelon.filter.nameToGenericType=function(a){return["Network","Channel","Device","Fb","Dp"][a.split("/").length-1]};Echelon.filter.webDp=function(a){return a&&!a.search("#Web/")};Echelon.filter.msgColor=function(a){return{_error:"red",_warning:"orange",_info:"black",_debug:"gray"}[a]};Echelon.filter.hostURL=function(a){return(a.indexOf(":")>-1&&a.indexOf("[")==-1)?"["+a+"]":a};Echelon.filter.hostAndPort=function(a){return elon.filter.hostURL(a.location.hostname)+(a.location.port!=""?(":"+window.location.port):"")};Echelon.filter.serviceIdx=function(b){var a=b.match(new RegExp("//WebService\\[UCPTindex=(\\d+)]"));return a&&a[1]};Echelon.filter.m_Parent=elon.Class({constructor:function(a){this.m_exp=new RegExp("^[^\\/]+(\\/[^\\/]+){"+{Channel:1,Device:2,Fb:3}[a]+"}")},closure:function(a){a=a&&a.match(this.m_exp);return a&&a[0]}});Echelon.filter.parentChannelName=Echelon.filter.m_Parent("Channel");Echelon.filter.parentDeviceName=Echelon.filter.m_Parent("Device");Echelon.filter.parentFbName=Echelon.filter.m_Parent("Fb");Echelon.initPrototype=function(c,a){for(var b in a){c.prototype[b]=a[b]}};Echelon.copyPrototype=function(d,c,b){var f=c.toString();if(b==null){var a=f.match(new RegExp("\\s*function\\s+(.*)\\("))}if(b||a){d.prototype[b||a[1].replace(/^.+\./,"")]=c}Echelon.initPrototype(d,c.prototype)};Echelon.getSoapUrl=function(c,b){if(typeof(c)=="string"){return c}var a=(c.elon_soap_url||elon.elon.getHrefParams(EchelonTop.window).args.elon_soap_url||elon.elon.getHrefParams(b).args.elon_soap_url||Echelon.filter.hostAndPort(b));if(a.search("/")<0){a+=elon.dom.getAttr(EchelonTop.document.body,"elon_soap_endpoint")||(elon.elon&&elon.elon.getTopLevelSSO()&&elon.elon.getTopLevelSSO().getPath())||"/WSDL/iLON100.WSDL"}return a};Echelon.PerServerInstantiator=function(a){var b=function(d,g){if(d==null){throw new Error("Called PerServerInstantiator without passing url")}var h=(typeof(d)=="string")?d:Echelon.getSoapUrl(d.argObj,d.getWindow());var f=elon.util.normalizeUrl(h);if(c.instances[f]==null){c.instances[f]=new c(h,g)}return c.instances[f]};var c=a;a.instances={};a.getInstance=b};Echelon.Singleton=function(a){var b=function(){if(c.instance==null){c.instance=new c()}return c.instance};var c=a;a.instance=null;a.getInstance=b};Echelon.ExceptionHandler=elon.Class({constructor:function(){this.m_handlers=-1},instantiator:"singleton","public":{call:function(c,a,d){this.m_handlers++;try{c.apply(d,a);this.m_handlers--;return true}catch(f){var b=this.m_handle(f,c,a,d)}this.m_handlers--;if(b){b.func.apply(b.thisRef,b.args)}return false},missingApplyWorkaroundCall:function(c,a){this.m_handlers++;try{c(a);this.m_handlers--;return true}catch(d){var b=this.m_handle(d,c,a)}this.m_handlers--;if(b){b.func(b.args)}return false}},"private":{m_repeat:function(b,a){var c=b.message||b.name;if((c&&c.search("Can't execute code from a freed script")!=0)&&(c!="Permission denied")&&(c!="Unexpected call to method or property access.")&&(c!="")&&elon.debugWebUi){return confirm("A callback raised an exception:\n"+c+"\n\nCallback is:\n"+a)}else{return true}},m_handle:function(f,b,a,d,c){if(f.elon_uncatchable){throw f}else{if(f.elon_rethrow){if(this.m_handlers){this.m_handlers--;throw f}return f.elon_rethrow}else{if(!this.m_repeat(f,b)){if(this.m_handlers){this.m_handlers--;f.elon_rethrow={func:b,thisRef:d,args:a};throw f}else{return{func:b,args:a,thisRef:d}}}}}}}});EchelonTop.Import=function(c,a,b){alert("EchelonTop.Import was called in the iLON vision v4.0 framework.\nThis should never happen.\nPlease use elon.include instead.\nAnd dont forget a elon.provide at the end of the file.")};Echelon.FarSideCrossDomainCommunicator=elon.Class({instantiator:"singleton",constructor:function(){window.elonAddEvent(window,"message",this.m_handleMessage);this.m_topDiv=document.body.appendChild(document.createElement("div"));this.m_topDiv.innerHTML="<b>"+window.location.host+"</b>";if(window.location.search.search("debug")>=0){this.m_initDebugger()}},"public":{send:function(a,b){var c=Echelon.util.obj2str({uid:a,content:b});this.m_source.postMessage(c,"*")}},"private":{m_initDebugger:function(){this.msgTable=document.body.appendChild(document.createElement("table"))},"callback:m_handleMessage":function(a){this.m_source=a.source;this.m_origin=a.origin;var b=elon.util.str2obj(a.data);if(b.content=="init"){this.m_topDiv.innerHTML+=" init";this.send(b.uid,"ok");this.m_topDiv.innerHTML+=" ok"}else{Echelon.PostMessageProxyFarSide(b).call()}}}});if(Echelon.thisIsJustAProxy){window.elonAddEvent=function(c,b,a){if(window.addEventListener){c.addEventListener(b,a,false)}else{if(window.attachEvent){c.attachEvent("on"+b,a)}}};window.elonInit=function(){Echelon.FarSideCrossDomainCommunicator()};window.elonAddEvent(window,"load",window.elonInit)}else{elon.WSDLSoapCalls={};elon.WSDLSimpleTypes={};elon.WSDLComplexTypes={};elon.WSDLInternalTypes={};elon.addSoapType=function(b,a,c){c.type=a;return elon[b][a]=c};elon.addSoapType.internal=function(b,a,c){return elon.WSDLInternalTypes[a]=elon.addSoapType(b,a,c)};elon.addSoapType.complex=function(a,b){return elon.addSoapType("WSDLComplexTypes",a,b)};elon.addSoapType.complex.internal=function(a,b){return elon.addSoapType.internal("WSDLComplexTypes",a,b)};elon.addSoapType.simple=function(a,b){return elon.addSoapType("WSDLSimpleTypes",a,b)};elon.addSoapType.simple.internal=function(a,b){return elon.addSoapType.internal("WSDLSimpleTypes",a,b)};Echelon.orderedInclude(["echelon/Echelon","echelon/wsdl_4_0","echelon/wsdl_3_0","echelon/wsdl_web_internal","echelon/soapProxy","echelon/System","echelon/Popup","echelon/EditConfigPopup","echelon/Menu","echelon/Form","echelon/Utilities","echelon/LoggerCache"]);elon.include("echelon/Global",EchelonTop.document,"STYLE");elon.include("echelon/Menu",EchelonTop.document,"STYLE")};