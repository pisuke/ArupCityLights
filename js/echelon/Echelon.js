Echelon.ViewLookup=Echelon.Class({constructor:function(){this.m_table=[];this.m_buildLookupTable()},instantiator:"singleton","public":{getLibName:function(a){var b=this.m_table[a.toLowerCase()].libName;return b?"echelon/"+b:null},getInitFunc:function(a){return this.m_table[a.toLowerCase()].initFunction},getPrerequisites:function(b,a){return this.m_table[b.toLowerCase()].clas&&this.m_table[b.toLowerCase()].clas(a).elonClass&&this.m_table[b.toLowerCase()].clas(a).elonClass.prerequisites},getNls:function(c,e){if(c=="nlstext"){if(elon.browser.IE6){var d=decodeURI(e.location.pathname)}else{var d=e.location.pathname}var f=d.match(/[^\/]*$/)[0];var b="nls/"+f.replace(/\.[^.]*$/,"");return(window.location.protocol+"//"+window.location.host+d.replace(f,b))}else{var a=this.m_table[c.toLowerCase()].nls;return a?elon.rootUrl("nls/echelon/"+a):null}},getAutoSubmit:function(a){return this.m_table[a.toLowerCase()].autoSubmit}},"private":{m_ClassFetcher:Echelon.Class({constructor:["m_name"],closure:function(b){var a=elon[this.m_name]||elon.dom.getDefaultView(b).Echelon[this.m_name];if(!a){elon.elon.setDbgMsg('WebUI internal error: unknown type "'+this.m_name+'"');elon.elon.setErrMsg("WebUI internal error")}return a}}),m_InitFunction:Echelon.Class({constructor:["m_name"],closure:function(a){return(elon[this.m_name]||elon.dom.getDefaultView(a.domObj).Echelon[this.m_name]).getInstance(a)}}),m_EntryInitializer:Echelon.Class({constructor:["m_obj"],closure:function(a){elon.dom.getDefaultView(a.domObj).Echelon[this.m_obj].getInstance(a).init()}}),m_newEntry:function(c,g,d,b,f,a){var e=new Object();e.libName=g;if(d==null){d=g.replace(new RegExp("^8000010128000000\\[4]."),"")}if(b!=null){e.nls=b}e.initFunction=(typeof(d)=="string")?this.m_InitFunction(d):d;if(typeof(d)=="string"){e.clas=this.m_ClassFetcher(d)}e.autoSubmit=f;e.topLevel=a;this.m_table[c.toLowerCase()]=e},m_newShortEntry:function(b,a,c){this.m_newEntry(b,b,b,a,c,true)},m_newEntryWinit:function(b,d,c,a){if(c==null){c=d.replace(new RegExp("^8000010128000000\\[4]."),"")}this.m_newEntry(b,d,this.m_EntryInitializer(c),a)},m_submitButtonInit:function(b){b.elon_options=new Object();b.elon_options[b.nls.SUBMIT]="false";b.elon_options["*** "+b.nls.SUBMIT+" ***"]="true";b.elon_webdpname="#Web/global/submit";b.elon_no_initial_callback="true";var a=elon.viewButtonObject.getInstance(b);a.domObj.style.whiteSpace="nowrap"},m_progressIndicatorInit:function(b){b.elon_webdpname="#Web/global/progressImage";b.elon_no_initial_callback="true";var a=elon.viewImageObject.getInstance(b)},m_titlebarInit:function(a){a.elon_webdpname="#Web/global/titleDP";a.domObj.className="Title";elon.viewShowValueObject.getInstance(a)},m_backButtonInit:function(b){var a=elon.viewButtonObject.getInstance(b);b.domObj.innerHTML=a.translate("NAVIGATE_BACK");a.addEvent("click",function(c){elon.window.history.back(c)})},m_nlsTextInit:function(b){var a=b.domObj.innerHTML.replace(new RegExp("^[ ]*"),"").replace(new RegExp("[ ]*$"),"");b.domObj.innerHTML=b.nls[a]||a},m_linkInit:function(f){if(!f||!(f.elon_url||(f.domObj&&f.domObj.href))){return}f.sourceWindow=elon.dom.getDefaultView(f.domObj);var c=f.domObj;if(f.domObj.nodeName=="A"){f.elon_url=f.domObj.href;f.elon_target=f.domObj.target}else{var e=f.domObj;for(var b=0;b<f.domObj.childNodes.length;b++){var d=f.domObj.childNodes[b];var a=d.tagName;if(a=="IMG"){e=d}if(a=="INPUT"){e=false}if(a=="INPUT"||a=="IMG"){c=d}}if(e){elon.util.addClassName("link",e)}}elon.UtilObject.getInstance().addEvent(c,"click",function(g){elon.util.catchEvent(g);elon.elon.followLink(f);return false})},m_buildLookupTable:function(){this.m_newEntry("combo",null,function(f){f.mode="DP";elon.viewComboBoxObject.getInstance(f)},"COMMON");this.m_newEntry("button",null,"viewButtonObject","COMMON");this.m_newEntry("textfield",null,"viewTextfieldObject","COMMON");this.m_newEntry("dpvaluetextfield",null,"viewDpValueTextfieldObject","COMMON");this.m_newEntry("textarea",null,"viewTextareaObject","COMMON");this.m_newEntry("radio",null,"viewRadiobuttonObject","COMMON");this.m_newEntry("image",null,"viewImageSwapperObject","COMMON");this.m_newEntry("showvalue",null,"viewShowValueObject","COMMON");this.m_newEntry("checkbox",null,"viewCheckboxObject","COMMON");this.m_newEntry("select",null,"viewSelectionObject","COMMON");this.m_newEntry("SvgControl","SvgForm","SvgForm","COMMON",false,true);this.m_newEntry("editvalue",null,"viewEditValueObject","COMMON");this.m_newEntry("slider","ViewSliderObject","viewSliderObject");this.m_newEntry("labeled_slider","ViewTimeRangeSliderObject","viewLabeledSliderObject");this.m_newEntry("generic","GenericView","GenericView","COMMON",false,true);this.m_newEntry("messagebar",null,"viewMessageBarObject");this.m_newEntry("submitbutton",null,this.m_submitButtonInit,"COMMON");this.m_newEntry("progressindicator",null,this.m_progressIndicatorInit,"COMMON");this.m_newEntry("nlstext",null,this.m_nlsTextInit);this.m_newEntry("titlebar",null,this.m_titlebarInit);this.m_newEntry("link",null,this.m_linkInit);this.m_newEntry("backbutton",null,this.m_backButtonInit,"COMMON");this.m_newEntry("pageproperties",null,"PageProperties");this.m_newEntry("software_version","SoftwareVersion","SoftwareVersion");var e={globalsettings:"GlobalSettings",driver_webbinder_cfg:"Driver_WebBinder_Cfg",item_cfg:"Item_Cfg",network_cfg:"Network_Cfg",channel_cfg:"Channel_Cfg",device_cfg:"Device_Cfg",fb_cfg:"Fb_Cfg",fpm_cfg:"FPM_Cfg",dp_cfg:"Dp_Cfg",ufptnodeobject_cfg:"UFPTnodeObject_Cfg",ufptwebserver_cfg:"UFPTwebServer_Cfg",virtual_channel_cfg:"Virtual_Channel_Cfg",virtual_device_cfg:"Virtual_Device_Cfg",virtual_dp_cfg:"Virtual_Dp_Cfg",virtual_fb_cfg:"Virtual_Fb_Cfg",lns_sync_settings:"LnsSyncSettings",lon_network_cfg:"Lon_Network_Cfg",lon_channel_cfg:"Lon_Channel_Cfg",lon_device_cfg:"Lon_Device_Cfg",lon_device_router_cfg:"Lon_Device_Router_Cfg",lon_device_network_interface_cfg:"Lon_Device_NetworkInterface_Cfg",lon_device_rni_cfg:"Lon_Device_RNI_Cfg",lon_fb_cfg:"Lon_Fb_Cfg",lon_dp_cfg:"Lon_Dp_Cfg",lon_cp_dp_cfg:"Lon_Cp_Dp_Cfg",lon_cp_file_cfg:"Lon_Cp_File_Cfg",mod_channel_cfg:"Mod_Channel_Cfg",mod_device_cfg:"Mod_Device_Cfg",mod_fb_cfg:"Mod_Fb_Cfg",mod_dp_cfg:"Mod_Dp_Cfg",mbs_channel_cfg:"Mbs_Channel_Cfg",mbs_device_cfg:"Mbs_Device_Cfg",mbs_fb_cfg:"Mbs_Fb_Cfg",mbs_dp_cfg:"Mbs_Dp_Cfg"};for(var d in e){this.m_newEntry(d,"Item_Cfg",e[d],"Item_Cfg")}var c={webbinder_validation:"WebBinderValidationPopup",save_as_template:"SaveAsTemplatePopup",template_selector:"TemplateSelectorPopup",type_selector:"TypeSelectorPopup",alias_dp_selector:"AliasDataPointSelectorPopup",file_selector:"FileSelectorPopup",web_sync:"WebSyncPopup",create_network_interface:"CreateNetworkInterfacePopup",create_network:"CreateNetworkPopup",create_router:"CreateRouterPopup",create_copies:"CreateCopiesPopup",create_fb:"CreateFbPopup",create_unit:"CreateUnitPopup",prompt:"Prompt",logout:"Logout",confirm:"Confirm",submit:"Submit",alert:"Alert"};for(var d in c){this.m_newEntry(d,c[d],c[d],"Item_Cfg")}this.m_newShortEntry("Channel_Cfg_Overview","Item_Cfg",true);this.m_newShortEntry("Device_Cfg_Overview","Item_Cfg",true);this.m_newShortEntry("Fb_Cfg_Overview","Item_Cfg",true);this.m_newShortEntry("Dp_Cfg_Overview","Item_Cfg",true);this.m_newShortEntry("DeviceOverview","Item_Cfg",true);this.m_newShortEntry("QuickInstallation","Item_Cfg",true);this.m_newShortEntry("CredentialsPopup",null,false);var a=["Ees_Create_Backup","Ees_Create_Template","Ees_Restore","Ees_Deploy","Ees_DeployComponent","Ees_Export","Ees_Import"];for(var d=0;d<a.length;d++){this.m_newShortEntry(a[d],null,true)}var b=["Ees_Admin_Tree","Ees_Component_Cfg","Ees_Ftp_Client_Cfg","Ees_GlobalSettings","Ees_IP_Channel_Cfg","Ees_Peer_Cfg","Ees_SmartServicePeer_Cfg","Ees_Soap_Popup","Ees_Telnet_Client_Cfg","Ees_Upgrade_Cfg","Ees_Web_Client_Cfg","Ees_Backup_Cfg","Ees_Template_Cfg","Ees_Project_Cfg","Ees_LNS_DB_Cfg","LON_Device_Cfg_ScanSL","AbortPopup"];for(var d=0;d<b.length;d++){this.m_newEntry(b[d],b[d],b[d])}this.m_newEntry("Ees_Upgrade","Ees_Upgrade","Ees_Upgrade",null,true);this.m_newEntry("binding_overview","BindingOverview","BindingOverview","Item_Cfg");this.m_newEntry("launch_plugins","PluginsPopup","LaunchPluginsPopup","Item_Cfg");this.m_newEntry("register_plugins","PluginsPopup","RegisterPluginsPopup","Item_Cfg");this.m_newEntry("system_logger","SystemLogger","SystemLogger","COMMON");this.m_newEntry("democonfigurator","DemoConfigurator","DemoConfigurator",null,null,true);this.m_newEntry("infosoftfusionwidget","InfosoftFusionWidget","InfosoftFusionWidget",null,null,false);this.m_newEntry("cm_cfg","CM_Cfg","CM_Cfg","CM_Cfg");this.m_newEntry("analogfb_main","8000010128000000[4].UFPTanalogFunctionBlock_Cfg","UFPTanalogFunctionBlock_Cfg","8000010128000000[4].UFPTanalogFunctionBlock");this.m_newEntry("analogfb_datapoints","8000010128000000[4].UFPTanalogFunctionBlock_DataPoints","UFPTanalogFunctionBlock_DataPoints","8000010128000000[4].UFPTanalogFunctionBlock");this.m_newEntry("analogfb_poll_rate_popup","8000010128000000[4].UFPTanalogFunctionBlock_PollRate_Popup","UFPTanalogFunctionBlock_PollRate_Popup","8000010128000000[4].UFPTanalogFunctionBlock");this.m_newEntry("alarmgenerator_main","8000010128000000[4].UFPTalarmGenerator_Cfg","UFPTalarmGenerator_Cfg","8000010128000000[4].UFPTalarmGenerator");this.m_newEntryWinit("alarmgenerator_ana","8000010128000000[4].UFPTalarmGenerator_Analog",null,"8000010128000000[4].UFPTalarmGenerator");this.m_newEntryWinit("alarmgenerator_bin","8000010128000000[4].UFPTalarmGenerator_Binary",null,"8000010128000000[4].UFPTalarmGenerator");this.m_newEntry("alarmnotifier_main","8000010128000000[4].UFPTalarmNotifier_Cfg","UFPTalarmNotifier_Cfg","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("alarmnotifier_datapoints","8000010128000000[4].UFPTalarmNotifier_DataPoints","UFPTalarmNotifier_DataPoints","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("alarmnotifier_condition","8000010128000000[4].UFPTalarmNotifier_Condition","UFPTalarmNotifier_Condition","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("alarmnotifier_destination","8000010128000000[4].UFPTalarmNotifier_Destination","UFPTalarmNotifier_Destination","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("alarmnotifier_simplemail","8000010128000000[4].UFPTalarmNotifier_SimpleMail","UFPTalarmNotifier_SimpleMail","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("alarmnotifier_level_popup","8000010128000000[4].UFPTalarmNotifier_Level_Popup","UFPTalarmNotifier_Level_Popup","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("alarmnotifier_mail_popup","8000010128000000[4].UFPTalarmNotifier_Mail_Popup","UFPTalarmNotifier_Mail_Popup","8000010128000000[4].UFPTalarmNotifier");this.m_newEntry("calendar","8000010128000000[4].UFPTcalendar_Cfg","UFPTcalendar_Cfg","8000010128000000[4].UFPTscheduler");this.m_newEntry("calendar_exception_popup","8000010128000000[4].UFPTcalendar_Exception_Popup","UFPTcalendar_Exception_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("datalogger_main","8000010128000000[4].UFPTdataLogger_Cfg","UFPTdataLogger_Cfg","8000010128000000[4].UFPTdataLogger");this.m_newEntry("datalogger_datapoints","8000010128000000[4].UFPTdataLogger_DataPoints","UFPTdataLogger_DataPoints","8000010128000000[4].UFPTdataLogger");this.m_newEntry("data_logger_poll_rate_popup","8000010128000000[4].UFPTdataLogger_PollRate_Popup","UFPTdataLogger_PollRate_Popup","8000010128000000[4].UFPTdataLogger");this.m_newEntry("ufptdigitalinput_cfg","8000010128000000[4].UFPTdigitalInput_Cfg",null,"8000010128000000[4].UFPTdigitalInput");this.m_newEntry("ufptdigitaloutput_cfg","8000010128000000[4].UFPTdigitalOutput_Cfg",null,"8000010128000000[4].UFPTdigitalOutput");this.m_newEntry("ufptpulsecounter_cfg","8000010128000000[4].UFPTpulseCounter_Cfg",null,"8000010128000000[4].UFPTpulseCounter");this.m_newEntry("ufptrealtimeclock","8000010128000000[4].UFPTrealTimeClock_Cfg","UFPTrealTimeClock_Cfg","8000010128000000[4].UFPTrealTimeClock");this.m_newEntry("scheduler_main","8000010128000000[4].UFPTscheduler_Cfg","UFPTscheduler_Cfg","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_week","8000010128000000[4].UFPTscheduler_Week","UFPTscheduler_Week","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_year","8000010128000000[4].UFPTscheduler_Year","UFPTscheduler_Year","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_event_popup","8000010128000000[4].UFPTscheduler_Event_Popup","UFPTscheduler_Event_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_datapoints","8000010128000000[4].UFPTscheduler_DataPoints","UFPTscheduler_DataPoints","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_daily_popup","8000010128000000[4].UFPTscheduler_Daily_Popup","UFPTscheduler_Daily_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_dailyschedule_popup","8000010128000000[4].UFPTscheduler_DailySchedule_Popup","UFPTscheduler_DailySchedule_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_exceptionschedule_popup","8000010128000000[4].UFPTscheduler_ExceptionSchedule_Popup","UFPTscheduler_ExceptionSchedule_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_exception_popup","8000010128000000[4].UFPTscheduler_Exception_Popup","UFPTscheduler_Exception_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_preset_popup","8000010128000000[4].UFPTscheduler_Preset_Popup","UFPTscheduler_Preset_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("scheduler_delay_popup","8000010128000000[4].UFPTscheduler_StaggerDelay_Popup","UFPTscheduler_StaggerDelay_Popup","8000010128000000[4].UFPTscheduler");this.m_newEntry("ufpttypetranslator_cfg","8000010128000000[4].UFPTtypeTranslator_Cfg",null,"8000010128000000[4].UFPTtypeTranslator");this.m_newEntry("ufpttypetranslator_datapoints","8000010128000000[4].UFPTtypeTranslator_DataPoints",null,"8000010128000000[4].UFPTtypeTranslator",false,true);this.m_newEntry("ufpttypetranslator_rule_cfg","8000010128000000[4].UFPTtypeTranslator_Rule_Cfg",null,"8000010128000000[4].UFPTtypeTranslator");this.m_newEntry("webbinder_cfg","WebBinder_Cfg",null,"Item_Cfg");this.m_newEntry("viewdatapoints","Dp_Data_Overview",null,"Dp_Data",true);this.m_newEntry("ufptdatalogger_view","8000010128000000[4].UFPTdataLogger_View",null,"8000010128000000[4].UFPTdataLogger",true);this.m_newEntry("ufptalarmnotifier_history_view","8000010128000000[4].UFPTalarmNotifier_History_View",null,"8000010128000000[4].UFPTalarmNotifier",true);this.m_newEntry("ufptalarmnotifier_summary_view","8000010128000000[4].UFPTalarmNotifier_Summary_View",null,"8000010128000000[4].UFPTalarmNotifier",true);this.m_newEntry("loncommandqueue","LonCommandQueue",null,"LonCommandQueue",true,true);this.m_newEntry("lon_cmdquerystatuspopup","LON_CmdQueryStatusPopup",null,"LON_CmdQueryStatusPopup");this.m_newEntry("lon_receiveservicepinpopup","LON_ReceiveServicePinPopup",null,"LON_ReceiveServicePinPopup");this.m_newEntry("powerlinerepeatinganalysis","PowerlineRepeatingAnalysis",null,"PowerlineRepeatingAnalysis",true,true);this.m_newEntry("powerlinedatapopup","PowerlineDataPopup",null,"PowerlineRepeatingAnalysis");this.m_newEntry("lon_scansettingspopup","LON_ScanSettingsPopup",null,"Item_Cfg");this.m_newEntry("proxyagentdatapopup","ProxyAgentDataPopup",null,"PowerlineRepeatingAnalysis");this.m_newEntry("dp_value_popup","DataPointValueDefinitionPopupObject","DataPointValueDefinitionPopupObject","Item_Cfg");this.m_newEntry("navtree","UITreeControlObject","NavTreeObject","Item_Cfg");this.m_newEntry("autotree","UITreeControlObject","AutoTreeObject","Item_Cfg");this.m_newEntry("menu",null,"ViewMenuObject");this.m_newEntry("editformobjpropspopup","EditFormObjPropsPopup","EditFormObjPropsPopup","COMMON");this.m_newEntry("change_password","ChangePassword","ChangePassword","SetupModem");this.m_newEntry("order_router","OrderRouter_Popup","OrderRouter_Popup","Router");this.m_newEntryWinit("security","SetupSecurityObject",null,"SetupSecurity",true);this.m_newEntryWinit("verify","SetupVerifyObject",null,"SetupVerify",true);this.m_newEntryWinit("time","SetupTimeObject",null,"8000010128000000[4].UFPTrealTimeClock",true);this.m_newEntry("systeminfo","SystemInfoObject","SystemInfoObject","SystemInfo",true);this.m_newEntry("reboot","RebootPopup","RebootPopup","SetupReboot",true);this.m_newEntry("cleanup","CleanupPopup","CleanupPopup","SetupReboot",true);this.m_newEntry("mod_dev_dp_overview","MOD_Dev_Dp_Overview","MOD_Dev_Dp_Overview","Item_Cfg",false,true)}}});Echelon.EchelonTopInit=function(w){var d=function(D){if(D==null){return}for(var A=0;A<D.length;A++){var B=elon.dom.getAttr(D[A],"elon_type");if(B!=null){var y=v.m_table[B.toLowerCase()];if(y){r.push(D[A]);var C=v.getLibName(B);if(C){var z=y.topLevel?EchelonTop.document:h;if(elon.include(C,z)){if(z!=elon.doc){if(n==null){elon.includeCB(k,z);n=false}}else{if(e==null){elon.includeCB(g,z);e=false}}}}}else{alert('Unknown Echelon Object "'+B+'"')}}else{d(D[A].childNodes)}}};var k=function(){n=true};var g=function(){e=true};this.m_initObjects=function(){try{h.getElementById("foo")}catch(D){return}if(!n||!e||elon.echelonInitObjectsLock||EchelonTop.document.body==null||l.iconsReady!=true){elon.util.callback.fireDelayedFunction(u.m_initObjects,100,u);return}if(!l.initialized()){return elon.util.callback.fireQuickCallback(this.m_initObjects,this)}elon.echelonInitObjectsLock=true;l.addDocument(h);var I=l.getHrefParams(EchelonTop.window);if(c==null){c=l.getHrefParams(p)}var C=null;try{C=p.frameElement.name}catch(D){}if(C!="EchelonPopup"){l.resetTree()}this.m_titleDp=l.getTopLevelSSO().getItem({Item:"#Web/global/titleDP",type:"FormObj_Data",id:"volatile"});var y,F;try{y=h.title}catch(D){}if(c.args.elon_page_title!=null){F=c.args.elon_page_title;delete c.args.elon_page_title}if(F&&(C=="appFrame"||h==EchelonTop.document)){h.title=F}if(F||(y&&(C=="appFrame"||h==EchelonTop.document))){this.m_titleDp.value.set(b(F||y,true,true))}else{if(C=="appFrame"){this.m_titleDp.value.set("")}}if(c.args.elon_page_background){h.body.style.backgroundImage="url("+c.args.elon_page_background+")"}a=new Object();q(I.vars,a);q(c.vars,a);var H=null;var z;j=0;var G=false;var J={};for(var B=0;B<r.length;B++){H=new Object();elon.dom.attachSimpleParams(H,h.body);if(EchelonTop.document!=h){elon.dom.attachSimpleParams(H,EchelonTop.document.body)}elon.dom.attachSimpleParams(H,r[B]);o(H,r[B]);s(H);H.domObj=r[B];u.overwriteDivAttributesWithHrefParams(H);z=v.getNls(H.elon_type,p);if(!G&&v.getAutoSubmit(H.elon_type)){l.getTopLevelSSO().autoSubmit(c.args.elon_lang);G=true}var E=v.getPrerequisites(H.elon_type,r[B]);if(!z&&E&&E.nls){z=elon.rootUrl("nls/echelon/"+E.nls[0])}if(E&&E.style){for(var A=0;A<E.style.length;A++){J[E.style[A]]=true}}if(z!=null){H.nls=z;j++}x.push(H)}if(this.m_titleDp.value.get()=="NLS_TITLE"){elon.NlsManagerObject.getInstance(l.getTopLevelSSO).loadNls(v.getNls("nlstext",p),c.args.elon_lang,m)}for(var B in J){elon.dynIncludeStyle(B,h)}if(j>0){for(var B=0;B<x.length;B++){if(x[B].nls){elon.NlsManagerObject.getInstance(elon.SoapServerObject.getInstance(elon.getSoapUrl(x[B],p))).loadNls(x[B].nls,x[B].elon_lang,new f(x[B]).cb)}}}else{elon.util.fireQuickCallback(this.m_instantiateObjects,this)}};var j;var f=function(y){var i=y;this.cb=function(z){i.nls=z;j--;if(j<1){elon.util.fireQuickCallback(u.m_instantiateObjects,u)}}};var m=function(i){u.m_titleDp.value.set(i.NLS_TITLE?b(i.NLS_TITLE,true,true):'"NLS_TITLE" missing in NLS properties file')};this.m_instantiateObjects=function(){for(var z=0;z<x.length;z++){if(v.m_table[x[z].elon_type.toLowerCase()].libName&&v.m_table[x[z].elon_type.toLowerCase()].libName.substr(0,19)=="8000010128000000[4]"&&!x[z].elon_name&&!x[z].elon_name_arr&&!x[z].elon_name_obj&&!v.m_table[x[z].elon_type.toLowerCase()].autoSubmit){alert("You tried to instantiate the '"+v.m_table[x[z].elon_type.toLowerCase()].libName+"' object without a valid reference to a FB");break}v.getInitFunc(x[z].elon_type)(x[z]);if(this.m_titleDp.value.get()==""){if(x[z].nls&&x[z].nls["TITLE_"+x[z].elon_type.toUpperCase()]){var y=null;try{y=p.frameElement.name}catch(A){}if(y=="appFrame"){this.m_titleDp.value.set(b(x[z].nls["TITLE_"+x[z].elon_type.toUpperCase()],true,true))}}}}l.enableDomObj(u,h.body,"EchelonInit");l.progress(false);elon.echelonInitObjectsLock=false;p.echelonInitComplete=true};this.overwriteDivAttributesWithHrefParams=function(y){q(c.args,y);var i=new Object();q(l.getHrefParams(EchelonTop.window).args,i);delete i.elon_name;delete i.elon_url;q(i,y,false);y.hrefParamsIncluded=true};var q=function(y,z,i){if(i==null){i=true}for(var A in y){if(z[A]==null||i){z[A]=y[A]}}};var s=function(y,i){var A=false;for(var B in y){var z=y[B];switch(typeof z){case"string":if(z.toLowerCase().slice(0,11)=="javascript:"){break}y[B]=b(z);if(y[B]==null){delete y[B]}break;case"object":s(z);break}}};var b=function(z,G,D){var F=z.match(/{[^}]*/g);if(F!=null&&F.length>0){for(var C=0;C<F.length;C++){var y=F[C].slice(1);var B=y.match(new RegExp("^([A-Za-z_][A-Za-z_0-9]*)(s*=s*(.*))?$"));var A=null;if(B&&B.length){var H=B[1].toLowerCase();A=B.length>3?B[3]:null;if(a[H]!=null){A=a[H]}if(D&&c.args["elon_"+H]){A=c.args["elon_"+H]}}if(A){var E=new RegExp(elon.UtilObject.getInstance().escapeRegExp("{"+y+"}"),"g");z=z.replace(E,A)}else{if(!G){return null}}}}return z};var o=function(G,y){var C,z,B,F,A,D;for(C=0;C<y.childNodes.length;C++){z=y.childNodes[C];F=elon.dom.getAttr(z,"elon_arg_name");D="elon_arg_val";switch(z.nodeName){case"A":var H=new Object();H.href=elon.dom.getAttr(z,"href");H.target=elon.dom.getAttr(z,"target");G["elon_"+F]=H;break;case"IMG":D="src";default:A=elon.dom.getAttr(z,D);B=elon.dom.getAttr(z,"elon_arg_type");if(B){if(B=="array"){A=new Array()}else{if(B=="object"){A=new Object();elon.dom.attachSimpleParams(A,z)}}o(A,z)}if(A){if(F){G["elon_"+F]=A}else{try{G.push(A)}catch(E){if(D=="elon_arg_val"){alert('Encountered parameter with no name outside of a parameter array.\nIts value "'+A+'" will be ignored')}}}}}}};this.bodyLoaded=function(){u.bodyLoadedFlag=true};var u=this;var r=new Array();var x=new Array();var c=null;var a=new Object();var l;var v;var h=w;var p=elon.dom.getDefaultView(h);v=elon.ViewLookup();l=elon.elon;l.disableDomObj(u,h.body,"EchelonInit");l.progress(true);var n=null;var e=null;d(h.body.childNodes);if(n==null){n=true}if(e==null){e=true}l.cleanSlate();u.m_initObjects();if(p.echelon_onload){for(var t=0;t<p.echelon_onload.length;t++){p.echelon_onload[t]()}}};Echelon.Echelon=function(){this.clearMsg=function(msg){thisObj.m_messageProxy("clearMsg",msg)};this.setHtmlErrMsg=function(msg){thisObj.m_messageProxy("setHtmlErrMsg",msg)};this.setErrMsg=function(msg){thisObj.m_messageProxy("setErrMsg",msg)};this.setWarnMsg=function(msg){thisObj.m_messageProxy("setWarnMsg",msg)};this.setInfMsg=function(msg){thisObj.m_messageProxy("setInfMsg",msg)};this.setDbgMsg=function(msg){thisObj.m_messageProxy("setDbgMsg",msg)};this.setMsg=function(msg){thisObj.m_messageProxy("setMsg",msg)};this.msgHistoryClosed=function(){thisObj.m_messageProxy("msgHistoryClosed")};this.showErrMsgHistory=function(){thisObj.m_messageProxy("showErrMsgHistory")};this.m_messageProxy=function(op,msg){if(thisObj.m_msgMaster){thisObj.m_msgMaster[op](msg)}else{if(op.match(/^set.*Msg$/)){alert(msg)}}};var keydownCb=function(evt){var target=elon.util.sourceObj(evt);if(evt.keyCode==8){if(((target.nodeName.toUpperCase()=="INPUT")&&(target.type.toUpperCase()=="TEXT"||target.type.toUpperCase()=="PASSWORD"))||(target.nodeName.toUpperCase()=="TEXTAREA")){return true}else{return elon.util.catchEvent(evt)}}else{if((evt.ctrlKey)&&(evt.altKey)&&(evt.keyCode==72)){thisObj.showErrMsgHistory()}}};this.addDocument=function(doc){m_documents.push(doc);Echelon.include("echelon/Global",doc,"STYLE");try{elon.util.removeEvent(doc,"click",elon.elon.click,false);elon.util.removeEvent(doc,"contextmenu",elon.elon.click,false);elon.util.removeEvent(doc,"keydown",keydownCb,false)}catch(e){}elon.util.addEvent(doc,"focus",focusCb);elon.util.addEvent(doc,"click",Echelon.ViewMenuObject.hideAll,false);elon.util.addEvent(doc,"contextmenu",elon.elon.click,false);elon.util.addEvent(doc,"keydown",keydownCb,false)};var focusCb=function(evt){var a=3;return elon.util.catchEvent(evt)};var getDocuments=function(){for(var i=0;i<m_documents.length;i++){try{m_documents[i].body;Echelon.dom.getDefaultView(m_documents[i]).document;m_documents[i].activeElement}catch(e){m_documents.splice(i--,1)}}return m_documents};this.progress=function(bool,internal){if(!internal){thisObj.m_progress=bool}if(m_sso){m_sso.getItem({type:"FormObj_Data",Item:"#Web/global/progressImage"}).value.set((bool||thisObj.m_progress)?GRADIENT_ANI_SRC:GRADIENT_SRC)}};this.enableUI=function(sourceObj,range,key){var enableDoc=false;if(range=="everything"){var documents=getDocuments();var oneEnabled=false;for(var i in documents){if(thisObj.enableDomObj(sourceObj,documents[i].body,key,range)){elon.LayerManager().hideDisableLayer(documents[i]);enableDoc=EchelonTop.document}}}else{if(range=="object"){var success=thisObj.enableDomObj(sourceObj,sourceObj.domObj,key,range);if(success){sourceObj.disableSpecifics(false)}}else{if(range=="frame"){var doc=sourceObj.domObj.ownerDocument;var finished=thisObj.enableDomObj(sourceObj,doc.body,key,range);if(finished){enableDoc=doc}}else{alert('elon.elon.enableUI: unknown range "'+range+'".')}}}if(enableDoc){elon.LayerManager().hideDisableLayer(enableDoc);thisObj.progress(false,true)}};this.disableUI=function(sourceObj,range,key,suppressProgress){var disableDoc=false;if(range=="everything"){var documents=getDocuments();for(var i in documents){if(documents[i].referrer.indexOf("/shared/Popup.htm")==-1){thisObj.disableDomObj(sourceObj,documents[i].body,key,range)}}disableDoc=EchelonTop.document}else{if(range=="object"){var success=thisObj.disableDomObj(sourceObj,sourceObj.domObj,key,range);if(success){sourceObj.disableSpecifics(true)}}else{if(range=="frame"){var disableDoc=sourceObj.domObj.ownerDocument;thisObj.disableDomObj(sourceObj,disableDoc.body,key,range)}else{alert('elon.elon.disableUI: unknown range "'+range+'".')}}}if(disableDoc){if(elon.LayerManager().showDisableLayer(disableDoc)&&!suppressProgress){if(disableDoc==EchelonTop.document){thisObj.progress(true,true)}}}};this.disableDomObj=function(sourceObj,targetObj,key,range,noRecurse){if(targetObj.echelonDisabled==null||targetObj.echelonDisabled.length==null){targetObj.echelonDisabled=new Array()}insertIntoArray(targetObj.echelonDisabled,sourceObj,key,range);if(!targetObj.disabled){elon.util.addClassName("disabled",targetObj);targetObj.disabled=true;targetObj.echelonLastDisableKey=key;if(!noRecurse){ie6workaroundDisableSelects(true,sourceObj,targetObj,key,range)}}return true};var ie6workaroundDisableSelects=function(bool,sourceObj,targetObj,key,range){if(!Echelon.browser.IE6){return}var arr=getChildNodesByNodeName(targetObj,"SELECT");for(var i=0;i<arr.length;i++){if(arr[i].disabled!=bool){thisObj[(bool?"dis":"en")+"ableDomObj"](sourceObj,targetObj,key,range,true)}}};this.enableDomObj=function(sourceObj,targetObj,key,range,noRecurse){if(targetObj.echelonDisabled==null){targetObj.disabled=false;return true}removeFromArray(targetObj.echelonDisabled,sourceObj,key,range);if(targetObj.echelonDisabled.length>0){return false}else{targetObj.echelonDisabled=null;targetObj.echelonLastDisableKey="none left";targetObj.disabled=false;elon.util.rmClassName("disabled",targetObj);if(!noRecurse){ie6workaroundDisableSelects(false,sourceObj,targetObj,key,range)}return true}};var insertIntoArray=function(arr,obj,key,range){for(var i=0;i<arr.length;i++){if(arr[i].sourceObj==obj&&arr[i].key==key){if(!range){range="object"}for(var j=0;j<arr[i].range.length;j++){if(range==arr[i].range[j]){return}}arr[i].range.push(range);return}}arr.push({sourceObj:obj,key:key,range:[range||"object"]})};var removeFromArray=function(arr,obj,key,range){var prio={object:0,frame:1,everything:2};for(var i=0;i<arr.length;i++){if((arr[i].sourceObj==obj)&&(arr[i].key==key)){for(var j=0;j<arr[i].range.length;j++){if(prio[arr[i].range[j]]<=prio[range||"object"]){arr[i].range.splice(j--,1)}}if(arr[i].range.length==0){arr.splice(i,1)}}}};var getChildNodesByNodeName=function(domObj,nodeName,array){nodeName=nodeName.toUpperCase();if(domObj.nodeName=="BODY"){return domObj.ownerDocument.getElementsByTagName(nodeName)}if(array==null){array=new Array()}for(var i=0;i<domObj.childNodes.length;i++){if(domObj.childNodes[i].nodeName==nodeName){array.push(domObj.childNodes[i])}getChildNodesByNodeName(domObj.childNodes[i],nodeName,array)}return array};this.getHrefParams=function(win){if(win==EchelonTop.window&&m_hrefParams!=null){return m_hrefParams}var obj={args:{},vars:{}};var parameterString=win.location.search;if(parameterString.length>1){parameterString=parameterString.slice(1);var parameterArray=parameterString.split("&");for(var parIdx=0;parIdx<parameterArray.length;parIdx++){if(parameterArray[parIdx].slice(0,4)!="elon"){continue}var par=parameterArray[parIdx].split("=");par[0]=decodeURIComponent(par[0]);par[1]=decodeURIComponent(par[1]);if(par[0].slice(0,6)=="elon_$"){obj.vars[par[0].slice(6)]=par[1]}obj.args[par[0]]=par[1]}}return obj};var loadFile=function(filename){var async_cb=false;var fail_ok=false;var m_xmlHttp=null;var m_callback=null;try{m_xmlHttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}if(m_xmlHttp==null){try{m_xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if((m_xmlHttp==null)&&(typeof(XMLHttpRequest)!="undefined")){m_xmlHttp=new XMLHttpRequest();if(typeof netscape!="undefined"&&typeof netscape.security!="undefined"){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}catch(e){alert("Firefox denied access to remote ressource.")}}}if(async_cb){m_xmlHttp.onreadystatechange=function(){if(4==m_xmlHttp.readyState){if((!m_xmlHttp.status)||((200<=m_xmlHttp.status)&&(300>m_xmlHttp.status))){async_cb(m_xmlHttp.responseText)}}}}var uri=filename;m_xmlHttp.open("GET",uri,async_cb?true:false);try{m_xmlHttp.send(null);if(async_cb){return null}if((m_xmlHttp.status)&&((200>m_xmlHttp.status)||(300<=m_xmlHttp.status))){throw Error("Unable to load "+uri+" status:"+m_xmlHttp.status)}}catch(e){if((fail_ok)&&(!async_cb)){return null}else{throw e}}return(m_xmlHttp.responseText)};var getBody=function(str){var start=str.indexOf("<body>");var stop=str.indexOf("</body>");return str.slice(start+6,stop)};var elonEncode=function(str){return encodeURIComponent(str)};var elonDecode=function(str){return decodeURIComponent(str)};this.assembleURL=function(argObj){var href=argObj.elon_url.href||argObj.elon_url;if(href.indexOf("?")==-1){href+="?"}else{href+="&"}if(argObj.elon_args_obj!=null){for(var prop in argObj.elon_args_obj){if(argObj.elon_args_obj[prop]!=null){href+=(elonEncode(prop)+"="+elonEncode(argObj.elon_args_obj[prop])+"&")}}}if(argObj.elon_vars_obj!=null){for(var prop in argObj.elon_vars_obj){var finalProp=prop.slice(0,5)=="elon_"?prop.slice(5):prop;if(argObj.elon_vars_obj[prop]!=null){href+=(elonEncode("elon_$"+finalProp)+"="+elonEncode(argObj.elon_vars_obj[prop])+"&")}}}return href.slice(0,-1)};this.followLink=function(argObj){if(argObj.elon_url==null||argObj.elon_url==""){return false}if(argObj.elon_url.target){argObj.elon_target=argObj.elon_url.target}if(argObj.elon_url.href){argObj.elon_url=argObj.elon_url.href}else{if(typeof argObj.elon_url=="object"){alert("No URL defined, Navigation aborted.");return}}if(argObj.elon_title){if(argObj.elon_args_obj==null){argObj.elon_args_obj={}}if(argObj.elon_args_obj.elon_page_title==null){argObj.elon_args_obj.elon_page_title=argObj.elon_title}}if(argObj.elon_page_background){if(argObj.elon_args_obj==null){argObj.elon_args_obj={}}argObj.elon_args_obj.elon_page_background=argObj.elon_page_background}if(argObj.elon_page_title){if(argObj.elon_args_obj==null){argObj.elon_args_obj={}}argObj.elon_args_obj.elon_page_title=argObj.elon_page_title}if(argObj.elon_url.toLowerCase().slice(0,11)=="javascript:"){try{eval(argObj.elon_url.slice(11))}catch(e){thisObj.setErrMsg(elon.Error.getInstance(m_errTab.ERR_ERR_MESSAGE,{msg:"Can't execute function"}))}return}var targetWindow=null;var targetFrame=null;if(argObj.elon_target==null){targetWindow=EchelonTop.window}else{if(argObj.elon_target.location){targetWindow=argObj.elon_target}else{if(argObj.elon_target.contentWindow){targetFrame=argObj.elon_target;targetWindow=targetFrame.contentWindow}else{if(argObj.elon_target.toLowerCase()=="popup"){argObj.elon_target=="popup"}else{targetFrame=thisObj.getFrameByName(argObj.elon_target);if(targetFrame){targetWindow=targetFrame.contentWindow}}}}}var href=thisObj.assembleURL(argObj);if(href.match(new RegExp("^http(s)?://"))){return followLinkStage2(targetWindow,targetFrame,argObj,href)}if(href.charAt(0)=="/"){return followLinkStage2(targetWindow,targetFrame,argObj,elon.elon.httpS(elon.filter.hostAndPort(window)+href))}var refArr=href.split("/");var pathArr=(argObj.sourceWindow||window).location.pathname.split("/");var i;for(i=0;i<refArr.length;i++){if(refArr[i]==".."){continue}else{break}}var path="";for(var j=0;j<pathArr.length-i-1;j++){if(pathArr[j].length>0){path+="/"+pathArr[j]}}href="";for(var j=i;j<refArr.length;j++){href+="/"+refArr[j]}return followLinkStage2(targetWindow,targetFrame,argObj,elon.elon.httpS(elon.filter.hostAndPort(window)+path+href))};this.cleanSlate=function(){if(elon.collectGarbage){elon.collectGarbage()}if(Echelon.msgbar){Echelon.msgbar.cleanSlate()}var documents=getDocuments();for(var i in documents){if(documents[i].body.echelonDisabled){for(var j=0;j<documents[i].body.echelonDisabled.length;j++){var disabled=documents[i].body.echelonDisabled[j];try{disabled.domObj.foo}catch(e){thisObj.enableDomObj(disabled.sourceObj,documents[i],disabled.key)}}}}thisObj.enableUI(null,"everything")};this.resetTree=function(){if(m_sso){m_sso.getItem({type:"DpTree_Data",Item:"#Web/global/treeMarkSelected"}).Item.clear();var tree=m_sso.getItem({type:"DpTree_Cfg",Item:"#Web/global/tree",id:"volatile"});var mode=tree.mode.get();var display=tree.display.get();var hideCPs=tree.hideCPs.get();var hidden={Network:0,Channel:0,Device:0,Fb:0,Dp:0};if(typeof(tree.showHidden)=="function"){tree.showHidden()}for(var i in hidden){hidden[i]=tree.showHidden[i].get()}tree.y_proxy_clear();tree.mode.set(mode);tree.display.set(display);tree.hideCPs.set(hideCPs);tree.showHidden();m_sso.getItem({type:"FormObj_Data",Item:"#Web/global/tree"}).y_proxy_clear();for(var i in hidden){tree.showHidden[i].set(hidden[i])}}};this.emptyTree=function(){if(m_sso){m_sso.getItem({type:"DpTree_Data",Item:"#Web/global/tree"}).Item.clear()}this.resetTree()};this.httpS=function(url,ssl){var ret;if(url&&url.match&&url.match(/^http(s)?:\/\//)){ret=url}else{if(ssl){ret="https://"+url}else{if(elon.window.location.host==url.match(/^[^\/]*/)){ret=elon.window.location.protocol+"//"+url}else{ret="http://"+url}}}var protoRemainArr=ret.split("//");var domainPathArr=protoRemainArr[1].split("/");var domain=domainPathArr.shift();return(protoRemainArr[0].toLowerCase()+"//"+domain.toLowerCase()+"/"+domainPathArr.join("/"))};var followLinkStage2=function(targetWindow,targetFrame,argObj,href){elon.echelonInitObjectsLock=false;if(argObj.elon_target=="popup"){elon.Popup.getInstance({elon_url:href,elon_modal:argObj.elon_modal,elon_no_scrolling:argObj.elon_no_scrolling,elon_popup_width:argObj.elon_popup_width,elon_popup_height:argObj.elon_popup_height})}else{if(targetWindow){try{if(targetWindow.location.href!=href){thisObj.resetTree();targetWindow.location.href=href}else{return false}}catch(e){targetFrame.src=href}}else{EchelonTop.open(href,"")}}elon.elon.click();return true};this.showHelp=function(){var href=thisObj.getFrameByName("appFrame").contentWindow.location.href.substr(0,thisObj.getFrameByName("appFrame").contentWindow.location.href.indexOf(".htm")).split("/");var spltArr=href[href.length-1].split("_");var app=spltArr[0];var section=(spltArr[1]&&spltArr[1]!="Cfg")?"#"+spltArr[1]:"";if((app=="Ees")||(spltArr[2]=="Overview")){app=spltArr.join("_");section=""}switch(spltArr[2]){case"RNI":case"Router":case"CP":section+="_"+spltArr[2];break}var helpPage=elon.htmUrl(app+"_Help.htm"+section);window.open(helpPage)};this.showPopupHelp=function(evt){evt=(evt)?evt:window.event;var target=(evt.target)?evt.target:evt.srcElement;var href=target.targetUrl.substr(0,target.targetUrl.indexOf(".htm")).split("/");var spltArr=href[href.length-1].split("_");var app=spltArr[0];var section=(spltArr[1]&&spltArr[1]!="Cfg")?"#"+spltArr[1]:"";var helpPage=elon.htmUrl(app+"_Help.htm"+section);window.open(helpPage)};var createIFrame=function(attributes,styleAttributes,parentObj){var iFrame=EchelonTop.document.createElement("iframe");for(var a in attributes){iFrame[a]=attributes[a]}for(var a in styleAttributes){iFrame.style[a]=styleAttributes[a]}if(parentObj!=null){parentObj.appendChild(iFrame)}return iFrame};this.addEventToAllBodies=function(event,callback){var documents=getDocuments();for(var i=0;i<documents.length;i++){elon.util.addEvent(documents[i].body,event,callback)}};this.removeEventFromAllBodies=function(event,callback){var documents=getDocuments();for(var i=0;i<documents.length;i++){elon.util.removeEvent(documents[i].body,event,callback)}};this.click=function(evt){if(elon.browser.IE){return}var documents=getDocuments();var needsBlur=false;for(var i=0;i<documents.length;i++){try{var el=documents[i].activeElement}catch(e){continue}var tgt=evt&&evt.explicitOriginalTarget;if(el&&el.blur&&tgt){if(tgt==el){needsBlur=false;break}else{needsBlur=true}}}if(needsBlur){el.blur()}};this.getTopLevelSSO=function(){return m_sso};var deleteTempObjects=function(obj,err,head){if(head){var ilonTime=Echelon.DateTimeObject.getInstance(head.UCPTtimeStamp.getTime());ilonTime.addDays(-1);var ilonTimeString=ilonTime.toFormattedString();if(obj.Item.length>0){m_sso.Delete({Item:obj.Item,xSelect:'//Item[@xsi:type="UFPTcalendar_Cfg"][UCPTname[contains(.,"__TEMP_OBJECT")]][UCPTlastUpdate<"'+ilonTimeString+'"]',callback:function(){},noErrMsg:true,unmanaged:true})}m_sso.Delete({Item:obj.Item,xSelect:'//Item[@xsi:type="UFPTscheduler_Cfg"][UCPTname[contains(.,"__TEMP_OBJECT")]][UCPTlastUpdate<"'+ilonTimeString+'"]',callback:function(){},noErrMsg:true,unmanaged:true})}};var fetchTempObjects=function(){if(m_sso.isIlon()){m_sso.List({xSelect:'//Item[@xsi:type="UFPTcalendar_Cfg"][UCPTname[contains(.,"__TEMP_OBJECT")]]',callback:deleteTempObjects,noErrMsg:true,unmanaged:true,id:"volatile"})}};this.getVal=function(type,name){return m_sso?m_sso.getItem({type:type,Item:"#Web/global/"+name,id:"volatile"}).value.get():null};this.setVal=function(type,name,value){return m_sso?m_sso.getItem({type:type,Item:"#Web/global/"+name,id:"volatile"}).value.set(value):null};this.initialized=function(){return m_initialized};var m_includeCB=this.topLevelLibrariesAccessible=function(){if(m_initialized){elon.elon.click();return}m_initialized=true;m_sso=Echelon.SoapServerObject.getInstance(Echelon.getSoapUrl(m_hrefParams.args,EchelonTop.window),"persistent");m_ssq=Echelon.SoapSubmitQueueObject.getInstance();m_titleDp=m_sso.getItem({Item:"#Web/global/titleDP",type:"FormObj_Data"});m_sso.getItem({type:"BoolItem",Item:"#Web/global/debugWebUi",id:"persistent"}).value.set(elon.debugWebUi);elon.UIConfigurator();elon.util.fireDelayedFunction(fetchTempObjects,10000,thisObj);thisObj.bs=Echelon.dom;if(m_sso.isIlon()&&elon.window.location.pathname.match(/\/user\/echelon\/(\w+\/)?index.htm/)){elon.LoggerCache.getInstance({sso:m_sso,nameOfDataDp:"#Web/global/systemLogger",nameOfOverflowDp:"#Web/global/systemLoggerOverflow",timeNode:"UCPTlastUpdate",fbType:"UFPTdataLogger",parentView:{domObj:true},randomSampleMode:false,getKeyFunc:function(item){return item.UCPTname.get()+"_#_"+item.UCPTlastUpdate.getTime()},activeRangeStart:"min",activeRangeStop:"max",requestDpCfgs:false,persistentPoll:true,pollMaxAge:"sync",noErrMsg:true}).init({elon_name:"#SystemLogger"});m_sso.subscribe({Item:"#Web/global/systemLogger",type:"DpTree_Data",callback:lnsConnectionWatchdog});m_sso.syncTime()}m_errTab=Echelon.ErrorTable.getInstance();thisObj.m_msgMaster=Echelon.MessageMaster(m_sso);if(m_appFrameURL){this.followLink({elon_url:m_appFrameURL,elon_target:"appFrame",elon_args_obj:m_appFrameArgs})}else{if(m_hrefParams.args.elon_fb_index||m_hrefParams.args.elon_luid){lonMakerNavigation(m_hrefParams.args)}}};var lnsConnectionWatchdog=function(obj){if(!m_sso.ilonTime()){return elon.util.fireDelayedFunction(lnsConnectionWatchdog,1000,thisObj,obj)}for(var i=0;i<obj.Item.length;i++){if(obj.Item[i].fault&&obj.Item[i].fault.faultstring&&obj.Item[i].fault.faultstring.get()){if(obj.Item[i].fault.faultstring.get().match(/Cannot (connect|send) to LNS server/)&&(((m_sso.ilonTime()-obj.Item[i].UCPTlastUpdate.getTime())/(1000*60))<20)){elon.elon.setHtmlErrMsg('SmartServer cannot sync with LNS. <a href="javascript:elon.elon.showLnsSyncHelp()">More information</a>');var finish=true}if(obj.Item[i].fault.faultstring.get().match(/FPM feature is not properly licensed/)){elon.elon.setErrMsg(obj.Item[i].fault.faultstring.get());var finish=true}if(finish){m_sso.unsubscribe({Item:"#Web/global/systemLogger",type:"DpTree_Data",callback:lnsConnectionWatchdog});break}}}};this.showLnsSyncHelp=function(){window.open(elon.htmUrl("LnsSync_Help.htm"))};var lonMakerNavigation=function(argObj){if(argObj.elon_luid){m_lonMakerSel='/*[@xsi:type="LON_Device_Cfg"][UCPTuniqueId="'+argObj.elon_luid+'"]';m_sso.Get({xSelect:m_lonMakerSel,id:"volatile",callback:lonMakerCallHandleDeviceCfg})}else{if(argObj.elon_channel_handle){m_lonMakerSel='/*[@xsi:type="LON_Channel_Cfg"][UCPThandle="'+argObj.elon_channel_handle+'"]';m_sso.Get({xSelect:m_lonMakerSel,id:"volatile",callback:lonMakerCallHandleChannelCfg})}else{thisObj.setErrMsg("Trying to open the configuration page of a functional block without specifying a device")}}};var lonMakerCallHandleChannelCfg=function(obj,err,head){if(obj&&obj.Item&&obj.Item.length>0){var channel=obj.Item[0];m_lonMakerSel='/*[@xsi:type="LON_Device_Cfg"][UCPThandle="'+m_hrefParams.args.elon_device_handle+'"][starts-with(UCPTname,"'+channel.UCPTname.get()+'")]';m_sso.Get({xSelect:m_lonMakerSel,id:"volatile",callback:lonMakerCallHandleDeviceCfg})}else{thisObj.setErrMsg("xSelect "+m_lonMakerSel+" returned an empty collection")}};var lonMakerCallHandleDeviceCfg=function(obj,err,head){if(obj&&obj.Item&&obj.Item.length>0){var dev=obj.Item[0];if(m_hrefParams.args.elon_fb_index!=null){m_lonMakerSel='/*[@xsi:type="LON_Fb_Cfg"][UCPTfbIndex="'+m_hrefParams.args.elon_fb_index+'"][starts-with(UCPTname,"'+dev.UCPTname.get()+'")]';m_sso.Get({xSelect:m_lonMakerSel,id:"volatile",callback:lonMakerCallHandleFbCfg})}else{m_sso.Get({type:"Device_Cfg",Item:dev.UCPTname.get(),callback:lonMakerOpenDevicePage});m_sso.getItem({type:"DpTree_Data",Item:"#Web/global/tree"}).Item.push(dev)}}else{thisObj.setErrMsg("xSelect "+m_lonMakerSel+" returned an empty collection")}};var lonMakerOpenDevicePage=function(obj,err,head){if(obj&&obj.Item&&obj.Item.length>0){var dev=obj.Item[0];thisObj.followLink({elon_url:dev.UCPTuri.get()||"Device_Cfg.htm",elon_target:"appFrame",elon_args_obj:{elon_name:dev.UCPTname.get(),elon_item:dev.UCPTname.get()}})}};var lonMakerCallHandleFbCfg=function(coll,err,head,xsel){if(coll&&coll.Item&&coll.Item.length>0){coll.Item[0].UCPThidden.set(0);m_sso.Get({Item:coll.Item[0].UCPTname.get(),callback:m_LonMakerCallHandleGenericFbCfg(coll.Item[0])})}else{thisObj.setErrMsg("xSelect "+m_lonMakerSel+" returned an empty collection")}};var m_LonMakerCallHandleGenericFbCfg=elon.Class({constructor:["m_lonFbCfg"],closure:function(coll,err,head,xsel){var rawType=this.m_lonFbCfg.UCPTfptKey.get()+"_Cfg";var fbName=this.m_lonFbCfg.UCPTname.get();if(rawType.slice(0,1)=="#"){rawType=rawType.slice(1)}var requiredType=rawType.match(/[^\.]+$/);if(requiredType){requiredType=requiredType[0]}var type=m_sso.preprocessType(rawType);var type=elon.DefaultItem[type]?type:"Fb_Cfg";if(!coll||!coll.Item||(coll.Item.length<1)||(coll.Item[0].r_proxy_type!=requiredType)){var item=m_sso.getDefaultItem({type:type,Item:fbName,mute:true});if(this.m_lonFbCfg.DataPoint){for(var i=0;i<this.m_lonFbCfg.DataPoint.length;i++){var found=false;for(var j=0;j<item.DataPoint.length;j++){if(this.m_lonFbCfg.DataPoint[i].UCPTname.get()==item.DataPoint[j].UCPTname.get()){found=true;break}}if(!found){item.DataPoint.push(this.m_lonFbCfg.DataPoint[i])}}}m_sso.unmute({type:type,Item:fbName})}m_sso.getItem({type:"DpTree_Data",Item:"#Web/global/tree"}).Item.push(m_sso.getItem({Item:fbName}));thisObj.followLink({elon_url:((type=="Fb_Cfg")?type:rawType)+".htm",elon_target:"appFrame",elon_args_obj:{elon_name:fbName,elon_item:fbName}})}});this.getFrameByName=function(frameName,domObj){if(domObj==null){domObj=EchelonTop}var frames=null;try{frames=domObj.document.getElementsByName(frameName)}catch(e){return null}if(frames!=null&&frames.length>0){return frames[0]}for(var i=0;i<domObj.frames.length;i++){var window=domObj.frames[i];var frame=this.getFrameByName(frameName,window);if(frame!=null){return frame}}return null};this.setTitle=function(str){m_titleDp.value.set(str,this)};var copyProps=function(sourceObj,targetObj){for(var prop in sourceObj){targetObj[prop]=sourceObj[prop]}};var preloadIcons=function(){if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.search("MSIE 6.0")>-1){var frame=createIFrame({src:"/user/shared/pics.htm"},{position:"absolute",display:"none"},EchelonTop.document.body);var win=frame.contentWindow;win.attachEvent("onload",function(){thisObj.iconsReady=true})}else{thisObj.iconsReady=true}};this.getWebUIVersion=function(){return RELEASE_NUMBER_MAJOR.toString()+"."+RELEASE_NUMBER_MINOR1.toString()+RELEASE_NUMBER_MINOR2.toString()+"."+RELEASE_NUMBER_BUILD1.toString()+RELEASE_NUMBER_BUILD2.toString()};var thisObj=this;this.iconsArr=new Object();this.iconsArr.ICON_PROFILE=elon.imgUrl("tree/ppp.gif");this.iconsArr.ICON_SMTP=elon.imgUrl("tree/smtp.gif");this.iconsArr.ICON_WEB_BINDER=elon.imgUrl("tree/WebBinder.gif");this.iconsArr.ICON_SNTP=elon.imgUrl("tree/sntp.gif");this.iconsArr.ICON_RNI=elon.imgUrl("tree/rni.gif");this.iconsArr.ICON_ROUTER=elon.imgUrl("tree/Router.gif");this.iconsArr.ICON_ANALOG=elon.imgUrl("AlarmAnalog.gif");this.iconsArr.ICON_ANALOG_GREY=elon.imgUrl("AlarmAnalogGrey.gif");this.iconsArr.ICON_BIN=elon.imgUrl("AlarmBin.gif");this.iconsArr.ICON_BIN_GREY=elon.imgUrl("AlarmBinGrey.gif");this.iconsArr.ICON_BELL_RED=elon.imgUrl("Bellred.gif");this.iconsArr.ICON_BELL_ORANGE=elon.imgUrl("Bellorange.gif");this.iconsArr.ICON_BELL_GREEN=elon.imgUrl("Bellgreen.gif");this.iconsArr.ICON_ADV_SHOW=elon.imgUrl("arrowshow.gif");this.iconsArr.ICON_ADV_HIDE=elon.imgUrl("arrowhide.gif");this.iconsArr.ICON_OFFLINE=elon.imgUrl("Offline.gif");this.iconsArr.ICON_HAND_RED=elon.imgUrl("HandRed.gif");this.iconsArr.ICON_HAND_GREEN=elon.imgUrl("HandGreen.gif");this.iconsArr.ICON_BUG=elon.imgUrl("bug.gif");var m_sso=null;var m_ssq=null;this.util=null;var m_errTab={};var m_errDoc,m_errTableObj,m_errChkbx,m_warnChkbx,m_infoChkbx,m_debugChkbx;var m_documents=new Array();var m_frames=new Object();var m_lonMakerSel="";var m_titleDp=null;var m_initialized=false;var m_hrefParams=this.getHrefParams(EchelonTop.window);var m_appFrameURL=m_hrefParams.args.elon_url;var m_appFrameArgs=m_hrefParams.args.elon_name?{elon_name:m_hrefParams.args.elon_name}:null;preloadIcons();Echelon.includeCB(m_includeCB,EchelonTop.document);var RELEASE_NUMBER_MAJOR=4;var RELEASE_NUMBER_MINOR1=0;var RELEASE_NUMBER_MINOR2=6;var RELEASE_NUMBER_BUILD0=0;var RELEASE_NUMBER_BUILD1=5;var RELEASE_NUMBER_BUILD2=7;this.softwareVersion=String(RELEASE_NUMBER_MAJOR)+"."+String(RELEASE_NUMBER_MINOR1)+String(RELEASE_NUMBER_MINOR2)+"."+String(RELEASE_NUMBER_BUILD0)+String(RELEASE_NUMBER_BUILD1)+String(RELEASE_NUMBER_BUILD2);var GRADIENT_SRC=elon.imgUrl("elonGradient.gif");var GRADIENT_ANI_SRC=elon.imgUrl("elonGradientAni.gif");elon.debugWebUi=this.getHrefParams(EchelonTop.window).args.elon_debug_web_ui?true:false};Echelon.LayerManager=elon.Class({instantiator:"singleton",constructor:function(){this.m_debug=false;this.m_commonStyleProps={visibility:"hidden",position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",overflow:"hidden"}},"public":{disableSubjacent:function(){this.m_showLayer(this.m_getLayer("disable-subjacent"))},enableSubjacent:function(){this.m_hideLayer("disable-subjacent")},showDisableLayer:function(a){return this.m_showLayer(this.m_getLayer("disable",a))},showDragLayer:function(b,a){this.m_customMouseMoveCb=b;this.m_customMouseUpCb=a;this.m_getLayer("drag").style.visibility="visible"},hideDisableLayer:function(a){this.m_hideLayer("disable",a)},hideDragLayer:function(){this.m_hideLayer("drag");delete this.m_customMouseMoveCb;delete this.m_customMouseUpCb},elevateDisableLayer:function(c,b){if(!b){b=EchelonTop.document}var a=b.getElementById(this.m_getLayerId("disable"))||this.m_createLayer(b,"disable");a.style.zIndex=c}},"private":{"callback:m_mouseMoveCb":function(a){if(this.m_customMouseMoveCb){this.m_customMouseMoveCb(a)}return elon.util.catchEvent(a)},"callback:m_mouseUpCb":function(a){if(this.m_customMouseUpCb){this.m_customMouseUpCb(a)}return elon.util.catchEvent(a)},m_getLayer:function(a,b){if(!b){b=EchelonTop.document}return(b.getElementById(this.m_getLayerId(a))||this.m_createLayer(b,a))},m_showLayer:function(b){var a=b.style.visibility=="hidden";if(a){b.style.visibility="visible"}this.m_resizeLayer(b);return a},m_resizeLayer:function(a){a.style.width=elon.util.addPx(a.ownerDocument.body.scrollWidth);a.style.height=elon.util.addPx(elon.dom.getBodyScrollHeight(a.ownerDocument))||"100%"},m_getLayerId:function(a){return("elon_"+a+"_layer")},m_hideLayer:function(b,c){if(!c){c=EchelonTop.document}var a=c.getElementById(this.m_getLayerId(b));if(a){a.style.visibility="hidden"}},m_catchEvents:function(a){elon.util.addEvent(a,"click",elon.util.catchEvent);elon.util.addEvent(a,"selectstart",elon.util.catchEvent);elon.util.addEvent(a,"select",elon.util.catchEvent);elon.util.addEvent(a,"mouseover",elon.util.catchEvent);elon.util.addEvent(a,"contextmenu",elon.util.catchEvent)},m_createLayer:function(b,a){var d=b.createElement("div");d.id=this.m_getLayerId(a);b.body.appendChild(d);for(var c in this.m_commonStyleProps){d.style[c]=this.m_commonStyleProps[c]}if(elon.browser.IE){d.style.backgroundColor="white";d.style.filter="alpha(opacity=1)";d.style.opacity=0}if(this.m_debug&&a!="disable-subjacent"){d.style.backgroundColor=(a=="disable")?"red":"blue";d.style.filter="alpha(opacity=10)";d.style.opacity=0.1}switch(a){case"drag":d.style.zIndex=9999;elon.util.addEvent(d,"mousemove",this.m_mouseMoveCb);elon.util.addEvent(d,"mouseup",this.m_mouseUpCb);break;case"disable":d.style.zIndex=5555;this.m_catchEvents(d);break;case"disable-subjacent":d.style.zIndex=202;this.m_catchEvents(d);d.style.backgroundColor="white";if(elon.browser.IE678){d.style.filter="alpha(opacity=40)"}else{d.style.opacity=0.4}break}return d}}});Echelon.globals={modDpTypes:{MOD_TYPE_UNVT_FLOAT:"#8000010128000000[4].UNVT_float",MOD_TYPE_UNVT_DOUBLE_FLOAT:"#8000010128000000[4].UNVT_double_float",MOD_TYPE_UNVT_UNSIGNED_QUAD:"#8000010128000000[4].UNVT_unsigned_quad",MOD_TYPE_UNVT_UNSIGNED_QUAD_DEC:"#8000010128000000[4].UNVT_unsigned_quad#dec",MOD_TYPE_UNVT_UNSIGNED_QUAD_CENT:"#8000010128000000[4].UNVT_unsigned_quad#cent",MOD_TYPE_UNVT_UNSIGNED_QUAD_MIL:"#8000010128000000[4].UNVT_unsigned_quad#mil",MOD_TYPE_UNVT_SIGNED_QUAD:"#8000010128000000[4].UNVT_signed_quad",MOD_TYPE_UNVT_SIGNED_QUAD_DEC:"#8000010128000000[4].UNVT_signed_quad#dec",MOD_TYPE_UNVT_SIGNED_QUAD_CENT:"#8000010128000000[4].UNVT_signed_quad#cent",MOD_TYPE_UNVT_SIGNED_QUAD_MIL:"#8000010128000000[4].UNVT_signed_quad#mil",MOD_TYPE_UNVT_UNSIGNED_LONG:"#8000010128000000[4].UNVT_unsigned_long",MOD_TYPE_UNVT_UNSIGNED_LONG_DEC:"#8000010128000000[4].UNVT_unsigned_long#dec",MOD_TYPE_UNVT_UNSIGNED_LONG_CENT:"#8000010128000000[4].UNVT_unsigned_long#cent",MOD_TYPE_UNVT_UNSIGNED_LONG_MIL:"#8000010128000000[4].UNVT_unsigned_long#mil",MOD_TYPE_UNVT_SIGNED_LONG:"#8000010128000000[4].UNVT_signed_long",MOD_TYPE_UNVT_SIGNED_LONG_DEC:"#8000010128000000[4].UNVT_signed_long#dec",MOD_TYPE_UNVT_SIGNED_LONG_CENT:"#8000010128000000[4].UNVT_signed_long#cent",MOD_TYPE_UNVT_SIGNED_LONG_MIL:"#8000010128000000[4].UNVT_signed_long#mil",MOD_TYPE_UNVT_UNSIGNED_SHORT:"#8000010128000000[4].UNVT_unsigned_short",MOD_TYPE_UNVT_UNSIGNED_SHORT_DEC:"#8000010128000000[4].UNVT_unsigned_short#dec",MOD_TYPE_UNVT_SIGNED_SHORT:"#8000010128000000[4].UNVT_signed_short",MOD_TYPE_UNVT_SIGNED_SHORT_DEC:"#8000010128000000[4].UNVT_signed_short#dec",MOD_TYPE_UNVT_BOOLEAN:"#8000010000000000[3].UNVT_boolean",MOD_TYPE_SNVT_COUNT:"#0000000000000000[0].SNVT_count",MOD_TYPE_SNVT_COUNT_INC:"#0000000000000000[0].SNVT_count_inc",MOD_TYPE_SNVT_STR_ASC:"#0000000000000000[0].SNVT_str_asc",MOD_TYPE_RAW_HEX:"RAW_HEX"},itemCacheSize:150};elon.elon=new Echelon.Echelon();